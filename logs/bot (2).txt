2025-07-18 19:36:17,504 - WARNING - core.main.ez_main - CHANNEL_ID is not set or invalid. Jokes task will be disabled.
2025-07-18 19:36:18,289 - DEBUG - asyncio - Using proactor: IocpProactor
2025-07-18 19:36:18,291 - INFO - core.main.ez_main - main: Запуск основной функции бота.
2025-07-18 19:36:18,291 - INFO - core.group.stat.smain - ProfileManager instance initialized.
2025-07-18 19:36:18,292 - DEBUG - core.group.stat.smain - Attempting to connect to profiles database asynchronously.
2025-07-18 19:36:18,293 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001E29B24A160>
2025-07-18 19:36:18,294 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001E29B24A160> completed
2025-07-18 19:36:18,305 - INFO - core.group.stat.smain - Profiles database connected asynchronously.
2025-07-18 19:36:18,305 - DEBUG - core.group.stat.smain - Starting asynchronous profiles database schema initialization.
2025-07-18 19:36:18,306 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001E29B1A9D50>)
2025-07-18 19:36:18,307 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001E29B1A9D50>) completed
2025-07-18 19:36:18,308 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E29B25C2C0>, '\n        CREATE TABLE IF NOT EXISTS users (\n            user_id INTEGER PRIMARY KEY,\n            username TEXT,\n            first_name TEXT,\n            last_name TEXT,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        )\n        ', [])
2025-07-18 19:36:18,309 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E29B25C2C0>, '\n        CREATE TABLE IF NOT EXISTS users (\n            user_id INTEGER PRIMARY KEY,\n            username TEXT,\n            first_name TEXT,\n            last_name TEXT,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        )\n        ', []) completed
2025-07-18 19:36:18,310 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E29B25C2C0>, '\n        CREATE TABLE IF NOT EXISTS user_profiles (\n            profile_id INTEGER PRIMARY KEY AUTOINCREMENT,\n            user_id INTEGER UNIQUE,\n            hp INTEGER DEFAULT 100 CHECK(hp >= 0 AND hp <= 150),\n            level INTEGER DEFAULT 1 CHECK(level >= 1 AND level <= 169),\n            exp INTEGER DEFAULT 0,\n            lumcoins INTEGER DEFAULT 0,\n            daily_messages INTEGER DEFAULT 0,\n            total_messages INTEGER DEFAULT 0,\n            flames INTEGER DEFAULT 0,\n            last_work_time REAL DEFAULT 0,\n            FOREIGN KEY (user_id) REFERENCES users (user_id)\n        )\n        ', [])
2025-07-18 19:36:18,312 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E29B25C2C0>, '\n        CREATE TABLE IF NOT EXISTS user_profiles (\n            profile_id INTEGER PRIMARY KEY AUTOINCREMENT,\n            user_id INTEGER UNIQUE,\n            hp INTEGER DEFAULT 100 CHECK(hp >= 0 AND hp <= 150),\n            level INTEGER DEFAULT 1 CHECK(level >= 1 AND level <= 169),\n            exp INTEGER DEFAULT 0,\n            lumcoins INTEGER DEFAULT 0,\n            daily_messages INTEGER DEFAULT 0,\n            total_messages INTEGER DEFAULT 0,\n            flames INTEGER DEFAULT 0,\n            last_work_time REAL DEFAULT 0,\n            FOREIGN KEY (user_id) REFERENCES users (user_id)\n        )\n        ', []) completed
2025-07-18 19:36:18,313 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E29B25C2C0>, 'CREATE INDEX IF NOT EXISTS idx_user_profiles_user_id ON user_profiles(user_id)', [])
2025-07-18 19:36:18,314 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E29B25C2C0>, 'CREATE INDEX IF NOT EXISTS idx_user_profiles_user_id ON user_profiles(user_id)', []) completed
2025-07-18 19:36:18,315 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001E29B1A9D50>)
2025-07-18 19:36:18,315 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001E29B1A9D50>) completed
2025-07-18 19:36:18,316 - INFO - core.group.stat.smain - Asynchronous profiles database tables checked/created.
2025-07-18 19:36:18,317 - INFO - core.group.stat.smain - Asynchronous profiles database schema check/initialization completed.
2025-07-18 19:36:18,317 - INFO - core.main.ez_main - main: ProfileManager подключен.
2025-07-18 19:36:18,317 - INFO - core.main.ez_main - main: Инициализация основной базы данных.
2025-07-18 19:36:18,318 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001E29B2489A0>
2025-07-18 19:36:18,319 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001E29B2489A0> completed
2025-07-18 19:36:18,320 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001E29B1AAB60>, '\n            CREATE TABLE IF NOT EXISTS users (\n                user_id INTEGER PRIMARY KEY,\n                username TEXT,\n                first_name TEXT NOT NULL,\n                last_active_ts REAL DEFAULT 0\n            )\n        ', [])
2025-07-18 19:36:18,321 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001E29B1AAB60>, '\n            CREATE TABLE IF NOT EXISTS users (\n                user_id INTEGER PRIMARY KEY,\n                username TEXT,\n                first_name TEXT NOT NULL,\n                last_active_ts REAL DEFAULT 0\n            )\n        ', []) completed
2025-07-18 19:36:18,322 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001E29B1AAB60>, '\n            CREATE TABLE IF NOT EXISTS value_subscriptions (\n                user_id INTEGER PRIMARY KEY,\n                subscribed_ts REAL NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', [])
2025-07-18 19:36:18,324 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001E29B1AAB60>, '\n            CREATE TABLE IF NOT EXISTS value_subscriptions (\n                user_id INTEGER PRIMARY KEY,\n                subscribed_ts REAL NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', []) completed
2025-07-18 19:36:18,325 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001E29B1AAB60>, "\n            CREATE TABLE IF NOT EXISTS dialog_history (\n                history_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                role TEXT NOT NULL CHECK(role IN ('user', 'assistant')),\n                content TEXT NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", [])
2025-07-18 19:36:18,327 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001E29B1AAB60>, "\n            CREATE TABLE IF NOT EXISTS dialog_history (\n                history_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                role TEXT NOT NULL CHECK(role IN ('user', 'assistant')),\n                content TEXT NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", []) completed
2025-07-18 19:36:18,328 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001E29B1AAB60>, '\n            CREATE INDEX IF NOT EXISTS idx_dialog_history_user_ts ON dialog_history (user_id, timestamp DESC)\n        ', [])
2025-07-18 19:36:18,329 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001E29B1AAB60>, '\n            CREATE INDEX IF NOT EXISTS idx_dialog_history_user_ts ON dialog_history (user_id, timestamp DESC)\n        ', []) completed
2025-07-18 19:36:18,334 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001E29B1AAB60>, "\n            CREATE TABLE IF NOT EXISTS user_modes (\n                user_id INTEGER PRIMARY KEY,\n                mode TEXT NOT NULL DEFAULT 'saharoza',\n                rating_opportunities_count INTEGER DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", [])
2025-07-18 19:36:18,335 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001E29B1AAB60>, "\n            CREATE TABLE IF NOT EXISTS user_modes (\n                user_id INTEGER PRIMARY KEY,\n                mode TEXT NOT NULL DEFAULT 'saharoza',\n                rating_opportunities_count INTEGER DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", []) completed
2025-07-18 19:36:18,336 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001E29B1AAB60>, "\n            CREATE TABLE IF NOT EXISTS analytics_interactions (\n                interaction_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                action_type TEXT NOT NULL DEFAULT 'message',\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", [])
2025-07-18 19:36:18,338 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001E29B1AAB60>, "\n            CREATE TABLE IF NOT EXISTS analytics_interactions (\n                interaction_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                action_type TEXT NOT NULL DEFAULT 'message',\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", []) completed
2025-07-18 19:36:18,339 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001E29B1AAB60>, '\n            CREATE INDEX IF NOT EXISTS idx_interactions_user_ts_mode ON analytics_interactions (user_id, timestamp DESC, mode)\n        ', [])
2025-07-18 19:36:18,340 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001E29B1AAB60>, '\n            CREATE INDEX IF NOT EXISTS idx_interactions_user_ts_mode ON analytics_interactions (user_id, timestamp DESC, mode)\n        ', []) completed
2025-07-18 19:36:18,342 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001E29B1AAB60>, '\n            CREATE TABLE IF NOT EXISTS analytics_ratings (\n                rating_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                rated_message_id INTEGER,\n                dialog_history_id INTEGER,\n                timestamp REAL NOT NULL,\n                rating INTEGER NOT NULL CHECK(rating IN (0, 1)),\n                message_preview TEXT,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE,\n                FOREIGN KEY(dialog_history_id) REFERENCES dialog_history(history_id) ON DELETE SET NULL\n            )\n        ', [])
2025-07-18 19:36:18,344 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001E29B1AAB60>, '\n            CREATE TABLE IF NOT EXISTS analytics_ratings (\n                rating_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                rated_message_id INTEGER,\n                dialog_history_id INTEGER,\n                timestamp REAL NOT NULL,\n                rating INTEGER NOT NULL CHECK(rating IN (0, 1)),\n                message_preview TEXT,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE,\n                FOREIGN KEY(dialog_history_id) REFERENCES dialog_history(history_id) ON DELETE SET NULL\n            )\n        ', []) completed
2025-07-18 19:36:18,346 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001E29B1AAB60>, '\n            CREATE TABLE IF NOT EXISTS rp_user_stats (\n                user_id INTEGER PRIMARY KEY,\n                hp INTEGER NOT NULL DEFAULT 100,\n                heal_cooldown_ts REAL NOT NULL DEFAULT 0,\n                recovery_end_ts REAL NOT NULL DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', [])
2025-07-18 19:36:18,348 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001E29B1AAB60>, '\n            CREATE TABLE IF NOT EXISTS rp_user_stats (\n                user_id INTEGER PRIMARY KEY,\n                hp INTEGER NOT NULL DEFAULT 100,\n                heal_cooldown_ts REAL NOT NULL DEFAULT 0,\n                recovery_end_ts REAL NOT NULL DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', []) completed
2025-07-18 19:36:18,351 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001E29B1AAB60>)
2025-07-18 19:36:18,351 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001E29B1AAB60>) completed
2025-07-18 19:36:18,352 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001E29B1AAB60>)
2025-07-18 19:36:18,352 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001E29B1AAB60>) completed
2025-07-18 19:36:18,353 - INFO - database - Database initialized successfully.
2025-07-18 19:36:18,353 - INFO - core.main.ez_main - main: Инициализация StickerManager и загрузка стикеров.
2025-07-18 19:36:18,354 - INFO - core.main.ez_main - Stickers loaded from cache.
2025-07-18 19:36:18,354 - INFO - core.main.ez_main - Fetching stickers from Telegram...
2025-07-18 19:36:18,354 - INFO - core.main.ez_main - Stickers for mode 'saharoza' already loaded (possibly from cache). Skipping fetch.
2025-07-18 19:36:18,355 - INFO - core.main.ez_main - Stickers for mode 'dedinside' already loaded (possibly from cache). Skipping fetch.
2025-07-18 19:36:18,355 - INFO - core.main.ez_main - Stickers for mode 'genius' already loaded (possibly from cache). Skipping fetch.
2025-07-18 19:36:18,357 - INFO - core.main.ez_main - Stickers saved to cache.
2025-07-18 19:36:18,358 - DEBUG - core.main.ez_main - main: Передача зависимостей в диспетчер.
2025-07-18 19:36:18,358 - INFO - core.main.ez_main - main: Настройка и включение модуля цензуры (первый приоритет для групп).
2025-07-18 19:36:18,359 - DEBUG - censor_module - setup_censor_handlers: Начата настройка модуля цензуры.
2025-07-18 19:36:18,359 - DEBUG - censor_module - censor_module.load_bad_words: Попытка загрузить слова из файла: C:\Users\Student2-4\MRS_bot-3\data\bad_words.txt
2025-07-18 19:36:18,360 - INFO - censor_module - censor_module.load_bad_words: Успешно загружено 43 корней 'злых' слов из C:\Users\Student2-4\MRS_bot-3\data\bad_words.txt.
2025-07-18 19:36:18,361 - DEBUG - censor_module - setup_censor_handlers: Загружены не-слеш команды для игнорирования цензором: ['романтический поцелуй', 'поцеловать в щёчку', 'список действий', 'почесать спинку', 'схватить за шею', 'толкнуть сильно', 'прижать к себе', 'сделать массаж', 'подарить цветы', 'моё здоровье', 'мое здоровье', 'рп действия', 'спеть песню', 'попрощаться', 'разозлиться', 'команды рп', 'поцеловать', 'засмеяться', 'подмигнуть', 'превратить', 'испугаться', 'издеваться', 'список рп', 'погладить', 'покормить', 'подрочить', 'похлопать', 'постучать', 'успокоить', 'заплакать', 'удивиться', 'работать', 'здоровье', 'трахнуть', 'полечить', 'толкнуть', 'схватить', 'помахать', 'шлепнуть', 'пощечина', 'ущипнуть', 'обозвать', 'профиль', 'магазин', 'напоить', 'кивнуть', 'шепнуть', 'ударить', 'укусить', 'плюнуть', 'обидеть', 'моё хп', 'мое хп', 'обнять', 'уебать', 'пнуть', 'топ', 'хп']
2025-07-18 19:36:18,362 - DEBUG - censor_module - setup_censor_handlers: Включение censor_router в главный диспетчер.
2025-07-18 19:36:18,362 - INFO - censor_module - setup_censor_handlers: Обработчики модуля цензуры успешно настроены и включены в главный диспетчер.
2025-07-18 19:36:18,363 - INFO - core.main.ez_main - main: Модуль цензуры успешно интегрирован.
2025-07-18 19:36:18,364 - INFO - core.main.ez_main - main: Создан роутер для групповых текстовых сообщений.
2025-07-18 19:36:18,365 - INFO - core.main.ez_main - main: Включение stat_router в group_text_router.
2025-07-18 19:36:18,366 - INFO - core.group.stat.smain - Registering stat router handlers.
2025-07-18 19:36:18,366 - INFO - core.group.stat.smain - Stat router included in Dispatcher.
2025-07-18 19:36:18,366 - INFO - core.main.ez_main - main: Включение rp_router в group_text_router.
2025-07-18 19:36:18,367 - INFO - core.group.RP.rmain - RP router included and configured.
2025-07-18 19:36:18,367 - INFO - core.main.ez_main - main: group_text_router успешно интегрирован в главный диспетчер.
2025-07-18 19:36:18,368 - INFO - core.main.ez_main - main: Создан роутер для приватных чатов.
2025-07-18 19:36:18,369 - INFO - core.main.ez_main - main: Регистрация основных обработчиков команд ТОЛЬКО для приватных чатов.
2025-07-18 19:36:18,370 - INFO - core.main.ez_main - main: Основной обработчик текстовых сообщений для ЛС зарегистрирован в private_router.
2025-07-18 19:36:18,370 - INFO - core.main.ez_main - main: private_router успешно интегрирован в главный диспетчер.
2025-07-18 19:36:18,372 - INFO - core.main.ez_main - main: Запуск фоновых задач.
2025-07-18 19:36:18,372 - INFO - core.main.ez_main - main: Запуск поллинга бота...
2025-07-18 19:36:18,373 - INFO - aiogram.dispatcher - Start polling
2025-07-18 19:36:18,374 - INFO - core.main.ez_main - Jokes task started.
2025-07-18 19:36:18,374 - WARNING - core.main.ez_main - Jokes task disabled: CHANNEL_ID is not set or invalid.
2025-07-18 19:36:18,375 - INFO - core.group.RP.rmain - Periodic HP recovery task started.
2025-07-18 19:36:18,541 - INFO - aiogram.dispatcher - Run polling for bot @infernal_madam_bot id=6543660809 - 'Мэрри Шэдоу💔'
2025-07-18 19:36:18,624 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Ударить' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 19:36:18,625 - DEBUG - censor_module - censor_message_handler: Сообщение 'Ударить' является известной не-слеш командой 'ударить'. Попытка прямого вызова обработчика.
2025-07-18 19:36:18,625 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: Received text message: 'Ударить' from user 5157172276.
2025-07-18 19:36:18,626 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: No RP action found in text: 'Ударить'.
2025-07-18 19:36:18,626 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'ударить' успешно выполнен. Завершение обработки сообщения.
2025-07-18 19:36:18,627 - INFO - aiogram.event - Update id=836455741 is handled. Duration 0 ms by bot id=6543660809
2025-07-18 19:36:33,058 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Ударить' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 19:36:33,059 - DEBUG - censor_module - censor_message_handler: Сообщение 'Ударить' является известной не-слеш командой 'ударить'. Попытка прямого вызова обработчика.
2025-07-18 19:36:33,059 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: Received text message: 'Ударить' from user 5315054003.
2025-07-18 19:36:33,060 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: No RP action found in text: 'Ударить'.
2025-07-18 19:36:33,060 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'ударить' успешно выполнен. Завершение обработки сообщения.
2025-07-18 19:36:33,061 - INFO - aiogram.event - Update id=836455742 is handled. Duration 0 ms by bot id=6543660809
2025-07-18 19:42:45,290 - INFO - aiogram.dispatcher - Polling stopped
2025-07-18 19:42:45,556 - INFO - core.main.ez_main - main: Остановка бота...
2025-07-18 19:42:45,557 - INFO - core.main.ez_main - main: Фоновые задачи успешно отменены.
2025-07-18 19:42:45,557 - DEBUG - core.group.stat.smain - Attempting to close profiles database connection.
2025-07-18 19:42:45,558 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001E29B1A9D50>)
2025-07-18 19:42:45,559 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001E29B1A9D50>) completed
2025-07-18 19:42:45,560 - INFO - core.group.stat.smain - Profiles database connection closed successfully.
2025-07-18 19:42:45,560 - INFO - core.main.ez_main - main: Соединение ProfileManager закрыто.
2025-07-18 19:42:45,561 - INFO - core.main.ez_main - main: Сессия бота закрыта. Выход.
2025-07-18 19:42:45,562 - INFO - aiogram.dispatcher - Polling stopped for bot @infernal_madam_bot id=6543660809 - 'Мэрри Шэдоу💔'
2025-07-18 19:42:45,564 - INFO - core.main.ez_main - main: Бот остановлен вручную (KeyboardInterrupt).
2025-07-18 19:42:54,712 - WARNING - core.main.ez_main - CHANNEL_ID is not set or invalid. Jokes task will be disabled.
2025-07-18 19:42:55,232 - DEBUG - asyncio - Using proactor: IocpProactor
2025-07-18 19:42:55,233 - INFO - core.main.ez_main - main: Запуск основной функции бота.
2025-07-18 19:42:55,234 - INFO - core.group.stat.smain - ProfileManager instance initialized.
2025-07-18 19:42:55,234 - DEBUG - core.group.stat.smain - Attempting to connect to profiles database asynchronously.
2025-07-18 19:42:55,235 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002212AFB20C0>
2025-07-18 19:42:55,237 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002212AFB20C0> completed
2025-07-18 19:42:55,237 - INFO - core.group.stat.smain - Profiles database connected asynchronously.
2025-07-18 19:42:55,238 - DEBUG - core.group.stat.smain - Starting asynchronous profiles database schema initialization.
2025-07-18 19:42:55,238 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 19:42:55,239 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 19:42:55,240 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212AF7C240>, '\n        CREATE TABLE IF NOT EXISTS users (\n            user_id INTEGER PRIMARY KEY,\n            username TEXT,\n            first_name TEXT,\n            last_name TEXT,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        )\n        ', [])
2025-07-18 19:42:55,242 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212AF7C240>, '\n        CREATE TABLE IF NOT EXISTS users (\n            user_id INTEGER PRIMARY KEY,\n            username TEXT,\n            first_name TEXT,\n            last_name TEXT,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        )\n        ', []) completed
2025-07-18 19:42:55,243 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212AF7C240>, '\n        CREATE TABLE IF NOT EXISTS user_profiles (\n            profile_id INTEGER PRIMARY KEY AUTOINCREMENT,\n            user_id INTEGER UNIQUE,\n            hp INTEGER DEFAULT 100 CHECK(hp >= 0 AND hp <= 150),\n            level INTEGER DEFAULT 1 CHECK(level >= 1 AND level <= 169),\n            exp INTEGER DEFAULT 0,\n            lumcoins INTEGER DEFAULT 0,\n            daily_messages INTEGER DEFAULT 0,\n            total_messages INTEGER DEFAULT 0,\n            flames INTEGER DEFAULT 0,\n            last_work_time REAL DEFAULT 0,\n            FOREIGN KEY (user_id) REFERENCES users (user_id)\n        )\n        ', [])
2025-07-18 19:42:55,244 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212AF7C240>, '\n        CREATE TABLE IF NOT EXISTS user_profiles (\n            profile_id INTEGER PRIMARY KEY AUTOINCREMENT,\n            user_id INTEGER UNIQUE,\n            hp INTEGER DEFAULT 100 CHECK(hp >= 0 AND hp <= 150),\n            level INTEGER DEFAULT 1 CHECK(level >= 1 AND level <= 169),\n            exp INTEGER DEFAULT 0,\n            lumcoins INTEGER DEFAULT 0,\n            daily_messages INTEGER DEFAULT 0,\n            total_messages INTEGER DEFAULT 0,\n            flames INTEGER DEFAULT 0,\n            last_work_time REAL DEFAULT 0,\n            FOREIGN KEY (user_id) REFERENCES users (user_id)\n        )\n        ', []) completed
2025-07-18 19:42:55,246 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212AF7C240>, 'CREATE INDEX IF NOT EXISTS idx_user_profiles_user_id ON user_profiles(user_id)', [])
2025-07-18 19:42:55,248 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212AF7C240>, 'CREATE INDEX IF NOT EXISTS idx_user_profiles_user_id ON user_profiles(user_id)', []) completed
2025-07-18 19:42:55,249 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 19:42:55,249 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 19:42:55,250 - INFO - core.group.stat.smain - Asynchronous profiles database tables checked/created.
2025-07-18 19:42:55,250 - INFO - core.group.stat.smain - Asynchronous profiles database schema check/initialization completed.
2025-07-18 19:42:55,251 - INFO - core.main.ez_main - main: ProfileManager подключен.
2025-07-18 19:42:55,252 - INFO - core.main.ez_main - main: Инициализация основной базы данных.
2025-07-18 19:42:55,252 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002212AFB23E0>
2025-07-18 19:42:55,253 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002212AFB23E0> completed
2025-07-18 19:42:55,254 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0AB60>, '\n            CREATE TABLE IF NOT EXISTS users (\n                user_id INTEGER PRIMARY KEY,\n                username TEXT,\n                first_name TEXT NOT NULL,\n                last_active_ts REAL DEFAULT 0\n            )\n        ', [])
2025-07-18 19:42:55,255 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0AB60>, '\n            CREATE TABLE IF NOT EXISTS users (\n                user_id INTEGER PRIMARY KEY,\n                username TEXT,\n                first_name TEXT NOT NULL,\n                last_active_ts REAL DEFAULT 0\n            )\n        ', []) completed
2025-07-18 19:42:55,256 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0AB60>, '\n            CREATE TABLE IF NOT EXISTS value_subscriptions (\n                user_id INTEGER PRIMARY KEY,\n                subscribed_ts REAL NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', [])
2025-07-18 19:42:55,257 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0AB60>, '\n            CREATE TABLE IF NOT EXISTS value_subscriptions (\n                user_id INTEGER PRIMARY KEY,\n                subscribed_ts REAL NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', []) completed
2025-07-18 19:42:55,258 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0AB60>, "\n            CREATE TABLE IF NOT EXISTS dialog_history (\n                history_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                role TEXT NOT NULL CHECK(role IN ('user', 'assistant')),\n                content TEXT NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", [])
2025-07-18 19:42:55,262 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0AB60>, "\n            CREATE TABLE IF NOT EXISTS dialog_history (\n                history_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                role TEXT NOT NULL CHECK(role IN ('user', 'assistant')),\n                content TEXT NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", []) completed
2025-07-18 19:42:55,263 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0AB60>, '\n            CREATE INDEX IF NOT EXISTS idx_dialog_history_user_ts ON dialog_history (user_id, timestamp DESC)\n        ', [])
2025-07-18 19:42:55,264 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0AB60>, '\n            CREATE INDEX IF NOT EXISTS idx_dialog_history_user_ts ON dialog_history (user_id, timestamp DESC)\n        ', []) completed
2025-07-18 19:42:55,265 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0AB60>, "\n            CREATE TABLE IF NOT EXISTS user_modes (\n                user_id INTEGER PRIMARY KEY,\n                mode TEXT NOT NULL DEFAULT 'saharoza',\n                rating_opportunities_count INTEGER DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", [])
2025-07-18 19:42:55,265 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0AB60>, "\n            CREATE TABLE IF NOT EXISTS user_modes (\n                user_id INTEGER PRIMARY KEY,\n                mode TEXT NOT NULL DEFAULT 'saharoza',\n                rating_opportunities_count INTEGER DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", []) completed
2025-07-18 19:42:55,269 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0AB60>, "\n            CREATE TABLE IF NOT EXISTS analytics_interactions (\n                interaction_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                action_type TEXT NOT NULL DEFAULT 'message',\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", [])
2025-07-18 19:42:55,270 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0AB60>, "\n            CREATE TABLE IF NOT EXISTS analytics_interactions (\n                interaction_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                action_type TEXT NOT NULL DEFAULT 'message',\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", []) completed
2025-07-18 19:42:55,271 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0AB60>, '\n            CREATE INDEX IF NOT EXISTS idx_interactions_user_ts_mode ON analytics_interactions (user_id, timestamp DESC, mode)\n        ', [])
2025-07-18 19:42:55,271 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0AB60>, '\n            CREATE INDEX IF NOT EXISTS idx_interactions_user_ts_mode ON analytics_interactions (user_id, timestamp DESC, mode)\n        ', []) completed
2025-07-18 19:42:55,272 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0AB60>, '\n            CREATE TABLE IF NOT EXISTS analytics_ratings (\n                rating_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                rated_message_id INTEGER,\n                dialog_history_id INTEGER,\n                timestamp REAL NOT NULL,\n                rating INTEGER NOT NULL CHECK(rating IN (0, 1)),\n                message_preview TEXT,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE,\n                FOREIGN KEY(dialog_history_id) REFERENCES dialog_history(history_id) ON DELETE SET NULL\n            )\n        ', [])
2025-07-18 19:42:55,273 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0AB60>, '\n            CREATE TABLE IF NOT EXISTS analytics_ratings (\n                rating_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                rated_message_id INTEGER,\n                dialog_history_id INTEGER,\n                timestamp REAL NOT NULL,\n                rating INTEGER NOT NULL CHECK(rating IN (0, 1)),\n                message_preview TEXT,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE,\n                FOREIGN KEY(dialog_history_id) REFERENCES dialog_history(history_id) ON DELETE SET NULL\n            )\n        ', []) completed
2025-07-18 19:42:55,279 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0AB60>, '\n            CREATE TABLE IF NOT EXISTS rp_user_stats (\n                user_id INTEGER PRIMARY KEY,\n                hp INTEGER NOT NULL DEFAULT 100,\n                heal_cooldown_ts REAL NOT NULL DEFAULT 0,\n                recovery_end_ts REAL NOT NULL DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', [])
2025-07-18 19:42:55,281 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0AB60>, '\n            CREATE TABLE IF NOT EXISTS rp_user_stats (\n                user_id INTEGER PRIMARY KEY,\n                hp INTEGER NOT NULL DEFAULT 100,\n                heal_cooldown_ts REAL NOT NULL DEFAULT 0,\n                recovery_end_ts REAL NOT NULL DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', []) completed
2025-07-18 19:42:55,284 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF0AB60>)
2025-07-18 19:42:55,284 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF0AB60>) completed
2025-07-18 19:42:55,285 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212AF0AB60>)
2025-07-18 19:42:55,285 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212AF0AB60>) completed
2025-07-18 19:42:55,286 - INFO - database - Database initialized successfully.
2025-07-18 19:42:55,287 - INFO - core.main.ez_main - main: Инициализация StickerManager и загрузка стикеров.
2025-07-18 19:42:55,287 - INFO - core.main.ez_main - Stickers loaded from cache.
2025-07-18 19:42:55,288 - INFO - core.main.ez_main - Fetching stickers from Telegram...
2025-07-18 19:42:55,288 - INFO - core.main.ez_main - Stickers for mode 'saharoza' already loaded (possibly from cache). Skipping fetch.
2025-07-18 19:42:55,289 - INFO - core.main.ez_main - Stickers for mode 'dedinside' already loaded (possibly from cache). Skipping fetch.
2025-07-18 19:42:55,289 - INFO - core.main.ez_main - Stickers for mode 'genius' already loaded (possibly from cache). Skipping fetch.
2025-07-18 19:42:55,291 - INFO - core.main.ez_main - Stickers saved to cache.
2025-07-18 19:42:55,294 - DEBUG - core.main.ez_main - main: Передача зависимостей в диспетчер.
2025-07-18 19:42:55,295 - INFO - core.main.ez_main - main: Настройка и включение модуля цензуры (первый приоритет для групп).
2025-07-18 19:42:55,296 - DEBUG - censor_module - setup_censor_handlers: Начата настройка модуля цензуры.
2025-07-18 19:42:55,296 - DEBUG - censor_module - censor_module.load_bad_words: Попытка загрузить слова из файла: C:\Users\Student2-4\MRS_bot-3\data\bad_words.txt
2025-07-18 19:42:55,297 - INFO - censor_module - censor_module.load_bad_words: Успешно загружено 43 корней 'злых' слов из C:\Users\Student2-4\MRS_bot-3\data\bad_words.txt.
2025-07-18 19:42:55,297 - DEBUG - censor_module - setup_censor_handlers: Загружены не-слеш команды для игнорирования цензором: ['романтический поцелуй', 'поцеловать в щёчку', 'список действий', 'почесать спинку', 'схватить за шею', 'толкнуть сильно', 'прижать к себе', 'сделать массаж', 'подарить цветы', 'моё здоровье', 'мое здоровье', 'рп действия', 'спеть песню', 'попрощаться', 'разозлиться', 'команды рп', 'поцеловать', 'засмеяться', 'подмигнуть', 'превратить', 'испугаться', 'издеваться', 'список рп', 'погладить', 'покормить', 'подрочить', 'похлопать', 'постучать', 'успокоить', 'заплакать', 'удивиться', 'работать', 'здоровье', 'трахнуть', 'полечить', 'толкнуть', 'схватить', 'помахать', 'шлепнуть', 'пощечина', 'ущипнуть', 'обозвать', 'профиль', 'магазин', 'напоить', 'кивнуть', 'шепнуть', 'ударить', 'укусить', 'плюнуть', 'обидеть', 'моё хп', 'мое хп', 'обнять', 'уебать', 'пнуть', 'топ', 'хп']
2025-07-18 19:42:55,300 - DEBUG - censor_module - setup_censor_handlers: Включение censor_router в главный диспетчер.
2025-07-18 19:42:55,300 - INFO - censor_module - setup_censor_handlers: Обработчики модуля цензуры успешно настроены и включены в главный диспетчер.
2025-07-18 19:42:55,301 - INFO - core.main.ez_main - main: Модуль цензуры успешно интегрирован.
2025-07-18 19:42:55,302 - INFO - core.main.ez_main - main: Создан роутер для групповых текстовых сообщений.
2025-07-18 19:42:55,302 - INFO - core.main.ez_main - main: Включение stat_router в group_text_router.
2025-07-18 19:42:55,302 - INFO - core.group.stat.smain - Registering stat router handlers.
2025-07-18 19:42:55,303 - INFO - core.group.stat.smain - Stat router included in Dispatcher.
2025-07-18 19:42:55,303 - INFO - core.main.ez_main - main: Включение rp_router в group_text_router.
2025-07-18 19:42:55,303 - INFO - core.group.RP.rmain - RP router included and configured.
2025-07-18 19:42:55,304 - INFO - core.main.ez_main - main: group_text_router успешно интегрирован в главный диспетчер.
2025-07-18 19:42:55,304 - INFO - core.main.ez_main - main: Создан роутер для приватных чатов.
2025-07-18 19:42:55,305 - INFO - core.main.ez_main - main: Регистрация основных обработчиков команд ТОЛЬКО для приватных чатов.
2025-07-18 19:42:55,306 - INFO - core.main.ez_main - main: Основной обработчик текстовых сообщений для ЛС зарегистрирован в private_router.
2025-07-18 19:42:55,306 - INFO - core.main.ez_main - main: private_router успешно интегрирован в главный диспетчер.
2025-07-18 19:42:55,307 - INFO - core.main.ez_main - main: Запуск фоновых задач.
2025-07-18 19:42:55,308 - INFO - core.main.ez_main - main: Запуск поллинга бота...
2025-07-18 19:42:55,313 - INFO - aiogram.dispatcher - Start polling
2025-07-18 19:42:55,315 - INFO - core.main.ez_main - Jokes task started.
2025-07-18 19:42:55,316 - WARNING - core.main.ez_main - Jokes task disabled: CHANNEL_ID is not set or invalid.
2025-07-18 19:42:55,317 - INFO - core.group.RP.rmain - Periodic HP recovery task started.
2025-07-18 19:42:55,540 - INFO - aiogram.dispatcher - Run polling for bot @infernal_madam_bot id=6543660809 - 'Мэрри Шэдоу💔'
2025-07-18 19:43:06,057 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Супер' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 19:43:06,058 - DEBUG - censor_module - censor_message_handler: Вызов censor_text_func для текста: 'Супер'
2025-07-18 19:43:06,059 - DEBUG - censor_module - censor_module.censor_text_func: Начата обработка текста: 'Супер' с корнями: ['пизд', 'хуй', 'елда', 'член', 'хуе', 'долба', 'пен', 'еб', 'ёб', 'бл', 'сперм', 'шлю', 'соса', 'пизд', 'хуй', 'елда', 'член', 'овощ', 'окак', 'короче', 'пизда', 'уёбище', 'бдсм', 'фетиш', 'фашист', 'адольф', 'гитлер', 'стинтлер', 'шлюх', 'раф', 'кун', 'даня', 'челобрек', 'мама', 'мать', 'секс', 'папа', 'батя', 'отец', 'минет', 'бля', 'кунилингус', 'трах']
2025-07-18 19:43:06,060 - DEBUG - censor_module - censor_module.censor_text_func: Сформировано объединенное регулярное выражение: '\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*х+\W*у+\W*е+\w*)\b|\b(?:\w*д+\W*о+\W*л+\W*б+\W*а+\w*)\b|\b(?:\w*п+\W*е+\W*н+\w*)\b|\b(?:\w*е+\W*б+\w*)\b|\b(?:\w*ё+\W*б+\w*)\b|\b(?:\w*б+\W*л+\w*)\b|\b(?:\w*с+\W*п+\W*е+\W*р+\W*м+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\w*)\b|\b(?:\w*с+\W*о+\W*с+\W*а+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*о+\W*в+\W*о+\W*щ+\w*)\b|\b(?:\w*о+\W*к+\W*а+\W*к+\w*)\b|\b(?:\w*к+\W*о+\W*р+\W*о+\W*ч+\W*е+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\W*а+\w*)\b|\b(?:\w*у+\W*ё+\W*б+\W*и+\W*щ+\W*е+\w*)\b|\b(?:\w*б+\W*д+\W*с+\W*м+\w*)\b|\b(?:\w*ф+\W*е+\W*т+\W*и+\W*ш+\w*)\b|\b(?:\w*ф+\W*а+\W*ш+\W*и+\W*с+\W*т+\w*)\b|\b(?:\w*а+\W*д+\W*о+\W*л+\W*ь+\W*ф+\w*)\b|\b(?:\w*г+\W*и+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*с+\W*т+\W*и+\W*н+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\W*х+\w*)\b|\b(?:\w*р+\W*а+\W*ф+\w*)\b|\b(?:\w*к+\W*у+\W*н+\w*)\b|\b(?:\w*д+\W*а+\W*н+\W*я+\w*)\b|\b(?:\w*ч+\W*е+\W*л+\W*о+\W*б+\W*р+\W*е+\W*к+\w*)\b|\b(?:\w*м+\W*а+\W*м+\W*а+\w*)\b|\b(?:\w*м+\W*а+\W*т+\W*ь+\w*)\b|\b(?:\w*с+\W*е+\W*к+\W*с+\w*)\b|\b(?:\w*п+\W*а+\W*п+\W*а+\w*)\b|\b(?:\w*б+\W*а+\W*т+\W*я+\w*)\b|\b(?:\w*о+\W*т+\W*е+\W*ц+\w*)\b|\b(?:\w*м+\W*и+\W*н+\W*е+\W*т+\w*)\b|\b(?:\w*б+\W*л+\W*я+\w*)\b|\b(?:\w*к+\W*у+\W*н+\W*и+\W*л+\W*и+\W*н+\W*г+\W*у+\W*с+\w*)\b|\b(?:\w*т+\W*р+\W*а+\W*х+\w*)\b'
2025-07-18 19:43:06,136 - DEBUG - censor_module - censor_module.censor_text_func: Конечный цензурированный текст: 'Супер', Было ли цензурировано: False
2025-07-18 19:43:06,137 - DEBUG - censor_module - censor_message_handler: Результат censor_text_func: was_censored=False
2025-07-18 19:43:06,138 - DEBUG - censor_module - censor_message_handler: ЦЕНЗУРА НЕ ОБНАРУЖЕНА: Оригинал: 'Супер'
2025-07-18 19:43:06,138 - DEBUG - censor_module - censor_message_handler: Сообщение от пользователя 5315054003 не требует цензуры. Сообщение будет передано для дальнейшей обработки.
2025-07-18 19:43:06,138 - INFO - aiogram.event - Update id=836455743 is handled. Duration 79 ms by bot id=6543660809
2025-07-18 19:43:12,253 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Ударить' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 19:43:12,254 - DEBUG - censor_module - censor_message_handler: Сообщение 'Ударить' является известной не-слеш командой 'ударить'. Попытка прямого вызова обработчика.
2025-07-18 19:43:12,255 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: Received text message: 'Ударить' from user 5315054003.
2025-07-18 19:43:12,255 - INFO - core.group.RP.rmain - handle_rp_action_via_text: Processing RP action 'ударить' (via text) for user 5315054003.
2025-07-18 19:43:12,256 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002212AFDF6A0>
2025-07-18 19:43:12,257 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002212AFDF6A0> completed
2025-07-18 19:43:12,258 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8A90>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,))
2025-07-18 19:43:12,259 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8A90>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,)) completed
2025-07-18 19:43:12,260 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8A90>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,))
2025-07-18 19:43:12,261 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8A90>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,)) completed
2025-07-18 19:43:12,262 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000221298AFE40>)
2025-07-18 19:43:12,263 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000221298AFE40>) completed
2025-07-18 19:43:12,264 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000221298AFE40>)
2025-07-18 19:43:12,264 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000221298AFE40>) completed
2025-07-18 19:43:12,265 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B0D8A90>)
2025-07-18 19:43:12,266 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B0D8A90>) completed
2025-07-18 19:43:12,267 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002212AFDF240>
2025-07-18 19:43:12,268 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002212AFDF240> completed
2025-07-18 19:43:12,269 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8A90>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,))
2025-07-18 19:43:12,270 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8A90>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,)) completed
2025-07-18 19:43:12,271 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8A90>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,))
2025-07-18 19:43:12,271 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8A90>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,)) completed
2025-07-18 19:43:12,272 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000221298AD6C0>)
2025-07-18 19:43:12,273 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000221298AD6C0>) completed
2025-07-18 19:43:12,274 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000221298AD6C0>)
2025-07-18 19:43:12,274 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000221298AD6C0>) completed
2025-07-18 19:43:12,278 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B0D8A90>)
2025-07-18 19:43:12,280 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B0D8A90>) completed
2025-07-18 19:43:12,282 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002212AFB2160>
2025-07-18 19:43:12,283 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002212AFB2160> completed
2025-07-18 19:43:12,283 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8C70>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,))
2025-07-18 19:43:12,285 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8C70>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,)) completed
2025-07-18 19:43:12,285 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8C70>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (83, 5315054003))
2025-07-18 19:43:12,287 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8C70>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (83, 5315054003)) completed
2025-07-18 19:43:12,288 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212B0D8C70>)
2025-07-18 19:43:12,340 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212B0D8C70>) completed
2025-07-18 19:43:12,342 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B0D8C70>)
2025-07-18 19:43:12,343 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B0D8C70>) completed
2025-07-18 19:43:12,722 - INFO - core.group.RP.rmain - RP Action 'ударить' performed by 5315054003. Sender HP: 83.
2025-07-18 19:43:12,723 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'ударить' успешно выполнен. Завершение обработки сообщения.
2025-07-18 19:43:12,723 - INFO - aiogram.event - Update id=836455744 is handled. Duration 469 ms by bot id=6543660809
2025-07-18 19:43:19,926 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Окак' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 19:43:19,927 - DEBUG - censor_module - censor_message_handler: Вызов censor_text_func для текста: 'Окак'
2025-07-18 19:43:19,928 - DEBUG - censor_module - censor_module.censor_text_func: Начата обработка текста: 'Окак' с корнями: ['пизд', 'хуй', 'елда', 'член', 'хуе', 'долба', 'пен', 'еб', 'ёб', 'бл', 'сперм', 'шлю', 'соса', 'пизд', 'хуй', 'елда', 'член', 'овощ', 'окак', 'короче', 'пизда', 'уёбище', 'бдсм', 'фетиш', 'фашист', 'адольф', 'гитлер', 'стинтлер', 'шлюх', 'раф', 'кун', 'даня', 'челобрек', 'мама', 'мать', 'секс', 'папа', 'батя', 'отец', 'минет', 'бля', 'кунилингус', 'трах']
2025-07-18 19:43:19,929 - DEBUG - censor_module - censor_module.censor_text_func: Сформировано объединенное регулярное выражение: '\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*х+\W*у+\W*е+\w*)\b|\b(?:\w*д+\W*о+\W*л+\W*б+\W*а+\w*)\b|\b(?:\w*п+\W*е+\W*н+\w*)\b|\b(?:\w*е+\W*б+\w*)\b|\b(?:\w*ё+\W*б+\w*)\b|\b(?:\w*б+\W*л+\w*)\b|\b(?:\w*с+\W*п+\W*е+\W*р+\W*м+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\w*)\b|\b(?:\w*с+\W*о+\W*с+\W*а+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*о+\W*в+\W*о+\W*щ+\w*)\b|\b(?:\w*о+\W*к+\W*а+\W*к+\w*)\b|\b(?:\w*к+\W*о+\W*р+\W*о+\W*ч+\W*е+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\W*а+\w*)\b|\b(?:\w*у+\W*ё+\W*б+\W*и+\W*щ+\W*е+\w*)\b|\b(?:\w*б+\W*д+\W*с+\W*м+\w*)\b|\b(?:\w*ф+\W*е+\W*т+\W*и+\W*ш+\w*)\b|\b(?:\w*ф+\W*а+\W*ш+\W*и+\W*с+\W*т+\w*)\b|\b(?:\w*а+\W*д+\W*о+\W*л+\W*ь+\W*ф+\w*)\b|\b(?:\w*г+\W*и+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*с+\W*т+\W*и+\W*н+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\W*х+\w*)\b|\b(?:\w*р+\W*а+\W*ф+\w*)\b|\b(?:\w*к+\W*у+\W*н+\w*)\b|\b(?:\w*д+\W*а+\W*н+\W*я+\w*)\b|\b(?:\w*ч+\W*е+\W*л+\W*о+\W*б+\W*р+\W*е+\W*к+\w*)\b|\b(?:\w*м+\W*а+\W*м+\W*а+\w*)\b|\b(?:\w*м+\W*а+\W*т+\W*ь+\w*)\b|\b(?:\w*с+\W*е+\W*к+\W*с+\w*)\b|\b(?:\w*п+\W*а+\W*п+\W*а+\w*)\b|\b(?:\w*б+\W*а+\W*т+\W*я+\w*)\b|\b(?:\w*о+\W*т+\W*е+\W*ц+\w*)\b|\b(?:\w*м+\W*и+\W*н+\W*е+\W*т+\w*)\b|\b(?:\w*б+\W*л+\W*я+\w*)\b|\b(?:\w*к+\W*у+\W*н+\W*и+\W*л+\W*и+\W*н+\W*г+\W*у+\W*с+\w*)\b|\b(?:\w*т+\W*р+\W*а+\W*х+\w*)\b'
2025-07-18 19:43:19,930 - DEBUG - censor_module - censor_module.generate_random_symbols: Сгенерированы случайные символы длиной 4: '%^#&'
2025-07-18 19:43:19,931 - DEBUG - censor_module - censor_module.censor_text_func: Обнаружено совпадение 'Окак', заменено на '%^#&'
2025-07-18 19:43:19,931 - DEBUG - censor_module - censor_module.censor_text_func: Конечный цензурированный текст: '%^#&', Было ли цензурировано: True
2025-07-18 19:43:19,932 - DEBUG - censor_module - censor_message_handler: Результат censor_text_func: was_censored=True
2025-07-18 19:43:19,932 - INFO - censor_module - censor_message_handler: ЦЕНЗУРА ОБНАРУЖЕНА: Оригинал: 'Окак', Цензурировано: '%^#&'. Найденные слова: ['Окак']
2025-07-18 19:43:19,933 - DEBUG - censor_module - censor_message_handler: Попытка удалить сообщение 2347 от пользователя 5315054003.
2025-07-18 19:43:20,126 - INFO - censor_module - censor_message_handler: Сообщение 2347 от пользователя 5315054003 УСПЕШНО удалено.
2025-07-18 19:43:20,126 - DEBUG - censor_module - censor_message_handler: Попытка отправить цензурированное сообщение в чат -1002640920461: '<b>彼岸花</b> имел в виду: "%^#&"'
2025-07-18 19:43:20,377 - INFO - censor_module - censor_message_handler: Цензурированное сообщение УСПЕШНО отправлено в чат -1002640920461.
2025-07-18 19:43:20,378 - INFO - aiogram.event - Update id=836455745 is handled. Duration 452 ms by bot id=6543660809
2025-07-18 19:43:23,829 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Обнять' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 19:43:23,831 - DEBUG - censor_module - censor_message_handler: Сообщение 'Обнять' является известной не-слеш командой 'обнять'. Попытка прямого вызова обработчика.
2025-07-18 19:43:23,831 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: Received text message: 'Обнять' from user 5315054003.
2025-07-18 19:43:23,831 - INFO - core.group.RP.rmain - handle_rp_action_via_text: Processing RP action 'обнять' (via text) for user 5315054003.
2025-07-18 19:43:23,832 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002212AFDF4C0>
2025-07-18 19:43:23,833 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002212AFDF4C0> completed
2025-07-18 19:43:23,834 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8400>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,))
2025-07-18 19:43:23,835 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8400>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,)) completed
2025-07-18 19:43:23,836 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8400>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,))
2025-07-18 19:43:23,836 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8400>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,)) completed
2025-07-18 19:43:23,837 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000002212B00F7C0>)
2025-07-18 19:43:23,838 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000002212B00F7C0>) completed
2025-07-18 19:43:23,839 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002212B00F7C0>)
2025-07-18 19:43:23,839 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002212B00F7C0>) completed
2025-07-18 19:43:23,840 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B0D8400>)
2025-07-18 19:43:23,841 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B0D8400>) completed
2025-07-18 19:43:23,843 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002212AFDC400>
2025-07-18 19:43:23,844 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002212AFDC400> completed
2025-07-18 19:43:23,845 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8400>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,))
2025-07-18 19:43:23,846 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8400>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,)) completed
2025-07-18 19:43:23,847 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8400>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,))
2025-07-18 19:43:23,847 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8400>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,)) completed
2025-07-18 19:43:23,848 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000002212B00F640>)
2025-07-18 19:43:23,849 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000002212B00F640>) completed
2025-07-18 19:43:23,850 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002212B00F640>)
2025-07-18 19:43:23,851 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002212B00F640>) completed
2025-07-18 19:43:23,852 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B0D8400>)
2025-07-18 19:43:23,852 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B0D8400>) completed
2025-07-18 19:43:23,853 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002212AFDF4C0>
2025-07-18 19:43:23,854 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002212AFDF4C0> completed
2025-07-18 19:43:23,856 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8400>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,))
2025-07-18 19:43:23,857 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8400>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,)) completed
2025-07-18 19:43:23,859 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8400>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (88, 5315054003))
2025-07-18 19:43:23,864 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D8400>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (88, 5315054003)) completed
2025-07-18 19:43:23,865 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212B0D8400>)
2025-07-18 19:43:23,923 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212B0D8400>) completed
2025-07-18 19:43:23,924 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B0D8400>)
2025-07-18 19:43:23,925 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B0D8400>) completed
2025-07-18 19:43:24,194 - INFO - core.group.RP.rmain - RP Action 'обнять' performed by 5315054003. Sender HP: 88.
2025-07-18 19:43:24,195 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'обнять' успешно выполнен. Завершение обработки сообщения.
2025-07-18 19:43:24,195 - INFO - aiogram.event - Update id=836455746 is handled. Duration 375 ms by bot id=6543660809
2025-07-18 19:43:36,045 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Логика сломалась 😭' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 19:43:36,046 - DEBUG - censor_module - censor_message_handler: Вызов censor_text_func для текста: 'Логика сломалась 😭'
2025-07-18 19:43:36,046 - DEBUG - censor_module - censor_module.censor_text_func: Начата обработка текста: 'Логика сломалась 😭' с корнями: ['пизд', 'хуй', 'елда', 'член', 'хуе', 'долба', 'пен', 'еб', 'ёб', 'бл', 'сперм', 'шлю', 'соса', 'пизд', 'хуй', 'елда', 'член', 'овощ', 'окак', 'короче', 'пизда', 'уёбище', 'бдсм', 'фетиш', 'фашист', 'адольф', 'гитлер', 'стинтлер', 'шлюх', 'раф', 'кун', 'даня', 'челобрек', 'мама', 'мать', 'секс', 'папа', 'батя', 'отец', 'минет', 'бля', 'кунилингус', 'трах']
2025-07-18 19:43:36,047 - DEBUG - censor_module - censor_module.censor_text_func: Сформировано объединенное регулярное выражение: '\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*х+\W*у+\W*е+\w*)\b|\b(?:\w*д+\W*о+\W*л+\W*б+\W*а+\w*)\b|\b(?:\w*п+\W*е+\W*н+\w*)\b|\b(?:\w*е+\W*б+\w*)\b|\b(?:\w*ё+\W*б+\w*)\b|\b(?:\w*б+\W*л+\w*)\b|\b(?:\w*с+\W*п+\W*е+\W*р+\W*м+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\w*)\b|\b(?:\w*с+\W*о+\W*с+\W*а+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*о+\W*в+\W*о+\W*щ+\w*)\b|\b(?:\w*о+\W*к+\W*а+\W*к+\w*)\b|\b(?:\w*к+\W*о+\W*р+\W*о+\W*ч+\W*е+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\W*а+\w*)\b|\b(?:\w*у+\W*ё+\W*б+\W*и+\W*щ+\W*е+\w*)\b|\b(?:\w*б+\W*д+\W*с+\W*м+\w*)\b|\b(?:\w*ф+\W*е+\W*т+\W*и+\W*ш+\w*)\b|\b(?:\w*ф+\W*а+\W*ш+\W*и+\W*с+\W*т+\w*)\b|\b(?:\w*а+\W*д+\W*о+\W*л+\W*ь+\W*ф+\w*)\b|\b(?:\w*г+\W*и+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*с+\W*т+\W*и+\W*н+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\W*х+\w*)\b|\b(?:\w*р+\W*а+\W*ф+\w*)\b|\b(?:\w*к+\W*у+\W*н+\w*)\b|\b(?:\w*д+\W*а+\W*н+\W*я+\w*)\b|\b(?:\w*ч+\W*е+\W*л+\W*о+\W*б+\W*р+\W*е+\W*к+\w*)\b|\b(?:\w*м+\W*а+\W*м+\W*а+\w*)\b|\b(?:\w*м+\W*а+\W*т+\W*ь+\w*)\b|\b(?:\w*с+\W*е+\W*к+\W*с+\w*)\b|\b(?:\w*п+\W*а+\W*п+\W*а+\w*)\b|\b(?:\w*б+\W*а+\W*т+\W*я+\w*)\b|\b(?:\w*о+\W*т+\W*е+\W*ц+\w*)\b|\b(?:\w*м+\W*и+\W*н+\W*е+\W*т+\w*)\b|\b(?:\w*б+\W*л+\W*я+\w*)\b|\b(?:\w*к+\W*у+\W*н+\W*и+\W*л+\W*и+\W*н+\W*г+\W*у+\W*с+\w*)\b|\b(?:\w*т+\W*р+\W*а+\W*х+\w*)\b'
2025-07-18 19:43:36,050 - DEBUG - censor_module - censor_module.censor_text_func: Конечный цензурированный текст: 'Логика сломалась 😭', Было ли цензурировано: False
2025-07-18 19:43:36,050 - DEBUG - censor_module - censor_message_handler: Результат censor_text_func: was_censored=False
2025-07-18 19:43:36,050 - DEBUG - censor_module - censor_message_handler: ЦЕНЗУРА НЕ ОБНАРУЖЕНА: Оригинал: 'Логика сломалась 😭'
2025-07-18 19:43:36,051 - DEBUG - censor_module - censor_message_handler: Сообщение от пользователя 5315054003 не требует цензуры. Сообщение будет передано для дальнейшей обработки.
2025-07-18 19:43:36,052 - INFO - aiogram.event - Update id=836455747 is handled. Duration 0 ms by bot id=6543660809
2025-07-18 19:48:36,517 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Магазин' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 19:48:36,521 - DEBUG - censor_module - censor_message_handler: Сообщение 'Магазин' является известной не-слеш командой 'магазин'. Попытка прямого вызова обработчика.
2025-07-18 19:48:36,521 - INFO - core.group.stat.smain - Received 'магазин' command from user 5315054003.
2025-07-18 19:48:36,522 - DEBUG - core.group.stat.smain - Retrieving available backgrounds from shop configuration.
2025-07-18 19:48:36,522 - DEBUG - core.group.stat.smain - Shop items compiled: {'space': {'name': 'Космос', 'url': 'https://images.unsplash.com/photo-1506318137072-291786a88698?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFjZXxlbnwwfHwwfHww&auto=format&fit=crop&w=600&q=80', 'cost': 50}, 'nature': {'name': 'Природа', 'url': 'https://images.unsplash.com/photo-1440330559787-852571c1c71a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8fG5hdHVyZXxlbnwwfHwwfHww&auto=format&fit=crop&w=600&q=80', 'cost': 40}, 'city': {'name': 'Город', 'url': 'https://images.unsplash.com/photo-1519013876546-8858ba07e532?ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8fGNpdHl8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=600&q=80', 'cost': 60}, 'abstract': {'name': 'Абстракция', 'url': 'https://images.unsplash.com/photo-1508768787810-6adc1f09aeda?ixlib=rb-4.0.3&ixid=M3wxMjA3fDdzfHxhYnN0cmFjdHxlbnwwfHwwfHww&auto=format&fit=crop&w=600&q=80', 'cost': 30}}.
2025-07-18 19:48:36,863 - INFO - core.group.stat.smain - Shop list sent to user 5315054003.
2025-07-18 19:48:36,864 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'магазин' успешно выполнен. Завершение обработки сообщения.
2025-07-18 19:48:36,864 - INFO - aiogram.event - Update id=836455748 is handled. Duration 342 ms by bot id=6543660809
2025-07-18 19:48:45,684 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Работать' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 19:48:45,685 - DEBUG - censor_module - censor_message_handler: Сообщение 'Работать' является известной не-слеш командой 'работать'. Попытка прямого вызова обработчика.
2025-07-18 19:48:45,685 - INFO - core.group.stat.smain - Received 'работать' command from user 5315054003.
2025-07-18 19:48:45,686 - DEBUG - core.group.stat.smain - Fetching last work time for user 5315054003.
2025-07-18 19:48:45,686 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 19:48:45,687 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 19:48:45,687 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212B00F4C0>, '\n        SELECT last_work_time FROM user_profiles WHERE user_id = ?\n        ', (5315054003,))
2025-07-18 19:48:45,693 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212B00F4C0>, '\n        SELECT last_work_time FROM user_profiles WHERE user_id = ?\n        ', (5315054003,)) completed
2025-07-18 19:48:45,705 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000002212B00F4C0>)
2025-07-18 19:48:45,706 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000002212B00F4C0>) completed
2025-07-18 19:48:45,707 - INFO - core.group.stat.smain - Last work time for user 5315054003: 1752429803.8620307.
2025-07-18 19:48:45,708 - DEBUG - core.group.stat.smain - Updating Lumcoins for user 5315054003 by amount 14.
2025-07-18 19:48:45,712 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 19:48:45,713 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 19:48:45,714 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212B00E940>, '\n        UPDATE user_profiles\n        SET lumcoins = lumcoins + ?\n        WHERE user_id = ?\n        ', (14, 5315054003))
2025-07-18 19:48:45,715 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212B00E940>, '\n        UPDATE user_profiles\n        SET lumcoins = lumcoins + ?\n        WHERE user_id = ?\n        ', (14, 5315054003)) completed
2025-07-18 19:48:45,717 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 19:48:45,732 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 19:48:45,733 - INFO - core.group.stat.smain - Lumcoins updated for user 5315054003. Change: 14.
2025-07-18 19:48:45,733 - DEBUG - core.group.stat.smain - Updating last work time for user 5315054003 to 1752857325.6862803.
2025-07-18 19:48:45,733 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 19:48:45,734 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 19:48:45,734 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212B00EF40>, '\n        UPDATE user_profiles\n        SET last_work_time = ?\n        WHERE user_id = ?\n        ', (1752857325.6862803, 5315054003))
2025-07-18 19:48:45,736 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212B00EF40>, '\n        UPDATE user_profiles\n        SET last_work_time = ?\n        WHERE user_id = ?\n        ', (1752857325.6862803, 5315054003)) completed
2025-07-18 19:48:45,738 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 19:48:45,753 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 19:48:45,754 - INFO - core.group.stat.smain - Last work time updated for user 5315054003 to 1752857325.6862803.
2025-07-18 19:48:45,755 - INFO - core.group.stat.smain - User 5315054003 successfully worked, earned 14 Lumcoins. Task: 'готовил(а) обед'.
2025-07-18 19:48:45,965 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'работать' успешно выполнен. Завершение обработки сообщения.
2025-07-18 19:48:45,966 - INFO - aiogram.event - Update id=836455749 is handled. Duration 297 ms by bot id=6543660809
2025-07-18 19:48:49,274 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Профиль' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 19:48:49,274 - DEBUG - censor_module - censor_message_handler: Сообщение 'Профиль' является известной не-слеш командой 'профиль'. Попытка прямого вызова обработчика.
2025-07-18 19:48:49,275 - INFO - core.group.stat.smain - DEBUG: show_profile handler entered for user 5315054003 with text 'Профиль'.
2025-07-18 19:48:49,276 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002212AFDE8E0>
2025-07-18 19:48:49,277 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002212AFDE8E0> completed
2025-07-18 19:48:49,278 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D85E0>, '\n            INSERT INTO users (user_id, username, first_name, last_active_ts)\n            VALUES (?, ?, ?, ?)\n            ON CONFLICT(user_id) DO UPDATE SET\n                username = excluded.username,\n                first_name = excluded.first_name,\n                last_active_ts = excluded.last_active_ts\n        ', (5315054003, 'Cel0brek', '彼岸花', 1752857329.275107))
2025-07-18 19:48:49,280 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D85E0>, '\n            INSERT INTO users (user_id, username, first_name, last_active_ts)\n            VALUES (?, ?, ?, ?)\n            ON CONFLICT(user_id) DO UPDATE SET\n                username = excluded.username,\n                first_name = excluded.first_name,\n                last_active_ts = excluded.last_active_ts\n        ', (5315054003, 'Cel0brek', '彼岸花', 1752857329.275107)) completed
2025-07-18 19:48:49,281 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D85E0>, "\n            INSERT OR IGNORE INTO user_modes (user_id, mode, rating_opportunities_count)\n            VALUES (?, 'saharoza', 0)\n        ", (5315054003,))
2025-07-18 19:48:49,282 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D85E0>, "\n            INSERT OR IGNORE INTO user_modes (user_id, mode, rating_opportunities_count)\n            VALUES (?, 'saharoza', 0)\n        ", (5315054003,)) completed
2025-07-18 19:48:49,283 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D85E0>, '\n            INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)\n        ', (5315054003,))
2025-07-18 19:48:49,283 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D85E0>, '\n            INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)\n        ', (5315054003,)) completed
2025-07-18 19:48:49,284 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212B0D85E0>)
2025-07-18 19:48:49,298 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212B0D85E0>) completed
2025-07-18 19:48:49,299 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B0D85E0>)
2025-07-18 19:48:49,299 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B0D85E0>) completed
2025-07-18 19:48:49,300 - DEBUG - core.group.stat.smain - Fetching or creating profile for user_id: 5315054003
2025-07-18 19:48:49,300 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 19:48:49,301 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 19:48:49,301 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212988B7C0>, '\n            INSERT INTO users (user_id, username, first_name, last_name)\n            VALUES (?, ?, ?, ?)\n            ON CONFLICT(user_id) DO UPDATE SET\n                username = excluded.username,\n                first_name = excluded.first_name,\n                last_name = excluded.last_name\n        ', (5315054003, 'Cel0brek', '彼岸花', None))
2025-07-18 19:48:49,302 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212988B7C0>, '\n            INSERT INTO users (user_id, username, first_name, last_name)\n            VALUES (?, ?, ?, ?)\n            ON CONFLICT(user_id) DO UPDATE SET\n                username = excluded.username,\n                first_name = excluded.first_name,\n                last_name = excluded.last_name\n        ', (5315054003, 'Cel0brek', '彼岸花', None)) completed
2025-07-18 19:48:49,304 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 19:48:49,304 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 19:48:49,304 - DEBUG - core.group.stat.smain - User 5315054003 information updated/inserted in 'profiles.db users' table.
2025-07-18 19:48:49,305 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212988B7C0>, '\n        INSERT OR IGNORE INTO user_profiles (user_id)\n        VALUES (?)\n        ', (5315054003,))
2025-07-18 19:48:49,307 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212988B7C0>, '\n        INSERT OR IGNORE INTO user_profiles (user_id)\n        VALUES (?)\n        ', (5315054003,)) completed
2025-07-18 19:48:49,310 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 19:48:49,396 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 19:48:49,396 - DEBUG - core.group.stat.smain - User profile for 5315054003 ensured existence in 'profiles.db user_profiles' table.
2025-07-18 19:48:49,397 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212988B7C0>, '\n        SELECT * FROM user_profiles WHERE user_id = ?\n        ', (5315054003,))
2025-07-18 19:48:49,398 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212988B7C0>, '\n        SELECT * FROM user_profiles WHERE user_id = ?\n        ', (5315054003,)) completed
2025-07-18 19:48:49,399 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000002212988B7C0>)
2025-07-18 19:48:49,399 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000002212988B7C0>) completed
2025-07-18 19:48:49,400 - DEBUG - core.group.stat.smain - Profile data retrieved for user_id 5315054003 from profiles.db.
2025-07-18 19:48:49,400 - DEBUG - core.group.stat.smain - Display name set to: @Cel0brek for user 5315054003.
2025-07-18 19:48:49,401 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002212AFDF240>
2025-07-18 19:48:49,404 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002212AFDF240> completed
2025-07-18 19:48:49,404 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D84F0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,))
2025-07-18 19:48:49,405 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D84F0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,)) completed
2025-07-18 19:48:49,406 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D84F0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,))
2025-07-18 19:48:49,407 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B0D84F0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,)) completed
2025-07-18 19:48:49,408 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000002212988BCC0>)
2025-07-18 19:48:49,409 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000002212988BCC0>) completed
2025-07-18 19:48:49,409 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002212988BCC0>)
2025-07-18 19:48:49,410 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002212988BCC0>) completed
2025-07-18 19:48:49,410 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B0D84F0>)
2025-07-18 19:48:49,411 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B0D84F0>) completed
2025-07-18 19:48:49,412 - DEBUG - core.group.stat.smain - HP fetched from database.py: 88 for user 5315054003.
2025-07-18 19:48:49,412 - INFO - core.group.stat.smain - Successfully retrieved/created profile for user 5315054003.
2025-07-18 19:48:49,412 - DEBUG - core.group.stat.smain - Generating profile image for user 5315054003.
2025-07-18 19:48:49,413 - INFO - core.group.stat.smain - Starting profile image generation for user 5315054003.
2025-07-18 19:48:49,421 - INFO - core.group.stat.smain - Font 'Hlobus.ttf' loaded successfully and cached.
2025-07-18 19:48:49,422 - DEBUG - core.group.stat.smain - Fonts retrieved from cache.
2025-07-18 19:48:49,423 - DEBUG - core.group.stat.smain - Base image and draw object created for the card.
2025-07-18 19:48:49,423 - DEBUG - core.group.stat.smain - Card shadow drawn.
2025-07-18 19:48:49,424 - DEBUG - core.group.stat.smain - Background Loading: Step 1 - Attempting to load background from local path: background/defolt.jpg.
2025-07-18 19:48:49,508 - DEBUG - core.group.stat.smain - Background Loading: Step 2 - Local background image opened with PIL and converted to RGBA.
2025-07-18 19:48:49,514 - DEBUG - core.group.stat.smain - Background Loading: Step 3 - Background image resized to 672x280.
2025-07-18 19:48:49,516 - DEBUG - core.group.stat.smain - Background Loading: Step 4 - Background image cropped to fit card dimensions.
2025-07-18 19:48:49,517 - INFO - core.group.stat.smain - Background Loading: Step 5 - Rounded corner mask applied to background image.
2025-07-18 19:48:49,519 - DEBUG - core.group.stat.smain - Background image pasted onto base card.
2025-07-18 19:48:49,519 - DEBUG - core.group.stat.smain - Avatar Collection: Step 1 - Attempting to get profile photos for user ID: 5315054003 from Telegram.
2025-07-18 19:48:49,571 - INFO - core.group.stat.smain - Avatar Collection: Step 2.1 - No profile photos found for user 5315054003. Initiating fallback to default placeholder.
2025-07-18 19:48:49,571 - WARNING - core.group.stat.smain - Avatar Collection: Primary avatar retrieval failed for user 5315054003: No profile photos. Attempting to load default placeholder from URL.
Traceback (most recent call last):
  File "C:\Users\Student2-4\MRS_bot-3\core\group\stat\manager.py", line 375, in generate_profile_image
    raise ValueError("No profile photos")
ValueError: No profile photos
2025-07-18 19:48:49,573 - DEBUG - core.group.stat.smain - Avatar Collection: Fallback Step 1 - Attempting to download default avatar from URL: https://placehold.co/120x120/CCCCCC/FFFFFF/png?text=AV.
2025-07-18 19:48:51,492 - DEBUG - core.group.stat.smain - Avatar Collection: Fallback Step 2 - Default avatar downloaded. Opening with PIL and converting to RGBA.
2025-07-18 19:48:51,493 - DEBUG - PIL.PngImagePlugin - STREAM b'IHDR' 16 13
2025-07-18 19:48:51,494 - DEBUG - PIL.PngImagePlugin - STREAM b'pHYs' 41 9
2025-07-18 19:48:51,494 - DEBUG - PIL.PngImagePlugin - STREAM b'IDAT' 62 1369
2025-07-18 19:48:51,495 - DEBUG - core.group.stat.smain - Avatar Collection: Fallback Step 3 - Resizing default avatar to 120x120.
2025-07-18 19:48:51,495 - DEBUG - core.group.stat.smain - Avatar Collection: Fallback Step 4 - Creating circular mask for the default avatar.
2025-07-18 19:48:51,495 - DEBUG - core.group.stat.smain - Avatar Collection: Fallback Step 5 - Applying mask to default avatar to make it circular.
2025-07-18 19:48:51,496 - INFO - core.group.stat.smain - Avatar Collection: Default avatar placeholder loaded successfully from URL.
2025-07-18 19:48:51,497 - DEBUG - core.group.stat.smain - Avatar Collection: Pasting the determined avatar image onto the base card image.
2025-07-18 19:48:51,497 - DEBUG - core.group.stat.smain - Avatar pasted onto base image.
2025-07-18 19:48:51,498 - DEBUG - core.group.stat.smain - Coin icon drawn on avatar.
2025-07-18 19:48:51,498 - DEBUG - core.group.stat.smain - Profile data for image: Display Name: @Cel0brek, Level: 1, EXP: 11, Lumcoins: 117, HP: 88.
2025-07-18 19:48:51,500 - DEBUG - core.group.stat.smain - Text '@Cel0brek' drawn with shadow at (165, 84).
2025-07-18 19:48:51,501 - DEBUG - core.group.stat.smain - Left-central text block (username) drawn.
2025-07-18 19:48:51,501 - DEBUG - core.group.stat.smain - Calculating required EXP for level 1.
2025-07-18 19:48:51,501 - DEBUG - core.group.stat.smain - Required EXP for level 1: 105.
2025-07-18 19:48:51,503 - DEBUG - core.group.stat.smain - Text 'Experience' drawn with shadow at (30, 205).
2025-07-18 19:48:51,503 - DEBUG - core.group.stat.smain - Experience label drawn.
2025-07-18 19:48:51,505 - DEBUG - core.group.stat.smain - EXP Bar: current_exp_percentage=0.10476190476190476, fill_width=59.
2025-07-18 19:48:51,506 - DEBUG - core.group.stat.smain - EXP bar background drawn.
2025-07-18 19:48:51,507 - DEBUG - core.group.stat.smain - EXP bar filled with green gradient with transparency.
2025-07-18 19:48:51,509 - DEBUG - core.group.stat.smain - Text '11/105' drawn with shadow at (615, 231).
2025-07-18 19:48:51,511 - DEBUG - core.group.stat.smain - Experience progress text '11/105' drawn.
2025-07-18 19:48:51,512 - DEBUG - core.group.stat.smain - Text 'HP' drawn with shadow at (651, 50).
2025-07-18 19:48:51,513 - DEBUG - core.group.stat.smain - Text '❤️ 88' drawn with shadow at (615, 75).
2025-07-18 19:48:51,513 - DEBUG - core.group.stat.smain - Right column HP text drawn.
2025-07-18 19:48:51,515 - DEBUG - core.group.stat.smain - Text 'LumCoins' drawn with shadow at (589, 120).
2025-07-18 19:48:51,516 - DEBUG - core.group.stat.smain - Text '₽ 117' drawn with shadow at (614, 145).
2025-07-18 19:48:51,517 - DEBUG - core.group.stat.smain - Right column Lumcoins text drawn.
2025-07-18 19:48:51,547 - INFO - core.group.stat.smain - Profile image generation completed for user 5315054003.
2025-07-18 19:48:51,548 - INFO - core.group.stat.smain - Sending profile image to user 5315054003.
2025-07-18 19:48:52,396 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'профиль' успешно выполнен. Завершение обработки сообщения.
2025-07-18 19:48:52,397 - INFO - aiogram.event - Update id=836455750 is handled. Duration 3139 ms by bot id=6543660809
2025-07-18 19:49:00,982 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Работать' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 19:49:00,983 - DEBUG - censor_module - censor_message_handler: Сообщение 'Работать' является известной не-слеш командой 'работать'. Попытка прямого вызова обработчика.
2025-07-18 19:49:00,984 - INFO - core.group.stat.smain - Received 'работать' command from user 5157172276.
2025-07-18 19:49:00,984 - DEBUG - core.group.stat.smain - Fetching last work time for user 5157172276.
2025-07-18 19:49:00,985 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 19:49:00,985 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 19:49:00,986 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212988B7C0>, '\n        SELECT last_work_time FROM user_profiles WHERE user_id = ?\n        ', (5157172276,))
2025-07-18 19:49:00,987 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212988B7C0>, '\n        SELECT last_work_time FROM user_profiles WHERE user_id = ?\n        ', (5157172276,)) completed
2025-07-18 19:49:00,987 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000002212988B7C0>)
2025-07-18 19:49:00,988 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000002212988B7C0>) completed
2025-07-18 19:49:00,988 - INFO - core.group.stat.smain - Last work time for user 5157172276: 1752422565.3672302.
2025-07-18 19:49:00,989 - DEBUG - core.group.stat.smain - Updating Lumcoins for user 5157172276 by amount 13.
2025-07-18 19:49:00,989 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 19:49:00,990 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 19:49:00,991 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212988B7C0>, '\n        UPDATE user_profiles\n        SET lumcoins = lumcoins + ?\n        WHERE user_id = ?\n        ', (13, 5157172276))
2025-07-18 19:49:00,992 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212988B7C0>, '\n        UPDATE user_profiles\n        SET lumcoins = lumcoins + ?\n        WHERE user_id = ?\n        ', (13, 5157172276)) completed
2025-07-18 19:49:00,994 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 19:49:01,019 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 19:49:01,020 - INFO - core.group.stat.smain - Lumcoins updated for user 5157172276. Change: 13.
2025-07-18 19:49:01,020 - DEBUG - core.group.stat.smain - Updating last work time for user 5157172276 to 1752857340.9840972.
2025-07-18 19:49:01,021 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 19:49:01,021 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 19:49:01,022 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212988B7C0>, '\n        UPDATE user_profiles\n        SET last_work_time = ?\n        WHERE user_id = ?\n        ', (1752857340.9840972, 5157172276))
2025-07-18 19:49:01,024 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212988B7C0>, '\n        UPDATE user_profiles\n        SET last_work_time = ?\n        WHERE user_id = ?\n        ', (1752857340.9840972, 5157172276)) completed
2025-07-18 19:49:01,026 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 19:49:01,039 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 19:49:01,041 - INFO - core.group.stat.smain - Last work time updated for user 5157172276 to 1752857340.9840972.
2025-07-18 19:49:01,043 - INFO - core.group.stat.smain - User 5157172276 successfully worked, earned 13 Lumcoins. Task: 'собирал(а) ягоды'.
2025-07-18 19:49:01,440 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'работать' успешно выполнен. Завершение обработки сообщения.
2025-07-18 19:49:01,441 - INFO - aiogram.event - Update id=836455751 is handled. Duration 452 ms by bot id=6543660809
2025-07-18 19:49:06,336 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Профиль' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 19:49:06,336 - DEBUG - censor_module - censor_message_handler: Сообщение 'Профиль' является известной не-слеш командой 'профиль'. Попытка прямого вызова обработчика.
2025-07-18 19:49:06,337 - INFO - core.group.stat.smain - DEBUG: show_profile handler entered for user 5157172276 with text 'Профиль'.
2025-07-18 19:49:06,338 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002212B200900>
2025-07-18 19:49:06,339 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002212B200900> completed
2025-07-18 19:49:06,340 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B1D1030>, '\n            INSERT INTO users (user_id, username, first_name, last_active_ts)\n            VALUES (?, ?, ?, ?)\n            ON CONFLICT(user_id) DO UPDATE SET\n                username = excluded.username,\n                first_name = excluded.first_name,\n                last_active_ts = excluded.last_active_ts\n        ', (5157172276, 'kavitosik', ':]', 1752857346.337651))
2025-07-18 19:49:06,345 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B1D1030>, '\n            INSERT INTO users (user_id, username, first_name, last_active_ts)\n            VALUES (?, ?, ?, ?)\n            ON CONFLICT(user_id) DO UPDATE SET\n                username = excluded.username,\n                first_name = excluded.first_name,\n                last_active_ts = excluded.last_active_ts\n        ', (5157172276, 'kavitosik', ':]', 1752857346.337651)) completed
2025-07-18 19:49:06,346 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B1D1030>, "\n            INSERT OR IGNORE INTO user_modes (user_id, mode, rating_opportunities_count)\n            VALUES (?, 'saharoza', 0)\n        ", (5157172276,))
2025-07-18 19:49:06,348 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B1D1030>, "\n            INSERT OR IGNORE INTO user_modes (user_id, mode, rating_opportunities_count)\n            VALUES (?, 'saharoza', 0)\n        ", (5157172276,)) completed
2025-07-18 19:49:06,349 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B1D1030>, '\n            INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)\n        ', (5157172276,))
2025-07-18 19:49:06,350 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B1D1030>, '\n            INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)\n        ', (5157172276,)) completed
2025-07-18 19:49:06,351 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212B1D1030>)
2025-07-18 19:49:06,370 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212B1D1030>) completed
2025-07-18 19:49:06,371 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B1D1030>)
2025-07-18 19:49:06,372 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B1D1030>) completed
2025-07-18 19:49:06,372 - DEBUG - core.group.stat.smain - Fetching or creating profile for user_id: 5157172276
2025-07-18 19:49:06,373 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 19:49:06,374 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 19:49:06,375 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212B0F84C0>, '\n            INSERT INTO users (user_id, username, first_name, last_name)\n            VALUES (?, ?, ?, ?)\n            ON CONFLICT(user_id) DO UPDATE SET\n                username = excluded.username,\n                first_name = excluded.first_name,\n                last_name = excluded.last_name\n        ', (5157172276, 'kavitosik', ':]', None))
2025-07-18 19:49:06,376 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212B0F84C0>, '\n            INSERT INTO users (user_id, username, first_name, last_name)\n            VALUES (?, ?, ?, ?)\n            ON CONFLICT(user_id) DO UPDATE SET\n                username = excluded.username,\n                first_name = excluded.first_name,\n                last_name = excluded.last_name\n        ', (5157172276, 'kavitosik', ':]', None)) completed
2025-07-18 19:49:06,377 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 19:49:06,377 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 19:49:06,378 - DEBUG - core.group.stat.smain - User 5157172276 information updated/inserted in 'profiles.db users' table.
2025-07-18 19:49:06,378 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212B0F84C0>, '\n        INSERT OR IGNORE INTO user_profiles (user_id)\n        VALUES (?)\n        ', (5157172276,))
2025-07-18 19:49:06,380 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212B0F84C0>, '\n        INSERT OR IGNORE INTO user_profiles (user_id)\n        VALUES (?)\n        ', (5157172276,)) completed
2025-07-18 19:49:06,382 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 19:49:06,454 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 19:49:06,454 - DEBUG - core.group.stat.smain - User profile for 5157172276 ensured existence in 'profiles.db user_profiles' table.
2025-07-18 19:49:06,455 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212B0F84C0>, '\n        SELECT * FROM user_profiles WHERE user_id = ?\n        ', (5157172276,))
2025-07-18 19:49:06,456 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002212B0F84C0>, '\n        SELECT * FROM user_profiles WHERE user_id = ?\n        ', (5157172276,)) completed
2025-07-18 19:49:06,457 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000002212B0F84C0>)
2025-07-18 19:49:06,457 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000002212B0F84C0>) completed
2025-07-18 19:49:06,458 - DEBUG - core.group.stat.smain - Profile data retrieved for user_id 5157172276 from profiles.db.
2025-07-18 19:49:06,458 - DEBUG - core.group.stat.smain - Display name set to: @kavitosik for user 5157172276.
2025-07-18 19:49:06,460 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002212B2007C0>
2025-07-18 19:49:06,462 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002212B2007C0> completed
2025-07-18 19:49:06,462 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B1D15D0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 19:49:06,463 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B1D15D0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 19:49:06,464 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B1D15D0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 19:49:06,465 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B1D15D0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 19:49:06,466 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000002212B0FB340>)
2025-07-18 19:49:06,466 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000002212B0FB340>) completed
2025-07-18 19:49:06,467 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002212B0FB340>)
2025-07-18 19:49:06,468 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002212B0FB340>) completed
2025-07-18 19:49:06,468 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B1D15D0>)
2025-07-18 19:49:06,469 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B1D15D0>) completed
2025-07-18 19:49:06,470 - DEBUG - core.group.stat.smain - HP fetched from database.py: 70 for user 5157172276.
2025-07-18 19:49:06,471 - INFO - core.group.stat.smain - Successfully retrieved/created profile for user 5157172276.
2025-07-18 19:49:06,471 - DEBUG - core.group.stat.smain - Generating profile image for user 5157172276.
2025-07-18 19:49:06,471 - INFO - core.group.stat.smain - Starting profile image generation for user 5157172276.
2025-07-18 19:49:06,472 - DEBUG - core.group.stat.smain - Fonts retrieved from cache.
2025-07-18 19:49:06,472 - DEBUG - core.group.stat.smain - Base image and draw object created for the card.
2025-07-18 19:49:06,473 - DEBUG - core.group.stat.smain - Card shadow drawn.
2025-07-18 19:49:06,473 - DEBUG - core.group.stat.smain - Background Loading: Step 1 - Attempting to load background from local path: background/defolt.jpg.
2025-07-18 19:49:06,474 - DEBUG - core.group.stat.smain - Background Loading: Step 2 - Local background image opened with PIL and converted to RGBA.
2025-07-18 19:49:06,480 - DEBUG - core.group.stat.smain - Background Loading: Step 3 - Background image resized to 672x280.
2025-07-18 19:49:06,481 - DEBUG - core.group.stat.smain - Background Loading: Step 4 - Background image cropped to fit card dimensions.
2025-07-18 19:49:06,482 - INFO - core.group.stat.smain - Background Loading: Step 5 - Rounded corner mask applied to background image.
2025-07-18 19:49:06,483 - DEBUG - core.group.stat.smain - Background image pasted onto base card.
2025-07-18 19:49:06,484 - DEBUG - core.group.stat.smain - Avatar Collection: Step 1 - Attempting to get profile photos for user ID: 5157172276 from Telegram.
2025-07-18 19:49:06,532 - DEBUG - core.group.stat.smain - Avatar Collection: Step 2 - Profile photos found. Number of photos: 3. Selecting the largest one.
2025-07-18 19:49:06,532 - DEBUG - core.group.stat.smain - Avatar Collection: Step 3 - File ID of the largest photo: AgACAgIAAxUAAWhxW9bFi3dIVoVpylj6wFMLLEZWAAIc9DEb6E7QSri1MJrUW5VUAQADAgADYwADNgQ.
2025-07-18 19:49:06,583 - DEBUG - core.group.stat.smain - Avatar Collection: Step 4 - File path received from Telegram: photos/file_39.jpg.
2025-07-18 19:49:06,584 - DEBUG - core.group.stat.smain - Avatar Collection: Step 5 - Downloading file from path: photos/file_39.jpg.
2025-07-18 19:49:06,819 - DEBUG - core.group.stat.smain - Avatar Collection: Step 6 - Image downloaded. Opening with PIL and converting to RGBA.
2025-07-18 19:49:06,826 - DEBUG - core.group.stat.smain - Avatar Collection: Step 7 - Resizing avatar to 120x120.
2025-07-18 19:49:06,835 - DEBUG - core.group.stat.smain - Avatar Collection: Step 8 - Creating circular mask for the avatar.
2025-07-18 19:49:06,835 - DEBUG - core.group.stat.smain - Avatar Collection: Step 9 - Applying mask to make avatar circular.
2025-07-18 19:49:06,836 - INFO - core.group.stat.smain - Avatar Collection: Successfully loaded and processed user avatar for user 5157172276.
2025-07-18 19:49:06,836 - DEBUG - core.group.stat.smain - Avatar Collection: Pasting the determined avatar image onto the base card image.
2025-07-18 19:49:06,837 - DEBUG - core.group.stat.smain - Avatar pasted onto base image.
2025-07-18 19:49:06,837 - DEBUG - core.group.stat.smain - Coin icon drawn on avatar.
2025-07-18 19:49:06,838 - DEBUG - core.group.stat.smain - Profile data for image: Display Name: @kavitosik, Level: 1, EXP: 32, Lumcoins: 115, HP: 70.
2025-07-18 19:49:06,840 - DEBUG - core.group.stat.smain - Text '@kavitosik' drawn with shadow at (165, 84).
2025-07-18 19:49:06,840 - DEBUG - core.group.stat.smain - Left-central text block (username) drawn.
2025-07-18 19:49:06,842 - DEBUG - core.group.stat.smain - Calculating required EXP for level 1.
2025-07-18 19:49:06,843 - DEBUG - core.group.stat.smain - Required EXP for level 1: 105.
2025-07-18 19:49:06,844 - DEBUG - core.group.stat.smain - Text 'Experience' drawn with shadow at (30, 205).
2025-07-18 19:49:06,845 - DEBUG - core.group.stat.smain - Experience label drawn.
2025-07-18 19:49:06,845 - DEBUG - core.group.stat.smain - EXP Bar: current_exp_percentage=0.3047619047619048, fill_width=173.
2025-07-18 19:49:06,845 - DEBUG - core.group.stat.smain - EXP bar background drawn.
2025-07-18 19:49:06,846 - DEBUG - core.group.stat.smain - EXP bar filled with green gradient with transparency.
2025-07-18 19:49:06,847 - DEBUG - core.group.stat.smain - Text '32/105' drawn with shadow at (615, 231).
2025-07-18 19:49:06,848 - DEBUG - core.group.stat.smain - Experience progress text '32/105' drawn.
2025-07-18 19:49:06,848 - DEBUG - core.group.stat.smain - Text 'HP' drawn with shadow at (651, 50).
2025-07-18 19:49:06,849 - DEBUG - core.group.stat.smain - Text '❤️ 70' drawn with shadow at (603, 75).
2025-07-18 19:49:06,850 - DEBUG - core.group.stat.smain - Right column HP text drawn.
2025-07-18 19:49:06,851 - DEBUG - core.group.stat.smain - Text 'LumCoins' drawn with shadow at (589, 120).
2025-07-18 19:49:06,852 - DEBUG - core.group.stat.smain - Text '₽ 115' drawn with shadow at (621, 145).
2025-07-18 19:49:06,852 - DEBUG - core.group.stat.smain - Right column Lumcoins text drawn.
2025-07-18 19:49:06,884 - INFO - core.group.stat.smain - Profile image generation completed for user 5157172276.
2025-07-18 19:49:06,884 - INFO - core.group.stat.smain - Sending profile image to user 5157172276.
2025-07-18 19:49:07,564 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'профиль' успешно выполнен. Завершение обработки сообщения.
2025-07-18 19:49:07,565 - INFO - aiogram.event - Update id=836455752 is handled. Duration 1217 ms by bot id=6543660809
2025-07-18 19:49:10,449 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Space' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 19:49:10,449 - DEBUG - censor_module - censor_message_handler: Вызов censor_text_func для текста: 'Space'
2025-07-18 19:49:10,450 - DEBUG - censor_module - censor_module.censor_text_func: Начата обработка текста: 'Space' с корнями: ['пизд', 'хуй', 'елда', 'член', 'хуе', 'долба', 'пен', 'еб', 'ёб', 'бл', 'сперм', 'шлю', 'соса', 'пизд', 'хуй', 'елда', 'член', 'овощ', 'окак', 'короче', 'пизда', 'уёбище', 'бдсм', 'фетиш', 'фашист', 'адольф', 'гитлер', 'стинтлер', 'шлюх', 'раф', 'кун', 'даня', 'челобрек', 'мама', 'мать', 'секс', 'папа', 'батя', 'отец', 'минет', 'бля', 'кунилингус', 'трах']
2025-07-18 19:49:10,451 - DEBUG - censor_module - censor_module.censor_text_func: Сформировано объединенное регулярное выражение: '\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*х+\W*у+\W*е+\w*)\b|\b(?:\w*д+\W*о+\W*л+\W*б+\W*а+\w*)\b|\b(?:\w*п+\W*е+\W*н+\w*)\b|\b(?:\w*е+\W*б+\w*)\b|\b(?:\w*ё+\W*б+\w*)\b|\b(?:\w*б+\W*л+\w*)\b|\b(?:\w*с+\W*п+\W*е+\W*р+\W*м+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\w*)\b|\b(?:\w*с+\W*о+\W*с+\W*а+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*о+\W*в+\W*о+\W*щ+\w*)\b|\b(?:\w*о+\W*к+\W*а+\W*к+\w*)\b|\b(?:\w*к+\W*о+\W*р+\W*о+\W*ч+\W*е+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\W*а+\w*)\b|\b(?:\w*у+\W*ё+\W*б+\W*и+\W*щ+\W*е+\w*)\b|\b(?:\w*б+\W*д+\W*с+\W*м+\w*)\b|\b(?:\w*ф+\W*е+\W*т+\W*и+\W*ш+\w*)\b|\b(?:\w*ф+\W*а+\W*ш+\W*и+\W*с+\W*т+\w*)\b|\b(?:\w*а+\W*д+\W*о+\W*л+\W*ь+\W*ф+\w*)\b|\b(?:\w*г+\W*и+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*с+\W*т+\W*и+\W*н+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\W*х+\w*)\b|\b(?:\w*р+\W*а+\W*ф+\w*)\b|\b(?:\w*к+\W*у+\W*н+\w*)\b|\b(?:\w*д+\W*а+\W*н+\W*я+\w*)\b|\b(?:\w*ч+\W*е+\W*л+\W*о+\W*б+\W*р+\W*е+\W*к+\w*)\b|\b(?:\w*м+\W*а+\W*м+\W*а+\w*)\b|\b(?:\w*м+\W*а+\W*т+\W*ь+\w*)\b|\b(?:\w*с+\W*е+\W*к+\W*с+\w*)\b|\b(?:\w*п+\W*а+\W*п+\W*а+\w*)\b|\b(?:\w*б+\W*а+\W*т+\W*я+\w*)\b|\b(?:\w*о+\W*т+\W*е+\W*ц+\w*)\b|\b(?:\w*м+\W*и+\W*н+\W*е+\W*т+\w*)\b|\b(?:\w*б+\W*л+\W*я+\w*)\b|\b(?:\w*к+\W*у+\W*н+\W*и+\W*л+\W*и+\W*н+\W*г+\W*у+\W*с+\w*)\b|\b(?:\w*т+\W*р+\W*а+\W*х+\w*)\b'
2025-07-18 19:49:10,452 - DEBUG - censor_module - censor_module.censor_text_func: Конечный цензурированный текст: 'Space', Было ли цензурировано: False
2025-07-18 19:49:10,453 - DEBUG - censor_module - censor_message_handler: Результат censor_text_func: was_censored=False
2025-07-18 19:49:10,453 - DEBUG - censor_module - censor_message_handler: ЦЕНЗУРА НЕ ОБНАРУЖЕНА: Оригинал: 'Space'
2025-07-18 19:49:10,454 - DEBUG - censor_module - censor_message_handler: Сообщение от пользователя 5315054003 не требует цензуры. Сообщение будет передано для дальнейшей обработки.
2025-07-18 19:49:10,454 - INFO - aiogram.event - Update id=836455753 is handled. Duration 0 ms by bot id=6543660809
2025-07-18 19:49:18,062 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Магазин' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 19:49:18,063 - DEBUG - censor_module - censor_message_handler: Сообщение 'Магазин' является известной не-слеш командой 'магазин'. Попытка прямого вызова обработчика.
2025-07-18 19:49:18,064 - INFO - core.group.stat.smain - Received 'магазин' command from user 5315054003.
2025-07-18 19:49:18,064 - DEBUG - core.group.stat.smain - Retrieving available backgrounds from shop configuration.
2025-07-18 19:49:18,064 - DEBUG - core.group.stat.smain - Shop items compiled: {'space': {'name': 'Космос', 'url': 'https://images.unsplash.com/photo-1506318137072-291786a88698?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFjZXxlbnwwfHwwfHww&auto=format&fit=crop&w=600&q=80', 'cost': 50}, 'nature': {'name': 'Природа', 'url': 'https://images.unsplash.com/photo-1440330559787-852571c1c71a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8fG5hdHVyZXxlbnwwfHwwfHww&auto=format&fit=crop&w=600&q=80', 'cost': 40}, 'city': {'name': 'Город', 'url': 'https://images.unsplash.com/photo-1519013876546-8858ba07e532?ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8fGNpdHl8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=600&q=80', 'cost': 60}, 'abstract': {'name': 'Абстракция', 'url': 'https://images.unsplash.com/photo-1508768787810-6adc1f09aeda?ixlib=rb-4.0.3&ixid=M3wxMjA3fDdzfHxhYnN0cmFjdHxlbnwwfHwwfHww&auto=format&fit=crop&w=600&q=80', 'cost': 30}}.
2025-07-18 19:49:18,292 - INFO - core.group.stat.smain - Shop list sent to user 5315054003.
2025-07-18 19:49:18,293 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'магазин' успешно выполнен. Завершение обработки сообщения.
2025-07-18 19:49:18,294 - INFO - aiogram.event - Update id=836455754 is handled. Duration 235 ms by bot id=6543660809
2025-07-18 19:49:21,019 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Cpase' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 19:49:21,020 - DEBUG - censor_module - censor_message_handler: Вызов censor_text_func для текста: 'Cpase'
2025-07-18 19:49:21,020 - DEBUG - censor_module - censor_module.censor_text_func: Начата обработка текста: 'Cpase' с корнями: ['пизд', 'хуй', 'елда', 'член', 'хуе', 'долба', 'пен', 'еб', 'ёб', 'бл', 'сперм', 'шлю', 'соса', 'пизд', 'хуй', 'елда', 'член', 'овощ', 'окак', 'короче', 'пизда', 'уёбище', 'бдсм', 'фетиш', 'фашист', 'адольф', 'гитлер', 'стинтлер', 'шлюх', 'раф', 'кун', 'даня', 'челобрек', 'мама', 'мать', 'секс', 'папа', 'батя', 'отец', 'минет', 'бля', 'кунилингус', 'трах']
2025-07-18 19:49:21,021 - DEBUG - censor_module - censor_module.censor_text_func: Сформировано объединенное регулярное выражение: '\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*х+\W*у+\W*е+\w*)\b|\b(?:\w*д+\W*о+\W*л+\W*б+\W*а+\w*)\b|\b(?:\w*п+\W*е+\W*н+\w*)\b|\b(?:\w*е+\W*б+\w*)\b|\b(?:\w*ё+\W*б+\w*)\b|\b(?:\w*б+\W*л+\w*)\b|\b(?:\w*с+\W*п+\W*е+\W*р+\W*м+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\w*)\b|\b(?:\w*с+\W*о+\W*с+\W*а+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*о+\W*в+\W*о+\W*щ+\w*)\b|\b(?:\w*о+\W*к+\W*а+\W*к+\w*)\b|\b(?:\w*к+\W*о+\W*р+\W*о+\W*ч+\W*е+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\W*а+\w*)\b|\b(?:\w*у+\W*ё+\W*б+\W*и+\W*щ+\W*е+\w*)\b|\b(?:\w*б+\W*д+\W*с+\W*м+\w*)\b|\b(?:\w*ф+\W*е+\W*т+\W*и+\W*ш+\w*)\b|\b(?:\w*ф+\W*а+\W*ш+\W*и+\W*с+\W*т+\w*)\b|\b(?:\w*а+\W*д+\W*о+\W*л+\W*ь+\W*ф+\w*)\b|\b(?:\w*г+\W*и+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*с+\W*т+\W*и+\W*н+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\W*х+\w*)\b|\b(?:\w*р+\W*а+\W*ф+\w*)\b|\b(?:\w*к+\W*у+\W*н+\w*)\b|\b(?:\w*д+\W*а+\W*н+\W*я+\w*)\b|\b(?:\w*ч+\W*е+\W*л+\W*о+\W*б+\W*р+\W*е+\W*к+\w*)\b|\b(?:\w*м+\W*а+\W*м+\W*а+\w*)\b|\b(?:\w*м+\W*а+\W*т+\W*ь+\w*)\b|\b(?:\w*с+\W*е+\W*к+\W*с+\w*)\b|\b(?:\w*п+\W*а+\W*п+\W*а+\w*)\b|\b(?:\w*б+\W*а+\W*т+\W*я+\w*)\b|\b(?:\w*о+\W*т+\W*е+\W*ц+\w*)\b|\b(?:\w*м+\W*и+\W*н+\W*е+\W*т+\w*)\b|\b(?:\w*б+\W*л+\W*я+\w*)\b|\b(?:\w*к+\W*у+\W*н+\W*и+\W*л+\W*и+\W*н+\W*г+\W*у+\W*с+\w*)\b|\b(?:\w*т+\W*р+\W*а+\W*х+\w*)\b'
2025-07-18 19:49:21,023 - DEBUG - censor_module - censor_module.censor_text_func: Конечный цензурированный текст: 'Cpase', Было ли цензурировано: False
2025-07-18 19:49:21,023 - DEBUG - censor_module - censor_message_handler: Результат censor_text_func: was_censored=False
2025-07-18 19:49:21,024 - DEBUG - censor_module - censor_message_handler: ЦЕНЗУРА НЕ ОБНАРУЖЕНА: Оригинал: 'Cpase'
2025-07-18 19:49:21,024 - DEBUG - censor_module - censor_message_handler: Сообщение от пользователя 5315054003 не требует цензуры. Сообщение будет передано для дальнейшей обработки.
2025-07-18 19:49:21,025 - INFO - aiogram.event - Update id=836455755 is handled. Duration 14 ms by bot id=6543660809
2025-07-18 19:49:27,642 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'space' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 19:49:27,642 - DEBUG - censor_module - censor_message_handler: Вызов censor_text_func для текста: 'space'
2025-07-18 19:49:27,643 - DEBUG - censor_module - censor_module.censor_text_func: Начата обработка текста: 'space' с корнями: ['пизд', 'хуй', 'елда', 'член', 'хуе', 'долба', 'пен', 'еб', 'ёб', 'бл', 'сперм', 'шлю', 'соса', 'пизд', 'хуй', 'елда', 'член', 'овощ', 'окак', 'короче', 'пизда', 'уёбище', 'бдсм', 'фетиш', 'фашист', 'адольф', 'гитлер', 'стинтлер', 'шлюх', 'раф', 'кун', 'даня', 'челобрек', 'мама', 'мать', 'секс', 'папа', 'батя', 'отец', 'минет', 'бля', 'кунилингус', 'трах']
2025-07-18 19:49:27,644 - DEBUG - censor_module - censor_module.censor_text_func: Сформировано объединенное регулярное выражение: '\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*х+\W*у+\W*е+\w*)\b|\b(?:\w*д+\W*о+\W*л+\W*б+\W*а+\w*)\b|\b(?:\w*п+\W*е+\W*н+\w*)\b|\b(?:\w*е+\W*б+\w*)\b|\b(?:\w*ё+\W*б+\w*)\b|\b(?:\w*б+\W*л+\w*)\b|\b(?:\w*с+\W*п+\W*е+\W*р+\W*м+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\w*)\b|\b(?:\w*с+\W*о+\W*с+\W*а+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*о+\W*в+\W*о+\W*щ+\w*)\b|\b(?:\w*о+\W*к+\W*а+\W*к+\w*)\b|\b(?:\w*к+\W*о+\W*р+\W*о+\W*ч+\W*е+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\W*а+\w*)\b|\b(?:\w*у+\W*ё+\W*б+\W*и+\W*щ+\W*е+\w*)\b|\b(?:\w*б+\W*д+\W*с+\W*м+\w*)\b|\b(?:\w*ф+\W*е+\W*т+\W*и+\W*ш+\w*)\b|\b(?:\w*ф+\W*а+\W*ш+\W*и+\W*с+\W*т+\w*)\b|\b(?:\w*а+\W*д+\W*о+\W*л+\W*ь+\W*ф+\w*)\b|\b(?:\w*г+\W*и+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*с+\W*т+\W*и+\W*н+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\W*х+\w*)\b|\b(?:\w*р+\W*а+\W*ф+\w*)\b|\b(?:\w*к+\W*у+\W*н+\w*)\b|\b(?:\w*д+\W*а+\W*н+\W*я+\w*)\b|\b(?:\w*ч+\W*е+\W*л+\W*о+\W*б+\W*р+\W*е+\W*к+\w*)\b|\b(?:\w*м+\W*а+\W*м+\W*а+\w*)\b|\b(?:\w*м+\W*а+\W*т+\W*ь+\w*)\b|\b(?:\w*с+\W*е+\W*к+\W*с+\w*)\b|\b(?:\w*п+\W*а+\W*п+\W*а+\w*)\b|\b(?:\w*б+\W*а+\W*т+\W*я+\w*)\b|\b(?:\w*о+\W*т+\W*е+\W*ц+\w*)\b|\b(?:\w*м+\W*и+\W*н+\W*е+\W*т+\w*)\b|\b(?:\w*б+\W*л+\W*я+\w*)\b|\b(?:\w*к+\W*у+\W*н+\W*и+\W*л+\W*и+\W*н+\W*г+\W*у+\W*с+\w*)\b|\b(?:\w*т+\W*р+\W*а+\W*х+\w*)\b'
2025-07-18 19:49:27,647 - DEBUG - censor_module - censor_module.censor_text_func: Конечный цензурированный текст: 'space', Было ли цензурировано: False
2025-07-18 19:49:27,647 - DEBUG - censor_module - censor_message_handler: Результат censor_text_func: was_censored=False
2025-07-18 19:49:27,648 - DEBUG - censor_module - censor_message_handler: ЦЕНЗУРА НЕ ОБНАРУЖЕНА: Оригинал: 'space'
2025-07-18 19:49:27,648 - DEBUG - censor_module - censor_message_handler: Сообщение от пользователя 5315054003 не требует цензуры. Сообщение будет передано для дальнейшей обработки.
2025-07-18 19:49:27,650 - INFO - aiogram.event - Update id=836455756 is handled. Duration 14 ms by bot id=6543660809
2025-07-18 19:52:55,329 - DEBUG - core.group.RP.rmain - Periodic recovery: Checking for users to recover HP.
2025-07-18 19:52:55,330 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x00000221299C7100>
2025-07-18 19:52:55,331 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x00000221299C7100> completed
2025-07-18 19:52:55,332 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0B010>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752857575.3306556))
2025-07-18 19:52:55,333 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212AF0B010>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752857575.3306556)) completed
2025-07-18 19:52:55,334 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002212AF7CF40>)
2025-07-18 19:52:55,335 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002212AF7CF40>) completed
2025-07-18 19:52:55,335 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002212AF7CF40>)
2025-07-18 19:52:55,336 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002212AF7CF40>) completed
2025-07-18 19:52:55,337 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212AF0B010>)
2025-07-18 19:52:55,337 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212AF0B010>) completed
2025-07-18 20:02:55,362 - DEBUG - core.group.RP.rmain - Periodic recovery: Checking for users to recover HP.
2025-07-18 20:02:55,363 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002212AFDEC00>
2025-07-18 20:02:55,364 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002212AFDEC00> completed
2025-07-18 20:02:55,365 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B1D13F0>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752858175.3625257))
2025-07-18 20:02:55,366 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002212B1D13F0>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752858175.3625257)) completed
2025-07-18 20:02:55,367 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002212AF7CF40>)
2025-07-18 20:02:55,367 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002212AF7CF40>) completed
2025-07-18 20:02:55,368 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002212AF7CF40>)
2025-07-18 20:02:55,368 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002212AF7CF40>) completed
2025-07-18 20:02:55,370 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B1D13F0>)
2025-07-18 20:02:55,370 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212B1D13F0>) completed
2025-07-18 20:11:52,192 - INFO - aiogram.dispatcher - Polling stopped
2025-07-18 20:11:52,453 - INFO - core.main.ez_main - main: Остановка бота...
2025-07-18 20:11:52,453 - INFO - core.main.ez_main - main: Фоновые задачи успешно отменены.
2025-07-18 20:11:52,454 - DEBUG - core.group.stat.smain - Attempting to close profiles database connection.
2025-07-18 20:11:52,454 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212AF09D50>)
2025-07-18 20:11:52,455 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002212AF09D50>) completed
2025-07-18 20:11:52,456 - INFO - core.group.stat.smain - Profiles database connection closed successfully.
2025-07-18 20:11:52,456 - INFO - core.main.ez_main - main: Соединение ProfileManager закрыто.
2025-07-18 20:11:52,457 - INFO - core.main.ez_main - main: Сессия бота закрыта. Выход.
2025-07-18 20:11:52,458 - INFO - aiogram.dispatcher - Polling stopped for bot @infernal_madam_bot id=6543660809 - 'Мэрри Шэдоу💔'
2025-07-18 20:11:52,460 - INFO - core.main.ez_main - main: Бот остановлен вручную (KeyboardInterrupt).
2025-07-18 20:12:00,295 - WARNING - core.main.ez_main - CHANNEL_ID is not set or invalid. Jokes task will be disabled.
2025-07-18 20:12:00,891 - DEBUG - asyncio - Using proactor: IocpProactor
2025-07-18 20:12:00,892 - INFO - core.main.ez_main - main: Запуск основной функции бота.
2025-07-18 20:12:00,893 - INFO - core.group.stat.smain - ProfileManager instance initialized.
2025-07-18 20:12:00,893 - DEBUG - core.group.stat.smain - Attempting to connect to profiles database asynchronously.
2025-07-18 20:12:00,894 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002228761E0C0>
2025-07-18 20:12:00,896 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002228761E0C0> completed
2025-07-18 20:12:00,897 - INFO - core.group.stat.smain - Profiles database connected asynchronously.
2025-07-18 20:12:00,897 - DEBUG - core.group.stat.smain - Starting asynchronous profiles database schema initialization.
2025-07-18 20:12:00,897 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000022287579D50>)
2025-07-18 20:12:00,898 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000022287579D50>) completed
2025-07-18 20:12:00,899 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000222875F8240>, '\n        CREATE TABLE IF NOT EXISTS users (\n            user_id INTEGER PRIMARY KEY,\n            username TEXT,\n            first_name TEXT,\n            last_name TEXT,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        )\n        ', [])
2025-07-18 20:12:00,901 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000222875F8240>, '\n        CREATE TABLE IF NOT EXISTS users (\n            user_id INTEGER PRIMARY KEY,\n            username TEXT,\n            first_name TEXT,\n            last_name TEXT,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        )\n        ', []) completed
2025-07-18 20:12:00,902 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000222875F8240>, '\n        CREATE TABLE IF NOT EXISTS user_profiles (\n            profile_id INTEGER PRIMARY KEY AUTOINCREMENT,\n            user_id INTEGER UNIQUE,\n            hp INTEGER DEFAULT 100 CHECK(hp >= 0 AND hp <= 150),\n            level INTEGER DEFAULT 1 CHECK(level >= 1 AND level <= 169),\n            exp INTEGER DEFAULT 0,\n            lumcoins INTEGER DEFAULT 0,\n            daily_messages INTEGER DEFAULT 0,\n            total_messages INTEGER DEFAULT 0,\n            flames INTEGER DEFAULT 0,\n            last_work_time REAL DEFAULT 0,\n            FOREIGN KEY (user_id) REFERENCES users (user_id)\n        )\n        ', [])
2025-07-18 20:12:00,903 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000222875F8240>, '\n        CREATE TABLE IF NOT EXISTS user_profiles (\n            profile_id INTEGER PRIMARY KEY AUTOINCREMENT,\n            user_id INTEGER UNIQUE,\n            hp INTEGER DEFAULT 100 CHECK(hp >= 0 AND hp <= 150),\n            level INTEGER DEFAULT 1 CHECK(level >= 1 AND level <= 169),\n            exp INTEGER DEFAULT 0,\n            lumcoins INTEGER DEFAULT 0,\n            daily_messages INTEGER DEFAULT 0,\n            total_messages INTEGER DEFAULT 0,\n            flames INTEGER DEFAULT 0,\n            last_work_time REAL DEFAULT 0,\n            FOREIGN KEY (user_id) REFERENCES users (user_id)\n        )\n        ', []) completed
2025-07-18 20:12:00,906 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000222875F8240>, 'CREATE INDEX IF NOT EXISTS idx_user_profiles_user_id ON user_profiles(user_id)', [])
2025-07-18 20:12:00,907 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000222875F8240>, 'CREATE INDEX IF NOT EXISTS idx_user_profiles_user_id ON user_profiles(user_id)', []) completed
2025-07-18 20:12:00,908 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000022287579D50>)
2025-07-18 20:12:00,908 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000022287579D50>) completed
2025-07-18 20:12:00,909 - INFO - core.group.stat.smain - Asynchronous profiles database tables checked/created.
2025-07-18 20:12:00,911 - INFO - core.group.stat.smain - Asynchronous profiles database schema check/initialization completed.
2025-07-18 20:12:00,912 - INFO - core.main.ez_main - main: ProfileManager подключен.
2025-07-18 20:12:00,913 - INFO - core.main.ez_main - main: Инициализация основной базы данных.
2025-07-18 20:12:00,915 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002228761C9A0>
2025-07-18 20:12:00,916 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002228761C9A0> completed
2025-07-18 20:12:00,917 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002228757AB60>, '\n            CREATE TABLE IF NOT EXISTS users (\n                user_id INTEGER PRIMARY KEY,\n                username TEXT,\n                first_name TEXT NOT NULL,\n                last_active_ts REAL DEFAULT 0\n            )\n        ', [])
2025-07-18 20:12:00,922 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002228757AB60>, '\n            CREATE TABLE IF NOT EXISTS users (\n                user_id INTEGER PRIMARY KEY,\n                username TEXT,\n                first_name TEXT NOT NULL,\n                last_active_ts REAL DEFAULT 0\n            )\n        ', []) completed
2025-07-18 20:12:00,924 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002228757AB60>, '\n            CREATE TABLE IF NOT EXISTS value_subscriptions (\n                user_id INTEGER PRIMARY KEY,\n                subscribed_ts REAL NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', [])
2025-07-18 20:12:00,926 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002228757AB60>, '\n            CREATE TABLE IF NOT EXISTS value_subscriptions (\n                user_id INTEGER PRIMARY KEY,\n                subscribed_ts REAL NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', []) completed
2025-07-18 20:12:00,927 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002228757AB60>, "\n            CREATE TABLE IF NOT EXISTS dialog_history (\n                history_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                role TEXT NOT NULL CHECK(role IN ('user', 'assistant')),\n                content TEXT NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", [])
2025-07-18 20:12:00,929 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002228757AB60>, "\n            CREATE TABLE IF NOT EXISTS dialog_history (\n                history_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                role TEXT NOT NULL CHECK(role IN ('user', 'assistant')),\n                content TEXT NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", []) completed
2025-07-18 20:12:00,930 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002228757AB60>, '\n            CREATE INDEX IF NOT EXISTS idx_dialog_history_user_ts ON dialog_history (user_id, timestamp DESC)\n        ', [])
2025-07-18 20:12:00,931 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002228757AB60>, '\n            CREATE INDEX IF NOT EXISTS idx_dialog_history_user_ts ON dialog_history (user_id, timestamp DESC)\n        ', []) completed
2025-07-18 20:12:00,932 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002228757AB60>, "\n            CREATE TABLE IF NOT EXISTS user_modes (\n                user_id INTEGER PRIMARY KEY,\n                mode TEXT NOT NULL DEFAULT 'saharoza',\n                rating_opportunities_count INTEGER DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", [])
2025-07-18 20:12:00,934 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002228757AB60>, "\n            CREATE TABLE IF NOT EXISTS user_modes (\n                user_id INTEGER PRIMARY KEY,\n                mode TEXT NOT NULL DEFAULT 'saharoza',\n                rating_opportunities_count INTEGER DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", []) completed
2025-07-18 20:12:00,936 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002228757AB60>, "\n            CREATE TABLE IF NOT EXISTS analytics_interactions (\n                interaction_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                action_type TEXT NOT NULL DEFAULT 'message',\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", [])
2025-07-18 20:12:00,937 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002228757AB60>, "\n            CREATE TABLE IF NOT EXISTS analytics_interactions (\n                interaction_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                action_type TEXT NOT NULL DEFAULT 'message',\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", []) completed
2025-07-18 20:12:00,938 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002228757AB60>, '\n            CREATE INDEX IF NOT EXISTS idx_interactions_user_ts_mode ON analytics_interactions (user_id, timestamp DESC, mode)\n        ', [])
2025-07-18 20:12:00,939 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002228757AB60>, '\n            CREATE INDEX IF NOT EXISTS idx_interactions_user_ts_mode ON analytics_interactions (user_id, timestamp DESC, mode)\n        ', []) completed
2025-07-18 20:12:00,940 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002228757AB60>, '\n            CREATE TABLE IF NOT EXISTS analytics_ratings (\n                rating_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                rated_message_id INTEGER,\n                dialog_history_id INTEGER,\n                timestamp REAL NOT NULL,\n                rating INTEGER NOT NULL CHECK(rating IN (0, 1)),\n                message_preview TEXT,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE,\n                FOREIGN KEY(dialog_history_id) REFERENCES dialog_history(history_id) ON DELETE SET NULL\n            )\n        ', [])
2025-07-18 20:12:00,941 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002228757AB60>, '\n            CREATE TABLE IF NOT EXISTS analytics_ratings (\n                rating_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                rated_message_id INTEGER,\n                dialog_history_id INTEGER,\n                timestamp REAL NOT NULL,\n                rating INTEGER NOT NULL CHECK(rating IN (0, 1)),\n                message_preview TEXT,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE,\n                FOREIGN KEY(dialog_history_id) REFERENCES dialog_history(history_id) ON DELETE SET NULL\n            )\n        ', []) completed
2025-07-18 20:12:00,943 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002228757AB60>, '\n            CREATE TABLE IF NOT EXISTS rp_user_stats (\n                user_id INTEGER PRIMARY KEY,\n                hp INTEGER NOT NULL DEFAULT 100,\n                heal_cooldown_ts REAL NOT NULL DEFAULT 0,\n                recovery_end_ts REAL NOT NULL DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', [])
2025-07-18 20:12:00,947 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002228757AB60>, '\n            CREATE TABLE IF NOT EXISTS rp_user_stats (\n                user_id INTEGER PRIMARY KEY,\n                hp INTEGER NOT NULL DEFAULT 100,\n                heal_cooldown_ts REAL NOT NULL DEFAULT 0,\n                recovery_end_ts REAL NOT NULL DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', []) completed
2025-07-18 20:12:00,949 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002228757AB60>)
2025-07-18 20:12:00,949 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002228757AB60>) completed
2025-07-18 20:12:00,950 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002228757AB60>)
2025-07-18 20:12:00,950 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002228757AB60>) completed
2025-07-18 20:12:00,953 - INFO - database - Database initialized successfully.
2025-07-18 20:12:00,954 - INFO - core.main.ez_main - main: Инициализация StickerManager и загрузка стикеров.
2025-07-18 20:12:00,955 - INFO - core.main.ez_main - Stickers loaded from cache.
2025-07-18 20:12:00,956 - INFO - core.main.ez_main - Fetching stickers from Telegram...
2025-07-18 20:12:00,956 - INFO - core.main.ez_main - Stickers for mode 'saharoza' already loaded (possibly from cache). Skipping fetch.
2025-07-18 20:12:00,956 - INFO - core.main.ez_main - Stickers for mode 'dedinside' already loaded (possibly from cache). Skipping fetch.
2025-07-18 20:12:00,957 - INFO - core.main.ez_main - Stickers for mode 'genius' already loaded (possibly from cache). Skipping fetch.
2025-07-18 20:12:00,958 - INFO - core.main.ez_main - Stickers saved to cache.
2025-07-18 20:12:00,958 - DEBUG - core.main.ez_main - main: Передача зависимостей в диспетчер.
2025-07-18 20:12:00,961 - INFO - core.main.ez_main - main: Настройка и включение модуля цензуры (первый приоритет для групп).
2025-07-18 20:12:00,962 - DEBUG - censor_module - setup_censor_handlers: Начата настройка модуля цензуры.
2025-07-18 20:12:00,963 - DEBUG - censor_module - censor_module.load_bad_words: Попытка загрузить слова из файла: C:\Users\Student2-4\MRS_bot-3\data\bad_words.txt
2025-07-18 20:12:00,964 - INFO - censor_module - censor_module.load_bad_words: Успешно загружено 43 корней 'злых' слов из C:\Users\Student2-4\MRS_bot-3\data\bad_words.txt.
2025-07-18 20:12:00,965 - DEBUG - censor_module - setup_censor_handlers: Загружены не-слеш команды для игнорирования цензором: ['романтический поцелуй', 'поцеловать в щёчку', 'список действий', 'почесать спинку', 'схватить за шею', 'толкнуть сильно', 'прижать к себе', 'сделать массаж', 'подарить цветы', 'моё здоровье', 'мое здоровье', 'рп действия', 'спеть песню', 'попрощаться', 'разозлиться', 'команды рп', 'поцеловать', 'засмеяться', 'подмигнуть', 'превратить', 'испугаться', 'издеваться', 'список рп', 'погладить', 'покормить', 'подрочить', 'похлопать', 'постучать', 'успокоить', 'заплакать', 'удивиться', 'работать', 'здоровье', 'трахнуть', 'полечить', 'толкнуть', 'схватить', 'помахать', 'шлепнуть', 'пощечина', 'ущипнуть', 'обозвать', 'профиль', 'магазин', 'напоить', 'кивнуть', 'шепнуть', 'ударить', 'укусить', 'плюнуть', 'обидеть', 'моё хп', 'мое хп', 'обнять', 'уебать', 'пнуть', 'топ', 'хп']
2025-07-18 20:12:00,966 - DEBUG - censor_module - setup_censor_handlers: Включение censor_router в главный диспетчер.
2025-07-18 20:12:00,966 - INFO - censor_module - setup_censor_handlers: Обработчики модуля цензуры успешно настроены и включены в главный диспетчер.
2025-07-18 20:12:00,967 - INFO - core.main.ez_main - main: Модуль цензуры успешно интегрирован.
2025-07-18 20:12:00,968 - INFO - core.main.ez_main - main: Создан роутер для групповых текстовых сообщений.
2025-07-18 20:12:00,968 - INFO - core.main.ez_main - main: Включение stat_router в group_text_router.
2025-07-18 20:12:00,969 - INFO - core.group.stat.smain - Registering stat router handlers.
2025-07-18 20:12:00,969 - INFO - core.group.stat.smain - Stat router included in Dispatcher.
2025-07-18 20:12:00,969 - INFO - core.main.ez_main - main: Включение rp_router в group_text_router.
2025-07-18 20:12:00,970 - INFO - core.group.RP.rmain - RP router included and configured.
2025-07-18 20:12:00,970 - INFO - core.main.ez_main - main: group_text_router успешно интегрирован в главный диспетчер.
2025-07-18 20:12:00,971 - INFO - core.main.ez_main - main: Создан роутер для приватных чатов.
2025-07-18 20:12:00,971 - INFO - core.main.ez_main - main: Регистрация основных обработчиков команд ТОЛЬКО для приватных чатов.
2025-07-18 20:12:00,972 - INFO - core.main.ez_main - main: Основной обработчик текстовых сообщений для ЛС зарегистрирован в private_router.
2025-07-18 20:12:00,973 - INFO - core.main.ez_main - main: private_router успешно интегрирован в главный диспетчер.
2025-07-18 20:12:00,973 - INFO - core.main.ez_main - main: Запуск фоновых задач.
2025-07-18 20:12:00,974 - INFO - core.main.ez_main - main: Запуск поллинга бота...
2025-07-18 20:12:00,974 - INFO - aiogram.dispatcher - Start polling
2025-07-18 20:12:00,974 - INFO - core.main.ez_main - Jokes task started.
2025-07-18 20:12:00,975 - WARNING - core.main.ez_main - Jokes task disabled: CHANNEL_ID is not set or invalid.
2025-07-18 20:12:00,975 - INFO - core.group.RP.rmain - Periodic HP recovery task started.
2025-07-18 20:12:01,134 - INFO - aiogram.dispatcher - Run polling for bot @infernal_madam_bot id=6543660809 - 'Мэрри Шэдоу💔'
2025-07-18 20:14:15,796 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'обнять' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 20:14:15,797 - DEBUG - censor_module - censor_message_handler: Сообщение 'обнять' является известной не-слеш командой 'обнять'. Попытка прямого вызова обработчика.
2025-07-18 20:14:15,797 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: Received text message: 'обнять' from user 5315054003.
2025-07-18 20:14:15,798 - INFO - core.group.RP.rmain - handle_rp_action_via_text: Processing RP action 'обнять' (via text) for user 5315054003.
2025-07-18 20:14:15,798 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x00000222FE0FF240>
2025-07-18 20:14:15,799 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x00000222FE0FF240> completed
2025-07-18 20:14:15,800 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,))
2025-07-18 20:14:15,801 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,)) completed
2025-07-18 20:14:15,802 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744040>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,))
2025-07-18 20:14:15,802 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744040>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,)) completed
2025-07-18 20:14:15,803 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000222875F92C0>)
2025-07-18 20:14:15,804 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000222875F92C0>) completed
2025-07-18 20:14:15,804 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000222875F92C0>)
2025-07-18 20:14:15,805 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000222875F92C0>) completed
2025-07-18 20:14:15,805 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000022287744040>)
2025-07-18 20:14:15,806 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000022287744040>) completed
2025-07-18 20:14:15,807 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002228761E160>
2025-07-18 20:14:15,808 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002228761E160> completed
2025-07-18 20:14:15,810 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,))
2025-07-18 20:14:15,811 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,)) completed
2025-07-18 20:14:15,813 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744040>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,))
2025-07-18 20:14:15,814 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744040>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,)) completed
2025-07-18 20:14:15,815 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000222875F8140>)
2025-07-18 20:14:15,815 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000222875F8140>) completed
2025-07-18 20:14:15,816 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000222875F8140>)
2025-07-18 20:14:15,816 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000222875F8140>) completed
2025-07-18 20:14:15,818 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000022287744040>)
2025-07-18 20:14:15,819 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000022287744040>) completed
2025-07-18 20:14:15,820 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x00000222FE0FF240>
2025-07-18 20:14:15,821 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x00000222FE0FF240> completed
2025-07-18 20:14:15,822 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744400>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,))
2025-07-18 20:14:15,823 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744400>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,)) completed
2025-07-18 20:14:15,834 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744400>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (93, 5315054003))
2025-07-18 20:14:15,839 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744400>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (93, 5315054003)) completed
2025-07-18 20:14:15,842 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000022287744400>)
2025-07-18 20:14:15,958 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000022287744400>) completed
2025-07-18 20:14:15,958 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000022287744400>)
2025-07-18 20:14:15,959 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000022287744400>) completed
2025-07-18 20:14:16,505 - INFO - core.group.RP.rmain - RP Action 'обнять' performed by 5315054003. Sender HP: 93.
2025-07-18 20:14:16,708 - INFO - core.group.RP.rmain - Original message 2367 deleted after RP action.
2025-07-18 20:14:16,731 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'обнять' успешно выполнен. Завершение обработки сообщения.
2025-07-18 20:14:16,753 - INFO - aiogram.event - Update id=836455757 is handled. Duration 953 ms by bot id=6543660809
2025-07-18 20:14:33,051 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'обнять' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 20:14:33,052 - DEBUG - censor_module - censor_message_handler: Сообщение 'обнять' является известной не-слеш командой 'обнять'. Попытка прямого вызова обработчика.
2025-07-18 20:14:33,052 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: Received text message: 'обнять' from user 5315054003.
2025-07-18 20:14:33,053 - INFO - core.group.RP.rmain - handle_rp_action_via_text: Processing RP action 'обнять' (via text) for user 5315054003.
2025-07-18 20:14:33,054 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002228764ED40>
2025-07-18 20:14:33,056 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002228764ED40> completed
2025-07-18 20:14:33,057 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000222877445E0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,))
2025-07-18 20:14:33,059 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000222877445E0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,)) completed
2025-07-18 20:14:33,062 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000222877445E0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,))
2025-07-18 20:14:33,063 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000222877445E0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,)) completed
2025-07-18 20:14:33,065 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x0000022285E56140>)
2025-07-18 20:14:33,065 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x0000022285E56140>) completed
2025-07-18 20:14:33,066 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000022285E56140>)
2025-07-18 20:14:33,066 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000022285E56140>) completed
2025-07-18 20:14:33,067 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000222877445E0>)
2025-07-18 20:14:33,067 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000222877445E0>) completed
2025-07-18 20:14:33,068 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002228764EA20>
2025-07-18 20:14:33,069 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002228764EA20> completed
2025-07-18 20:14:33,070 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000222877445E0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,))
2025-07-18 20:14:33,071 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000222877445E0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,)) completed
2025-07-18 20:14:33,071 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000222877445E0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,))
2025-07-18 20:14:33,072 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000222877445E0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,)) completed
2025-07-18 20:14:33,072 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x0000022285E565C0>)
2025-07-18 20:14:33,073 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x0000022285E565C0>) completed
2025-07-18 20:14:33,074 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000022285E565C0>)
2025-07-18 20:14:33,075 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000022285E565C0>) completed
2025-07-18 20:14:33,077 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000222877445E0>)
2025-07-18 20:14:33,078 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000222877445E0>) completed
2025-07-18 20:14:33,081 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002228764ED40>
2025-07-18 20:14:33,081 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002228764ED40> completed
2025-07-18 20:14:33,082 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,))
2025-07-18 20:14:33,083 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,)) completed
2025-07-18 20:14:33,084 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744040>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (98, 5315054003))
2025-07-18 20:14:33,085 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744040>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (98, 5315054003)) completed
2025-07-18 20:14:33,086 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000022287744040>)
2025-07-18 20:14:33,314 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000022287744040>) completed
2025-07-18 20:14:33,315 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000022287744040>)
2025-07-18 20:14:33,316 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000022287744040>) completed
2025-07-18 20:14:33,714 - INFO - core.group.RP.rmain - RP Action 'обнять' performed by 5315054003. Sender HP: 98.
2025-07-18 20:14:33,998 - INFO - core.group.RP.rmain - Original message 2369 deleted after RP action.
2025-07-18 20:14:33,998 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'обнять' успешно выполнен. Завершение обработки сообщения.
2025-07-18 20:14:33,999 - INFO - aiogram.event - Update id=836455758 is handled. Duration 953 ms by bot id=6543660809
2025-07-18 20:15:01,680 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'space' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 20:15:01,680 - DEBUG - censor_module - censor_message_handler: Вызов censor_text_func для текста: 'space'
2025-07-18 20:15:01,681 - DEBUG - censor_module - censor_module.censor_text_func: Начата обработка текста: 'space' с корнями: ['пизд', 'хуй', 'елда', 'член', 'хуе', 'долба', 'пен', 'еб', 'ёб', 'бл', 'сперм', 'шлю', 'соса', 'пизд', 'хуй', 'елда', 'член', 'овощ', 'окак', 'короче', 'пизда', 'уёбище', 'бдсм', 'фетиш', 'фашист', 'адольф', 'гитлер', 'стинтлер', 'шлюх', 'раф', 'кун', 'даня', 'челобрек', 'мама', 'мать', 'секс', 'папа', 'батя', 'отец', 'минет', 'бля', 'кунилингус', 'трах']
2025-07-18 20:15:01,682 - DEBUG - censor_module - censor_module.censor_text_func: Сформировано объединенное регулярное выражение: '\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*х+\W*у+\W*е+\w*)\b|\b(?:\w*д+\W*о+\W*л+\W*б+\W*а+\w*)\b|\b(?:\w*п+\W*е+\W*н+\w*)\b|\b(?:\w*е+\W*б+\w*)\b|\b(?:\w*ё+\W*б+\w*)\b|\b(?:\w*б+\W*л+\w*)\b|\b(?:\w*с+\W*п+\W*е+\W*р+\W*м+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\w*)\b|\b(?:\w*с+\W*о+\W*с+\W*а+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*о+\W*в+\W*о+\W*щ+\w*)\b|\b(?:\w*о+\W*к+\W*а+\W*к+\w*)\b|\b(?:\w*к+\W*о+\W*р+\W*о+\W*ч+\W*е+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\W*а+\w*)\b|\b(?:\w*у+\W*ё+\W*б+\W*и+\W*щ+\W*е+\w*)\b|\b(?:\w*б+\W*д+\W*с+\W*м+\w*)\b|\b(?:\w*ф+\W*е+\W*т+\W*и+\W*ш+\w*)\b|\b(?:\w*ф+\W*а+\W*ш+\W*и+\W*с+\W*т+\w*)\b|\b(?:\w*а+\W*д+\W*о+\W*л+\W*ь+\W*ф+\w*)\b|\b(?:\w*г+\W*и+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*с+\W*т+\W*и+\W*н+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\W*х+\w*)\b|\b(?:\w*р+\W*а+\W*ф+\w*)\b|\b(?:\w*к+\W*у+\W*н+\w*)\b|\b(?:\w*д+\W*а+\W*н+\W*я+\w*)\b|\b(?:\w*ч+\W*е+\W*л+\W*о+\W*б+\W*р+\W*е+\W*к+\w*)\b|\b(?:\w*м+\W*а+\W*м+\W*а+\w*)\b|\b(?:\w*м+\W*а+\W*т+\W*ь+\w*)\b|\b(?:\w*с+\W*е+\W*к+\W*с+\w*)\b|\b(?:\w*п+\W*а+\W*п+\W*а+\w*)\b|\b(?:\w*б+\W*а+\W*т+\W*я+\w*)\b|\b(?:\w*о+\W*т+\W*е+\W*ц+\w*)\b|\b(?:\w*м+\W*и+\W*н+\W*е+\W*т+\w*)\b|\b(?:\w*б+\W*л+\W*я+\w*)\b|\b(?:\w*к+\W*у+\W*н+\W*и+\W*л+\W*и+\W*н+\W*г+\W*у+\W*с+\w*)\b|\b(?:\w*т+\W*р+\W*а+\W*х+\w*)\b'
2025-07-18 20:15:01,689 - DEBUG - censor_module - censor_module.censor_text_func: Конечный цензурированный текст: 'space', Было ли цензурировано: False
2025-07-18 20:15:01,689 - DEBUG - censor_module - censor_message_handler: Результат censor_text_func: was_censored=False
2025-07-18 20:15:01,690 - DEBUG - censor_module - censor_message_handler: ЦЕНЗУРА НЕ ОБНАРУЖЕНА: Оригинал: 'space'
2025-07-18 20:15:01,690 - DEBUG - censor_module - censor_message_handler: Сообщение от пользователя 5157172276 не требует цензуры. Сообщение будет передано для дальнейшей обработки.
2025-07-18 20:15:01,691 - INFO - aiogram.event - Update id=836455759 is handled. Duration 15 ms by bot id=6543660809
2025-07-18 20:15:09,173 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Работать' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 20:15:09,174 - DEBUG - censor_module - censor_message_handler: Сообщение 'Работать' является известной не-слеш командой 'работать'. Попытка прямого вызова обработчика.
2025-07-18 20:15:09,174 - INFO - core.group.stat.smain - Received 'работать' command from user 5157172276.
2025-07-18 20:15:09,175 - DEBUG - core.group.stat.smain - Fetching last work time for user 5157172276.
2025-07-18 20:15:09,177 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000022287579D50>)
2025-07-18 20:15:09,177 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000022287579D50>) completed
2025-07-18 20:15:09,178 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000022285F237C0>, '\n        SELECT last_work_time FROM user_profiles WHERE user_id = ?\n        ', (5157172276,))
2025-07-18 20:15:09,179 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000022285F237C0>, '\n        SELECT last_work_time FROM user_profiles WHERE user_id = ?\n        ', (5157172276,)) completed
2025-07-18 20:15:09,180 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x0000022285F237C0>)
2025-07-18 20:15:09,180 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x0000022285F237C0>) completed
2025-07-18 20:15:09,181 - INFO - core.group.stat.smain - Last work time for user 5157172276: 1752857340.9840972.
2025-07-18 20:15:09,182 - DEBUG - core.group.stat.smain - Updating Lumcoins for user 5157172276 by amount 15.
2025-07-18 20:15:09,182 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000022287579D50>)
2025-07-18 20:15:09,183 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000022287579D50>) completed
2025-07-18 20:15:09,183 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000022285F230C0>, '\n        UPDATE user_profiles\n        SET lumcoins = lumcoins + ?\n        WHERE user_id = ?\n        ', (15, 5157172276))
2025-07-18 20:15:09,476 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000022285F230C0>, '\n        UPDATE user_profiles\n        SET lumcoins = lumcoins + ?\n        WHERE user_id = ?\n        ', (15, 5157172276)) completed
2025-07-18 20:15:09,478 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000022287579D50>)
2025-07-18 20:15:09,494 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000022287579D50>) completed
2025-07-18 20:15:09,496 - INFO - core.group.stat.smain - Lumcoins updated for user 5157172276. Change: 15.
2025-07-18 20:15:09,498 - DEBUG - core.group.stat.smain - Updating last work time for user 5157172276 to 1752858909.1759293.
2025-07-18 20:15:09,499 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000022287579D50>)
2025-07-18 20:15:09,501 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000022287579D50>) completed
2025-07-18 20:15:09,502 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000022285F232C0>, '\n        UPDATE user_profiles\n        SET last_work_time = ?\n        WHERE user_id = ?\n        ', (1752858909.1759293, 5157172276))
2025-07-18 20:15:09,627 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000022285F232C0>, '\n        UPDATE user_profiles\n        SET last_work_time = ?\n        WHERE user_id = ?\n        ', (1752858909.1759293, 5157172276)) completed
2025-07-18 20:15:09,630 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000022287579D50>)
2025-07-18 20:15:09,647 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000022287579D50>) completed
2025-07-18 20:15:09,648 - INFO - core.group.stat.smain - Last work time updated for user 5157172276 to 1752858909.1759293.
2025-07-18 20:15:09,649 - INFO - core.group.stat.smain - User 5157172276 successfully worked, earned 15 Lumcoins. Task: 'поливал(а) цветы'.
2025-07-18 20:15:10,104 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'работать' успешно выполнен. Завершение обработки сообщения.
2025-07-18 20:15:10,104 - INFO - aiogram.event - Update id=836455760 is handled. Duration 936 ms by bot id=6543660809
2025-07-18 20:15:15,415 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Работать' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 20:15:15,415 - DEBUG - censor_module - censor_message_handler: Сообщение 'Работать' является известной не-слеш командой 'работать'. Попытка прямого вызова обработчика.
2025-07-18 20:15:15,416 - INFO - core.group.stat.smain - Received 'работать' command from user 5157172276.
2025-07-18 20:15:15,416 - DEBUG - core.group.stat.smain - Fetching last work time for user 5157172276.
2025-07-18 20:15:15,417 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000022287579D50>)
2025-07-18 20:15:15,417 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000022287579D50>) completed
2025-07-18 20:15:15,418 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000022285F23940>, '\n        SELECT last_work_time FROM user_profiles WHERE user_id = ?\n        ', (5157172276,))
2025-07-18 20:15:15,418 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000022285F23940>, '\n        SELECT last_work_time FROM user_profiles WHERE user_id = ?\n        ', (5157172276,)) completed
2025-07-18 20:15:15,420 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x0000022285F23940>)
2025-07-18 20:15:15,420 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x0000022285F23940>) completed
2025-07-18 20:15:15,421 - INFO - core.group.stat.smain - Last work time for user 5157172276: 1752858909.1759293.
2025-07-18 20:15:15,422 - INFO - core.group.stat.smain - User 5157172276 tried to work, but still on cooldown. Time left: 14m 53s.
2025-07-18 20:15:15,730 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'работать' успешно выполнен. Завершение обработки сообщения.
2025-07-18 20:15:15,730 - INFO - aiogram.event - Update id=836455761 is handled. Duration 327 ms by bot id=6543660809
2025-07-18 20:16:11,496 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Профиль' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 20:16:11,496 - DEBUG - censor_module - censor_message_handler: Сообщение 'Профиль' является известной не-слеш командой 'профиль'. Попытка прямого вызова обработчика.
2025-07-18 20:16:11,496 - INFO - core.group.stat.smain - DEBUG: show_profile handler entered for user 5157172276 with text 'Профиль'.
2025-07-18 20:16:11,497 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002228764F920>
2025-07-18 20:16:11,499 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002228764F920> completed
2025-07-18 20:16:11,500 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744A90>, '\n            INSERT INTO users (user_id, username, first_name, last_active_ts)\n            VALUES (?, ?, ?, ?)\n            ON CONFLICT(user_id) DO UPDATE SET\n                username = excluded.username,\n                first_name = excluded.first_name,\n                last_active_ts = excluded.last_active_ts\n        ', (5157172276, 'kavitosik', ':]', 1752858971.497645))
2025-07-18 20:16:11,554 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744A90>, '\n            INSERT INTO users (user_id, username, first_name, last_active_ts)\n            VALUES (?, ?, ?, ?)\n            ON CONFLICT(user_id) DO UPDATE SET\n                username = excluded.username,\n                first_name = excluded.first_name,\n                last_active_ts = excluded.last_active_ts\n        ', (5157172276, 'kavitosik', ':]', 1752858971.497645)) completed
2025-07-18 20:16:11,555 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744A90>, "\n            INSERT OR IGNORE INTO user_modes (user_id, mode, rating_opportunities_count)\n            VALUES (?, 'saharoza', 0)\n        ", (5157172276,))
2025-07-18 20:16:11,556 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744A90>, "\n            INSERT OR IGNORE INTO user_modes (user_id, mode, rating_opportunities_count)\n            VALUES (?, 'saharoza', 0)\n        ", (5157172276,)) completed
2025-07-18 20:16:11,557 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744A90>, '\n            INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)\n        ', (5157172276,))
2025-07-18 20:16:11,558 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000022287744A90>, '\n            INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)\n        ', (5157172276,)) completed
2025-07-18 20:16:11,559 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000022287744A90>)
2025-07-18 20:16:11,574 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000022287744A90>) completed
2025-07-18 20:16:11,575 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000022287744A90>)
2025-07-18 20:16:11,578 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000022287744A90>) completed
2025-07-18 20:16:11,582 - DEBUG - core.group.stat.smain - Fetching or creating profile for user_id: 5157172276
2025-07-18 20:16:11,583 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000022287579D50>)
2025-07-18 20:16:11,584 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000022287579D50>) completed
2025-07-18 20:16:11,586 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000022285F22C40>, '\n            INSERT INTO users (user_id, username, first_name, last_name)\n            VALUES (?, ?, ?, ?)\n            ON CONFLICT(user_id) DO UPDATE SET\n                username = excluded.username,\n                first_name = excluded.first_name,\n                last_name = excluded.last_name\n        ', (5157172276, 'kavitosik', ':]', None))
2025-07-18 20:16:11,587 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000022285F22C40>, '\n            INSERT INTO users (user_id, username, first_name, last_name)\n            VALUES (?, ?, ?, ?)\n            ON CONFLICT(user_id) DO UPDATE SET\n                username = excluded.username,\n                first_name = excluded.first_name,\n                last_name = excluded.last_name\n        ', (5157172276, 'kavitosik', ':]', None)) completed
2025-07-18 20:16:11,589 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000022287579D50>)
2025-07-18 20:16:11,589 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000022287579D50>) completed
2025-07-18 20:16:11,590 - DEBUG - core.group.stat.smain - User 5157172276 information updated/inserted in 'profiles.db users' table.
2025-07-18 20:16:11,590 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000022285F22C40>, '\n        INSERT OR IGNORE INTO user_profiles (user_id)\n        VALUES (?)\n        ', (5157172276,))
2025-07-18 20:16:11,641 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000022285F22C40>, '\n        INSERT OR IGNORE INTO user_profiles (user_id)\n        VALUES (?)\n        ', (5157172276,)) completed
2025-07-18 20:16:11,644 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000022287579D50>)
2025-07-18 20:16:11,724 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000022287579D50>) completed
2025-07-18 20:16:11,726 - DEBUG - core.group.stat.smain - User profile for 5157172276 ensured existence in 'profiles.db user_profiles' table.
2025-07-18 20:16:11,732 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000022285F22C40>, '\n        SELECT * FROM user_profiles WHERE user_id = ?\n        ', (5157172276,))
2025-07-18 20:16:11,733 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000022285F22C40>, '\n        SELECT * FROM user_profiles WHERE user_id = ?\n        ', (5157172276,)) completed
2025-07-18 20:16:11,734 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x0000022285F22C40>)
2025-07-18 20:16:11,734 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x0000022285F22C40>) completed
2025-07-18 20:16:11,735 - DEBUG - core.group.stat.smain - Profile data retrieved for user_id 5157172276 from profiles.db.
2025-07-18 20:16:11,735 - DEBUG - core.group.stat.smain - Display name set to: @kavitosik for user 5157172276.
2025-07-18 20:16:11,736 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000002228764E840>
2025-07-18 20:16:11,738 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000002228764E840> completed
2025-07-18 20:16:11,739 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000222877448B0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:16:11,740 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000222877448B0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:16:11,740 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000222877448B0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:16:11,741 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000222877448B0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:16:11,741 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x0000022285F22BC0>)
2025-07-18 20:16:11,742 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x0000022285F22BC0>) completed
2025-07-18 20:16:11,745 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000022285F22BC0>)
2025-07-18 20:16:11,748 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000022285F22BC0>) completed
2025-07-18 20:16:11,748 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000222877448B0>)
2025-07-18 20:16:11,749 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000222877448B0>) completed
2025-07-18 20:16:11,749 - DEBUG - core.group.stat.smain - HP fetched from database.py: 70 for user 5157172276.
2025-07-18 20:16:11,750 - INFO - core.group.stat.smain - Successfully retrieved/created profile for user 5157172276.
2025-07-18 20:16:11,751 - DEBUG - core.group.stat.smain - Generating profile image for user 5157172276.
2025-07-18 20:16:11,752 - INFO - core.group.stat.smain - Starting profile image generation for user 5157172276.
2025-07-18 20:16:11,805 - INFO - core.group.stat.smain - Font 'Hlobus.ttf' loaded successfully and cached.
2025-07-18 20:16:11,806 - DEBUG - core.group.stat.smain - Fonts retrieved from cache.
2025-07-18 20:16:11,807 - DEBUG - core.group.stat.smain - Base image and draw object created for the card.
2025-07-18 20:16:11,807 - DEBUG - core.group.stat.smain - Card shadow drawn.
2025-07-18 20:16:11,808 - DEBUG - core.group.stat.smain - Background Loading: Step 1 - Attempting to load background from local path: background/defolt.jpg.
2025-07-18 20:16:11,916 - DEBUG - core.group.stat.smain - Background Loading: Step 2 - Local background image opened with PIL and converted to RGBA.
2025-07-18 20:16:11,924 - DEBUG - core.group.stat.smain - Background Loading: Step 3 - Background image resized to 672x280.
2025-07-18 20:16:11,925 - DEBUG - core.group.stat.smain - Background Loading: Step 4 - Background image cropped to fit card dimensions.
2025-07-18 20:16:11,928 - INFO - core.group.stat.smain - Background Loading: Step 5 - Rounded corner mask applied to background image.
2025-07-18 20:16:11,931 - DEBUG - core.group.stat.smain - Background image pasted onto base card.
2025-07-18 20:16:11,932 - DEBUG - core.group.stat.smain - Avatar Collection: Step 1 - Attempting to get profile photos for user ID: 5157172276 from Telegram.
2025-07-18 20:16:12,073 - DEBUG - core.group.stat.smain - Avatar Collection: Step 2 - Profile photos found. Number of photos: 3. Selecting the largest one.
2025-07-18 20:16:12,073 - DEBUG - core.group.stat.smain - Avatar Collection: Step 3 - File ID of the largest photo: AgACAgIAAxUAAWhxW9bFi3dIVoVpylj6wFMLLEZWAAIc9DEb6E7QSri1MJrUW5VUAQADAgADYwADNgQ.
2025-07-18 20:16:12,120 - DEBUG - core.group.stat.smain - Avatar Collection: Step 4 - File path received from Telegram: photos/file_39.jpg.
2025-07-18 20:16:12,120 - DEBUG - core.group.stat.smain - Avatar Collection: Step 5 - Downloading file from path: photos/file_39.jpg.
2025-07-18 20:16:12,299 - DEBUG - core.group.stat.smain - Avatar Collection: Step 6 - Image downloaded. Opening with PIL and converting to RGBA.
2025-07-18 20:16:12,331 - DEBUG - core.group.stat.smain - Avatar Collection: Step 7 - Resizing avatar to 120x120.
2025-07-18 20:16:12,373 - DEBUG - core.group.stat.smain - Avatar Collection: Step 8 - Creating circular mask for the avatar.
2025-07-18 20:16:12,403 - DEBUG - core.group.stat.smain - Avatar Collection: Step 9 - Applying mask to make avatar circular.
2025-07-18 20:16:12,405 - INFO - core.group.stat.smain - Avatar Collection: Successfully loaded and processed user avatar for user 5157172276.
2025-07-18 20:16:12,407 - DEBUG - core.group.stat.smain - Avatar Collection: Pasting the determined avatar image onto the base card image.
2025-07-18 20:16:12,408 - DEBUG - core.group.stat.smain - Avatar pasted onto base image.
2025-07-18 20:16:12,412 - DEBUG - core.group.stat.smain - Coin icon drawn on avatar.
2025-07-18 20:16:12,414 - DEBUG - core.group.stat.smain - Profile data for image: Display Name: @kavitosik, Level: 1, EXP: 32, Lumcoins: 130, HP: 70.
2025-07-18 20:16:12,416 - DEBUG - core.group.stat.smain - Text '@kavitosik' drawn with shadow at (165, 84).
2025-07-18 20:16:12,419 - DEBUG - core.group.stat.smain - Left-central text block (username) drawn.
2025-07-18 20:16:12,419 - DEBUG - core.group.stat.smain - Calculating required EXP for level 1.
2025-07-18 20:16:12,420 - DEBUG - core.group.stat.smain - Required EXP for level 1: 105.
2025-07-18 20:16:12,421 - DEBUG - core.group.stat.smain - Text 'Experience' drawn with shadow at (30, 205).
2025-07-18 20:16:12,422 - DEBUG - core.group.stat.smain - Experience label drawn.
2025-07-18 20:16:12,422 - DEBUG - core.group.stat.smain - EXP Bar: current_exp_percentage=0.3047619047619048, fill_width=173.
2025-07-18 20:16:12,423 - DEBUG - core.group.stat.smain - EXP bar background drawn.
2025-07-18 20:16:12,423 - DEBUG - core.group.stat.smain - EXP bar filled with green gradient with transparency.
2025-07-18 20:16:12,429 - DEBUG - core.group.stat.smain - Text '32/105' drawn with shadow at (615, 231).
2025-07-18 20:16:12,431 - DEBUG - core.group.stat.smain - Experience progress text '32/105' drawn.
2025-07-18 20:16:12,435 - DEBUG - core.group.stat.smain - Text 'HP' drawn with shadow at (651, 50).
2025-07-18 20:16:12,437 - DEBUG - core.group.stat.smain - Text '❤️ 70' drawn with shadow at (603, 75).
2025-07-18 20:16:12,438 - DEBUG - core.group.stat.smain - Right column HP text drawn.
2025-07-18 20:16:12,439 - DEBUG - core.group.stat.smain - Text 'LumCoins' drawn with shadow at (589, 120).
2025-07-18 20:16:12,440 - DEBUG - core.group.stat.smain - Text '₽ 130' drawn with shadow at (608, 145).
2025-07-18 20:16:12,441 - DEBUG - core.group.stat.smain - Right column Lumcoins text drawn.
2025-07-18 20:16:12,520 - INFO - core.group.stat.smain - Profile image generation completed for user 5157172276.
2025-07-18 20:16:12,521 - INFO - core.group.stat.smain - Sending profile image to user 5157172276.
2025-07-18 20:16:12,972 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'профиль' успешно выполнен. Завершение обработки сообщения.
2025-07-18 20:16:12,993 - INFO - aiogram.event - Update id=836455762 is handled. Duration 1500 ms by bot id=6543660809
2025-07-18 20:19:52,515 - INFO - aiogram.dispatcher - Polling stopped
2025-07-18 20:19:52,815 - INFO - core.main.ez_main - main: Остановка бота...
2025-07-18 20:19:52,823 - INFO - core.main.ez_main - main: Фоновые задачи успешно отменены.
2025-07-18 20:19:52,824 - DEBUG - core.group.stat.smain - Attempting to close profiles database connection.
2025-07-18 20:19:52,824 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000022287579D50>)
2025-07-18 20:19:52,825 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000022287579D50>) completed
2025-07-18 20:19:52,826 - INFO - core.group.stat.smain - Profiles database connection closed successfully.
2025-07-18 20:19:52,827 - INFO - core.main.ez_main - main: Соединение ProfileManager закрыто.
2025-07-18 20:19:52,828 - INFO - core.main.ez_main - main: Сессия бота закрыта. Выход.
2025-07-18 20:19:52,829 - INFO - aiogram.dispatcher - Polling stopped for bot @infernal_madam_bot id=6543660809 - 'Мэрри Шэдоу💔'
2025-07-18 20:19:52,835 - INFO - core.main.ez_main - main: Бот остановлен вручную (KeyboardInterrupt).
2025-07-18 20:19:59,885 - WARNING - core.main.ez_main - CHANNEL_ID is not set or invalid. Jokes task will be disabled.
2025-07-18 20:20:00,515 - DEBUG - asyncio - Using proactor: IocpProactor
2025-07-18 20:20:00,517 - INFO - core.main.ez_main - main: Запуск основной функции бота.
2025-07-18 20:20:00,517 - INFO - core.group.stat.smain - ProfileManager instance initialized.
2025-07-18 20:20:00,517 - DEBUG - core.group.stat.smain - Attempting to connect to profiles database asynchronously.
2025-07-18 20:20:00,519 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27770E0C0>
2025-07-18 20:20:00,520 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27770E0C0> completed
2025-07-18 20:20:00,520 - INFO - core.group.stat.smain - Profiles database connected asynchronously.
2025-07-18 20:20:00,521 - DEBUG - core.group.stat.smain - Starting asynchronous profiles database schema initialization.
2025-07-18 20:20:00,522 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F277669D50>)
2025-07-18 20:20:00,523 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F277669D50>) completed
2025-07-18 20:20:00,524 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F2776E8240>, '\n        CREATE TABLE IF NOT EXISTS users (\n            user_id INTEGER PRIMARY KEY,\n            username TEXT,\n            first_name TEXT,\n            last_name TEXT,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        )\n        ', [])
2025-07-18 20:20:00,525 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F2776E8240>, '\n        CREATE TABLE IF NOT EXISTS users (\n            user_id INTEGER PRIMARY KEY,\n            username TEXT,\n            first_name TEXT,\n            last_name TEXT,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        )\n        ', []) completed
2025-07-18 20:20:00,532 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F2776E8240>, '\n        CREATE TABLE IF NOT EXISTS user_profiles (\n            profile_id INTEGER PRIMARY KEY AUTOINCREMENT,\n            user_id INTEGER UNIQUE,\n            hp INTEGER DEFAULT 100 CHECK(hp >= 0 AND hp <= 150),\n            level INTEGER DEFAULT 1 CHECK(level >= 1 AND level <= 169),\n            exp INTEGER DEFAULT 0,\n            lumcoins INTEGER DEFAULT 0,\n            daily_messages INTEGER DEFAULT 0,\n            total_messages INTEGER DEFAULT 0,\n            flames INTEGER DEFAULT 0,\n            last_work_time REAL DEFAULT 0,\n            FOREIGN KEY (user_id) REFERENCES users (user_id)\n        )\n        ', [])
2025-07-18 20:20:00,535 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F2776E8240>, '\n        CREATE TABLE IF NOT EXISTS user_profiles (\n            profile_id INTEGER PRIMARY KEY AUTOINCREMENT,\n            user_id INTEGER UNIQUE,\n            hp INTEGER DEFAULT 100 CHECK(hp >= 0 AND hp <= 150),\n            level INTEGER DEFAULT 1 CHECK(level >= 1 AND level <= 169),\n            exp INTEGER DEFAULT 0,\n            lumcoins INTEGER DEFAULT 0,\n            daily_messages INTEGER DEFAULT 0,\n            total_messages INTEGER DEFAULT 0,\n            flames INTEGER DEFAULT 0,\n            last_work_time REAL DEFAULT 0,\n            FOREIGN KEY (user_id) REFERENCES users (user_id)\n        )\n        ', []) completed
2025-07-18 20:20:00,537 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F2776E8240>, 'CREATE INDEX IF NOT EXISTS idx_user_profiles_user_id ON user_profiles(user_id)', [])
2025-07-18 20:20:00,538 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F2776E8240>, 'CREATE INDEX IF NOT EXISTS idx_user_profiles_user_id ON user_profiles(user_id)', []) completed
2025-07-18 20:20:00,540 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F277669D50>)
2025-07-18 20:20:00,540 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F277669D50>) completed
2025-07-18 20:20:00,541 - INFO - core.group.stat.smain - Asynchronous profiles database tables checked/created.
2025-07-18 20:20:00,541 - INFO - core.group.stat.smain - Asynchronous profiles database schema check/initialization completed.
2025-07-18 20:20:00,541 - INFO - core.main.ez_main - main: ProfileManager подключен.
2025-07-18 20:20:00,542 - INFO - core.main.ez_main - main: Инициализация основной базы данных.
2025-07-18 20:20:00,546 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27770E3E0>
2025-07-18 20:20:00,547 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27770E3E0> completed
2025-07-18 20:20:00,548 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766AB60>, '\n            CREATE TABLE IF NOT EXISTS users (\n                user_id INTEGER PRIMARY KEY,\n                username TEXT,\n                first_name TEXT NOT NULL,\n                last_active_ts REAL DEFAULT 0\n            )\n        ', [])
2025-07-18 20:20:00,551 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766AB60>, '\n            CREATE TABLE IF NOT EXISTS users (\n                user_id INTEGER PRIMARY KEY,\n                username TEXT,\n                first_name TEXT NOT NULL,\n                last_active_ts REAL DEFAULT 0\n            )\n        ', []) completed
2025-07-18 20:20:00,552 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766AB60>, '\n            CREATE TABLE IF NOT EXISTS value_subscriptions (\n                user_id INTEGER PRIMARY KEY,\n                subscribed_ts REAL NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', [])
2025-07-18 20:20:00,553 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766AB60>, '\n            CREATE TABLE IF NOT EXISTS value_subscriptions (\n                user_id INTEGER PRIMARY KEY,\n                subscribed_ts REAL NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', []) completed
2025-07-18 20:20:00,554 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766AB60>, "\n            CREATE TABLE IF NOT EXISTS dialog_history (\n                history_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                role TEXT NOT NULL CHECK(role IN ('user', 'assistant')),\n                content TEXT NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", [])
2025-07-18 20:20:00,555 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766AB60>, "\n            CREATE TABLE IF NOT EXISTS dialog_history (\n                history_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                role TEXT NOT NULL CHECK(role IN ('user', 'assistant')),\n                content TEXT NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", []) completed
2025-07-18 20:20:00,557 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766AB60>, '\n            CREATE INDEX IF NOT EXISTS idx_dialog_history_user_ts ON dialog_history (user_id, timestamp DESC)\n        ', [])
2025-07-18 20:20:00,558 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766AB60>, '\n            CREATE INDEX IF NOT EXISTS idx_dialog_history_user_ts ON dialog_history (user_id, timestamp DESC)\n        ', []) completed
2025-07-18 20:20:00,559 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766AB60>, "\n            CREATE TABLE IF NOT EXISTS user_modes (\n                user_id INTEGER PRIMARY KEY,\n                mode TEXT NOT NULL DEFAULT 'saharoza',\n                rating_opportunities_count INTEGER DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", [])
2025-07-18 20:20:00,563 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766AB60>, "\n            CREATE TABLE IF NOT EXISTS user_modes (\n                user_id INTEGER PRIMARY KEY,\n                mode TEXT NOT NULL DEFAULT 'saharoza',\n                rating_opportunities_count INTEGER DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", []) completed
2025-07-18 20:20:00,565 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766AB60>, "\n            CREATE TABLE IF NOT EXISTS analytics_interactions (\n                interaction_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                action_type TEXT NOT NULL DEFAULT 'message',\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", [])
2025-07-18 20:20:00,568 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766AB60>, "\n            CREATE TABLE IF NOT EXISTS analytics_interactions (\n                interaction_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                action_type TEXT NOT NULL DEFAULT 'message',\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", []) completed
2025-07-18 20:20:00,570 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766AB60>, '\n            CREATE INDEX IF NOT EXISTS idx_interactions_user_ts_mode ON analytics_interactions (user_id, timestamp DESC, mode)\n        ', [])
2025-07-18 20:20:00,571 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766AB60>, '\n            CREATE INDEX IF NOT EXISTS idx_interactions_user_ts_mode ON analytics_interactions (user_id, timestamp DESC, mode)\n        ', []) completed
2025-07-18 20:20:00,572 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766AB60>, '\n            CREATE TABLE IF NOT EXISTS analytics_ratings (\n                rating_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                rated_message_id INTEGER,\n                dialog_history_id INTEGER,\n                timestamp REAL NOT NULL,\n                rating INTEGER NOT NULL CHECK(rating IN (0, 1)),\n                message_preview TEXT,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE,\n                FOREIGN KEY(dialog_history_id) REFERENCES dialog_history(history_id) ON DELETE SET NULL\n            )\n        ', [])
2025-07-18 20:20:00,574 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766AB60>, '\n            CREATE TABLE IF NOT EXISTS analytics_ratings (\n                rating_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                rated_message_id INTEGER,\n                dialog_history_id INTEGER,\n                timestamp REAL NOT NULL,\n                rating INTEGER NOT NULL CHECK(rating IN (0, 1)),\n                message_preview TEXT,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE,\n                FOREIGN KEY(dialog_history_id) REFERENCES dialog_history(history_id) ON DELETE SET NULL\n            )\n        ', []) completed
2025-07-18 20:20:00,575 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766AB60>, '\n            CREATE TABLE IF NOT EXISTS rp_user_stats (\n                user_id INTEGER PRIMARY KEY,\n                hp INTEGER NOT NULL DEFAULT 100,\n                heal_cooldown_ts REAL NOT NULL DEFAULT 0,\n                recovery_end_ts REAL NOT NULL DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', [])
2025-07-18 20:20:00,584 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766AB60>, '\n            CREATE TABLE IF NOT EXISTS rp_user_stats (\n                user_id INTEGER PRIMARY KEY,\n                hp INTEGER NOT NULL DEFAULT 100,\n                heal_cooldown_ts REAL NOT NULL DEFAULT 0,\n                recovery_end_ts REAL NOT NULL DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', []) completed
2025-07-18 20:20:00,585 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F27766AB60>)
2025-07-18 20:20:00,585 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F27766AB60>) completed
2025-07-18 20:20:00,586 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F27766AB60>)
2025-07-18 20:20:00,587 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F27766AB60>) completed
2025-07-18 20:20:00,587 - INFO - database - Database initialized successfully.
2025-07-18 20:20:00,588 - INFO - core.main.ez_main - main: Инициализация StickerManager и загрузка стикеров.
2025-07-18 20:20:00,589 - INFO - core.main.ez_main - Stickers loaded from cache.
2025-07-18 20:20:00,590 - INFO - core.main.ez_main - Fetching stickers from Telegram...
2025-07-18 20:20:00,590 - INFO - core.main.ez_main - Stickers for mode 'saharoza' already loaded (possibly from cache). Skipping fetch.
2025-07-18 20:20:00,590 - INFO - core.main.ez_main - Stickers for mode 'dedinside' already loaded (possibly from cache). Skipping fetch.
2025-07-18 20:20:00,591 - INFO - core.main.ez_main - Stickers for mode 'genius' already loaded (possibly from cache). Skipping fetch.
2025-07-18 20:20:00,592 - INFO - core.main.ez_main - Stickers saved to cache.
2025-07-18 20:20:00,596 - DEBUG - core.main.ez_main - main: Передача зависимостей в диспетчер.
2025-07-18 20:20:00,597 - INFO - core.main.ez_main - main: Настройка и включение модуля цензуры (первый приоритет для групп).
2025-07-18 20:20:00,598 - DEBUG - censor_module - setup_censor_handlers: Начата настройка модуля цензуры.
2025-07-18 20:20:00,598 - DEBUG - censor_module - censor_module.load_bad_words: Попытка загрузить слова из файла: C:\Users\Student2-4\MRS_bot-3\data\bad_words.txt
2025-07-18 20:20:00,599 - INFO - censor_module - censor_module.load_bad_words: Успешно загружено 43 корней 'злых' слов из C:\Users\Student2-4\MRS_bot-3\data\bad_words.txt.
2025-07-18 20:20:00,600 - DEBUG - censor_module - setup_censor_handlers: Загружены не-слеш команды для игнорирования цензором: ['романтический поцелуй', 'поцеловать в щёчку', 'список действий', 'почесать спинку', 'схватить за шею', 'толкнуть сильно', 'прижать к себе', 'сделать массаж', 'подарить цветы', 'моё здоровье', 'мое здоровье', 'рп действия', 'спеть песню', 'попрощаться', 'разозлиться', 'команды рп', 'поцеловать', 'засмеяться', 'подмигнуть', 'превратить', 'испугаться', 'издеваться', 'список рп', 'погладить', 'покормить', 'подрочить', 'похлопать', 'постучать', 'успокоить', 'заплакать', 'удивиться', 'работать', 'здоровье', 'трахнуть', 'полечить', 'толкнуть', 'схватить', 'помахать', 'шлепнуть', 'пощечина', 'ущипнуть', 'обозвать', 'профиль', 'магазин', 'напоить', 'кивнуть', 'шепнуть', 'ударить', 'укусить', 'плюнуть', 'обидеть', 'моё хп', 'мое хп', 'обнять', 'уебать', 'пнуть', 'топ', 'хп']
2025-07-18 20:20:00,601 - DEBUG - censor_module - setup_censor_handlers: Включение censor_router в главный диспетчер.
2025-07-18 20:20:00,601 - INFO - censor_module - setup_censor_handlers: Обработчики модуля цензуры успешно настроены и включены в главный диспетчер.
2025-07-18 20:20:00,602 - INFO - core.main.ez_main - main: Модуль цензуры успешно интегрирован.
2025-07-18 20:20:00,603 - INFO - core.main.ez_main - main: Создан роутер для групповых текстовых сообщений.
2025-07-18 20:20:00,604 - INFO - core.main.ez_main - main: Включение stat_router в group_text_router.
2025-07-18 20:20:00,604 - INFO - core.group.stat.smain - Registering stat router handlers.
2025-07-18 20:20:00,604 - INFO - core.group.stat.smain - Stat router included in Dispatcher.
2025-07-18 20:20:00,605 - INFO - core.main.ez_main - main: Включение rp_router в group_text_router.
2025-07-18 20:20:00,605 - INFO - core.group.RP.rmain - RP router included and configured.
2025-07-18 20:20:00,605 - INFO - core.main.ez_main - main: group_text_router успешно интегрирован в главный диспетчер.
2025-07-18 20:20:00,606 - INFO - core.main.ez_main - main: Создан роутер для приватных чатов.
2025-07-18 20:20:00,606 - INFO - core.main.ez_main - main: Регистрация основных обработчиков команд ТОЛЬКО для приватных чатов.
2025-07-18 20:20:00,608 - INFO - core.main.ez_main - main: Основной обработчик текстовых сообщений для ЛС зарегистрирован в private_router.
2025-07-18 20:20:00,608 - INFO - core.main.ez_main - main: private_router успешно интегрирован в главный диспетчер.
2025-07-18 20:20:00,609 - INFO - core.main.ez_main - main: Запуск фоновых задач.
2025-07-18 20:20:00,612 - INFO - core.main.ez_main - main: Запуск поллинга бота...
2025-07-18 20:20:00,613 - INFO - aiogram.dispatcher - Start polling
2025-07-18 20:20:00,613 - INFO - core.main.ez_main - Jokes task started.
2025-07-18 20:20:00,614 - WARNING - core.main.ez_main - Jokes task disabled: CHANNEL_ID is not set or invalid.
2025-07-18 20:20:00,614 - INFO - core.group.RP.rmain - Periodic HP recovery task started.
2025-07-18 20:20:00,785 - INFO - aiogram.dispatcher - Run polling for bot @infernal_madam_bot id=6543660809 - 'Мэрри Шэдоу💔'
2025-07-18 20:20:06,952 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Уебать' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 20:20:06,953 - DEBUG - censor_module - censor_message_handler: Сообщение 'Уебать' является известной не-слеш командой 'уебать'. Попытка прямого вызова обработчика.
2025-07-18 20:20:06,953 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: Received text message: 'Уебать' from user 5315054003.
2025-07-18 20:20:06,954 - INFO - core.group.RP.rmain - handle_rp_action_via_text: Processing RP action 'уебать' (via text) for user 5315054003.
2025-07-18 20:20:06,954 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773FBA0>
2025-07-18 20:20:06,955 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773FBA0> completed
2025-07-18 20:20:06,956 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27780C040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,))
2025-07-18 20:20:06,957 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27780C040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,)) completed
2025-07-18 20:20:06,957 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27780C040>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,))
2025-07-18 20:20:06,958 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27780C040>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,)) completed
2025-07-18 20:20:06,958 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F272E154C0>)
2025-07-18 20:20:06,959 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F272E154C0>) completed
2025-07-18 20:20:06,962 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F272E154C0>)
2025-07-18 20:20:06,962 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F272E154C0>) completed
2025-07-18 20:20:06,964 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F27780C040>)
2025-07-18 20:20:06,965 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F27780C040>) completed
2025-07-18 20:20:06,969 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773FD80>
2025-07-18 20:20:06,970 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773FD80> completed
2025-07-18 20:20:06,972 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766BE20>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,))
2025-07-18 20:20:06,973 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766BE20>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,)) completed
2025-07-18 20:20:06,973 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766BE20>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,))
2025-07-18 20:20:06,974 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766BE20>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5315054003,)) completed
2025-07-18 20:20:06,976 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F272E15BC0>)
2025-07-18 20:20:06,976 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F272E15BC0>) completed
2025-07-18 20:20:06,984 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F272E15BC0>)
2025-07-18 20:20:06,985 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F272E15BC0>) completed
2025-07-18 20:20:06,986 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F27766BE20>)
2025-07-18 20:20:06,987 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F27766BE20>) completed
2025-07-18 20:20:06,987 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F26E19F240>
2025-07-18 20:20:06,988 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F26E19F240> completed
2025-07-18 20:20:06,989 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766BD30>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,))
2025-07-18 20:20:06,990 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766BD30>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5315054003,)) completed
2025-07-18 20:20:06,991 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766BD30>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (96, 5315054003))
2025-07-18 20:20:06,992 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27766BD30>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (96, 5315054003)) completed
2025-07-18 20:20:06,995 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F27766BD30>)
2025-07-18 20:20:07,019 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F27766BD30>) completed
2025-07-18 20:20:07,020 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F27766BD30>)
2025-07-18 20:20:07,021 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F27766BD30>) completed
2025-07-18 20:20:07,501 - INFO - core.group.RP.rmain - RP Action 'уебать' performed by 5315054003. Sender HP: 96.
2025-07-18 20:20:07,804 - INFO - core.group.RP.rmain - Original message 2378 deleted after RP action.
2025-07-18 20:20:07,805 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'уебать' успешно выполнен. Завершение обработки сообщения.
2025-07-18 20:20:07,805 - INFO - aiogram.event - Update id=836455763 is handled. Duration 859 ms by bot id=6543660809
2025-07-18 20:20:31,165 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Обнять' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 20:20:31,166 - DEBUG - censor_module - censor_message_handler: Сообщение 'Обнять' является известной не-слеш командой 'обнять'. Попытка прямого вызова обработчика.
2025-07-18 20:20:31,167 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: Received text message: 'Обнять' from user 5157172276.
2025-07-18 20:20:31,167 - INFO - core.group.RP.rmain - handle_rp_action_via_text: Processing RP action 'обнять' (via text) for user 5157172276.
2025-07-18 20:20:31,168 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773CA40>
2025-07-18 20:20:31,169 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773CA40> completed
2025-07-18 20:20:31,170 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27780C220>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:20:31,171 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27780C220>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:20:31,172 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27780C220>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:20:31,172 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27780C220>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:20:31,173 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F27782A6C0>)
2025-07-18 20:20:31,174 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F27782A6C0>) completed
2025-07-18 20:20:31,174 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F27782A6C0>)
2025-07-18 20:20:31,175 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F27782A6C0>) completed
2025-07-18 20:20:31,176 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F27780C220>)
2025-07-18 20:20:31,179 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F27780C220>) completed
2025-07-18 20:20:31,181 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773EAC0>
2025-07-18 20:20:31,182 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773EAC0> completed
2025-07-18 20:20:31,183 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27780C220>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:20:31,186 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27780C220>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:20:31,187 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27780C220>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:20:31,187 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27780C220>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:20:31,188 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F2778299C0>)
2025-07-18 20:20:31,188 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F2778299C0>) completed
2025-07-18 20:20:31,189 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F2778299C0>)
2025-07-18 20:20:31,189 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F2778299C0>) completed
2025-07-18 20:20:31,190 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F27780C220>)
2025-07-18 20:20:31,191 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F27780C220>) completed
2025-07-18 20:20:31,192 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773C400>
2025-07-18 20:20:31,195 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773C400> completed
2025-07-18 20:20:31,196 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27780C220>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:20:31,197 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27780C220>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:20:31,197 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27780C220>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (75, 5157172276))
2025-07-18 20:20:31,200 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F27780C220>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (75, 5157172276)) completed
2025-07-18 20:20:31,201 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F27780C220>)
2025-07-18 20:20:31,239 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F27780C220>) completed
2025-07-18 20:20:31,240 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F27780C220>)
2025-07-18 20:20:31,240 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F27780C220>) completed
2025-07-18 20:20:31,632 - INFO - core.group.RP.rmain - RP Action 'обнять' performed by 5157172276. Sender HP: 75.
2025-07-18 20:20:31,835 - INFO - core.group.RP.rmain - Original message 2380 deleted after RP action.
2025-07-18 20:20:31,835 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'обнять' успешно выполнен. Завершение обработки сообщения.
2025-07-18 20:20:31,836 - INFO - aiogram.event - Update id=836455764 is handled. Duration 672 ms by bot id=6543660809
2025-07-18 20:20:39,409 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Обнять' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 20:20:39,410 - DEBUG - censor_module - censor_message_handler: Сообщение 'Обнять' является известной не-слеш командой 'обнять'. Попытка прямого вызова обработчика.
2025-07-18 20:20:39,411 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: Received text message: 'Обнять' from user 5157172276.
2025-07-18 20:20:39,411 - INFO - core.group.RP.rmain - handle_rp_action_via_text: Processing RP action 'обнять' (via text) for user 5157172276.
2025-07-18 20:20:39,412 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773F740>
2025-07-18 20:20:39,414 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773F740> completed
2025-07-18 20:20:39,415 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4400>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:20:39,417 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4400>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:20:39,419 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4400>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:20:39,420 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4400>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:20:39,420 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F272E72840>)
2025-07-18 20:20:39,421 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F272E72840>) completed
2025-07-18 20:20:39,422 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F272E72840>)
2025-07-18 20:20:39,422 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F272E72840>) completed
2025-07-18 20:20:39,423 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4400>)
2025-07-18 20:20:39,424 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4400>) completed
2025-07-18 20:20:39,426 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773C5E0>
2025-07-18 20:20:39,428 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773C5E0> completed
2025-07-18 20:20:39,431 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4400>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:20:39,434 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4400>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:20:39,438 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4400>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:20:39,438 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4400>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:20:39,439 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F272E719C0>)
2025-07-18 20:20:39,439 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F272E719C0>) completed
2025-07-18 20:20:39,440 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F272E719C0>)
2025-07-18 20:20:39,441 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F272E719C0>) completed
2025-07-18 20:20:39,441 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4400>)
2025-07-18 20:20:39,442 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4400>) completed
2025-07-18 20:20:39,445 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773F740>
2025-07-18 20:20:39,446 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773F740> completed
2025-07-18 20:20:39,448 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4400>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:20:39,449 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4400>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:20:39,452 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4400>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (80, 5157172276))
2025-07-18 20:20:39,454 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4400>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (80, 5157172276)) completed
2025-07-18 20:20:39,454 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F275FD4400>)
2025-07-18 20:20:39,523 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F275FD4400>) completed
2025-07-18 20:20:39,524 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4400>)
2025-07-18 20:20:39,525 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4400>) completed
2025-07-18 20:20:39,862 - INFO - core.group.RP.rmain - RP Action 'обнять' performed by 5157172276. Sender HP: 80.
2025-07-18 20:20:40,072 - INFO - core.group.RP.rmain - Original message 2382 deleted after RP action.
2025-07-18 20:20:40,073 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'обнять' успешно выполнен. Завершение обработки сообщения.
2025-07-18 20:20:40,073 - INFO - aiogram.event - Update id=836455765 is handled. Duration 671 ms by bot id=6543660809
2025-07-18 20:20:44,635 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Обнять' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 20:20:44,635 - DEBUG - censor_module - censor_message_handler: Сообщение 'Обнять' является известной не-слеш командой 'обнять'. Попытка прямого вызова обработчика.
2025-07-18 20:20:44,636 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: Received text message: 'Обнять' from user 5157172276.
2025-07-18 20:20:44,637 - INFO - core.group.RP.rmain - handle_rp_action_via_text: Processing RP action 'обнять' (via text) for user 5157172276.
2025-07-18 20:20:44,638 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F277854CC0>
2025-07-18 20:20:44,640 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F277854CC0> completed
2025-07-18 20:20:44,641 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD47C0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:20:44,646 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD47C0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:20:44,647 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD47C0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:20:44,647 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD47C0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:20:44,649 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277831EC0>)
2025-07-18 20:20:44,649 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277831EC0>) completed
2025-07-18 20:20:44,650 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277831EC0>)
2025-07-18 20:20:44,650 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277831EC0>) completed
2025-07-18 20:20:44,651 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD47C0>)
2025-07-18 20:20:44,651 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD47C0>) completed
2025-07-18 20:20:44,653 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F277854C20>
2025-07-18 20:20:44,654 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F277854C20> completed
2025-07-18 20:20:44,654 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD47C0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:20:44,655 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD47C0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:20:44,656 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD47C0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:20:44,657 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD47C0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:20:44,657 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277832940>)
2025-07-18 20:20:44,658 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277832940>) completed
2025-07-18 20:20:44,658 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277832940>)
2025-07-18 20:20:44,658 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277832940>) completed
2025-07-18 20:20:44,659 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD47C0>)
2025-07-18 20:20:44,664 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD47C0>) completed
2025-07-18 20:20:44,669 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F277854CC0>
2025-07-18 20:20:44,670 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F277854CC0> completed
2025-07-18 20:20:44,670 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD47C0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:20:44,672 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD47C0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:20:44,673 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD47C0>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (85, 5157172276))
2025-07-18 20:20:44,715 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD47C0>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (85, 5157172276)) completed
2025-07-18 20:20:44,717 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F275FD47C0>)
2025-07-18 20:20:44,733 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F275FD47C0>) completed
2025-07-18 20:20:44,734 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD47C0>)
2025-07-18 20:20:44,735 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD47C0>) completed
2025-07-18 20:20:44,989 - INFO - core.group.RP.rmain - RP Action 'обнять' performed by 5157172276. Sender HP: 85.
2025-07-18 20:20:45,184 - INFO - core.group.RP.rmain - Original message 2384 deleted after RP action.
2025-07-18 20:20:45,185 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'обнять' успешно выполнен. Завершение обработки сообщения.
2025-07-18 20:20:45,186 - INFO - aiogram.event - Update id=836455766 is handled. Duration 546 ms by bot id=6543660809
2025-07-18 20:20:48,548 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Обнять' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 20:20:48,549 - DEBUG - censor_module - censor_message_handler: Сообщение 'Обнять' является известной не-слеш командой 'обнять'. Попытка прямого вызова обработчика.
2025-07-18 20:20:48,550 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: Received text message: 'Обнять' from user 5157172276.
2025-07-18 20:20:48,550 - INFO - core.group.RP.rmain - handle_rp_action_via_text: Processing RP action 'обнять' (via text) for user 5157172276.
2025-07-18 20:20:48,551 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F277854E00>
2025-07-18 20:20:48,556 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F277854E00> completed
2025-07-18 20:20:48,556 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD48B0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:20:48,558 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD48B0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:20:48,559 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD48B0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:20:48,561 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD48B0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:20:48,563 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F2778328C0>)
2025-07-18 20:20:48,566 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F2778328C0>) completed
2025-07-18 20:20:48,567 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F2778328C0>)
2025-07-18 20:20:48,567 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F2778328C0>) completed
2025-07-18 20:20:48,568 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD48B0>)
2025-07-18 20:20:48,619 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD48B0>) completed
2025-07-18 20:20:48,648 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773F740>
2025-07-18 20:20:48,649 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773F740> completed
2025-07-18 20:20:48,650 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD48B0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:20:48,651 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD48B0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:20:48,652 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD48B0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:20:48,653 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD48B0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:20:48,654 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277832FC0>)
2025-07-18 20:20:48,668 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277832FC0>) completed
2025-07-18 20:20:48,669 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277832FC0>)
2025-07-18 20:20:48,670 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277832FC0>) completed
2025-07-18 20:20:48,670 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD48B0>)
2025-07-18 20:20:48,671 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD48B0>) completed
2025-07-18 20:20:48,672 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F277854E00>
2025-07-18 20:20:48,674 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F277854E00> completed
2025-07-18 20:20:48,675 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD48B0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:20:48,680 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD48B0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:20:48,682 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD48B0>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (90, 5157172276))
2025-07-18 20:20:48,685 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD48B0>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (90, 5157172276)) completed
2025-07-18 20:20:48,686 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F275FD48B0>)
2025-07-18 20:20:48,746 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F275FD48B0>) completed
2025-07-18 20:20:48,747 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD48B0>)
2025-07-18 20:20:48,747 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD48B0>) completed
2025-07-18 20:20:49,012 - INFO - core.group.RP.rmain - RP Action 'обнять' performed by 5157172276. Sender HP: 90.
2025-07-18 20:20:49,212 - INFO - core.group.RP.rmain - Original message 2386 deleted after RP action.
2025-07-18 20:20:49,213 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'обнять' успешно выполнен. Завершение обработки сообщения.
2025-07-18 20:20:49,214 - INFO - aiogram.event - Update id=836455767 is handled. Duration 672 ms by bot id=6543660809
2025-07-18 20:20:52,555 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Обнять' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 20:20:52,571 - DEBUG - censor_module - censor_message_handler: Сообщение 'Обнять' является известной не-слеш командой 'обнять'. Попытка прямого вызова обработчика.
2025-07-18 20:20:52,572 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: Received text message: 'Обнять' from user 5157172276.
2025-07-18 20:20:52,579 - INFO - core.group.RP.rmain - handle_rp_action_via_text: Processing RP action 'обнять' (via text) for user 5157172276.
2025-07-18 20:20:52,580 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773EB60>
2025-07-18 20:20:52,585 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773EB60> completed
2025-07-18 20:20:52,586 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:20:52,587 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:20:52,588 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:20:52,588 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:20:52,589 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F2778319C0>)
2025-07-18 20:20:52,590 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F2778319C0>) completed
2025-07-18 20:20:52,591 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F2778319C0>)
2025-07-18 20:20:52,591 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F2778319C0>) completed
2025-07-18 20:20:52,592 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4040>)
2025-07-18 20:20:52,592 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4040>) completed
2025-07-18 20:20:52,596 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F277854B80>
2025-07-18 20:20:52,599 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F277854B80> completed
2025-07-18 20:20:52,600 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:20:52,601 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:20:52,604 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:20:52,605 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:20:52,606 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277831DC0>)
2025-07-18 20:20:52,606 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277831DC0>) completed
2025-07-18 20:20:52,607 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277831DC0>)
2025-07-18 20:20:52,607 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277831DC0>) completed
2025-07-18 20:20:52,608 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4040>)
2025-07-18 20:20:52,609 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4040>) completed
2025-07-18 20:20:52,612 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773E8E0>
2025-07-18 20:20:52,613 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773E8E0> completed
2025-07-18 20:20:52,614 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:20:52,617 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:20:52,618 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (95, 5157172276))
2025-07-18 20:20:52,620 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (95, 5157172276)) completed
2025-07-18 20:20:52,621 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F275FD4040>)
2025-07-18 20:20:52,690 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F275FD4040>) completed
2025-07-18 20:20:52,691 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4040>)
2025-07-18 20:20:52,692 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4040>) completed
2025-07-18 20:20:52,965 - INFO - core.group.RP.rmain - RP Action 'обнять' performed by 5157172276. Sender HP: 95.
2025-07-18 20:20:53,152 - INFO - core.group.RP.rmain - Original message 2388 deleted after RP action.
2025-07-18 20:20:53,152 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'обнять' успешно выполнен. Завершение обработки сообщения.
2025-07-18 20:20:53,153 - INFO - aiogram.event - Update id=836455768 is handled. Duration 655 ms by bot id=6543660809
2025-07-18 20:21:00,304 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Обнять' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 20:21:00,305 - DEBUG - censor_module - censor_message_handler: Сообщение 'Обнять' является известной не-слеш командой 'обнять'. Попытка прямого вызова обработчика.
2025-07-18 20:21:00,305 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: Received text message: 'Обнять' from user 5157172276.
2025-07-18 20:21:00,306 - INFO - core.group.RP.rmain - handle_rp_action_via_text: Processing RP action 'обнять' (via text) for user 5157172276.
2025-07-18 20:21:00,307 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773C4A0>
2025-07-18 20:21:00,309 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773C4A0> completed
2025-07-18 20:21:00,312 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:21:00,313 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:21:00,314 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:21:00,315 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:21:00,317 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277832540>)
2025-07-18 20:21:00,319 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277832540>) completed
2025-07-18 20:21:00,320 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277832540>)
2025-07-18 20:21:00,321 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277832540>) completed
2025-07-18 20:21:00,322 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4040>)
2025-07-18 20:21:00,323 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4040>) completed
2025-07-18 20:21:00,324 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773EF20>
2025-07-18 20:21:00,327 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773EF20> completed
2025-07-18 20:21:00,328 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:21:00,331 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:21:00,332 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:21:00,332 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:21:00,333 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277833240>)
2025-07-18 20:21:00,333 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277833240>) completed
2025-07-18 20:21:00,335 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277833240>)
2025-07-18 20:21:00,335 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277833240>) completed
2025-07-18 20:21:00,336 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4040>)
2025-07-18 20:21:00,337 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4040>) completed
2025-07-18 20:21:00,338 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773C4A0>
2025-07-18 20:21:00,339 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773C4A0> completed
2025-07-18 20:21:00,340 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:21:00,340 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:21:00,341 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (100, 5157172276))
2025-07-18 20:21:00,344 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (100, 5157172276)) completed
2025-07-18 20:21:00,347 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F275FD4040>)
2025-07-18 20:21:00,362 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F275FD4040>) completed
2025-07-18 20:21:00,364 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4040>)
2025-07-18 20:21:00,364 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4040>) completed
2025-07-18 20:21:00,586 - INFO - core.group.RP.rmain - RP Action 'обнять' performed by 5157172276. Sender HP: 100.
2025-07-18 20:21:00,777 - INFO - core.group.RP.rmain - Original message 2390 deleted after RP action.
2025-07-18 20:21:00,778 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'обнять' успешно выполнен. Завершение обработки сообщения.
2025-07-18 20:21:00,780 - INFO - aiogram.event - Update id=836455769 is handled. Duration 469 ms by bot id=6543660809
2025-07-18 20:21:06,000 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Обнять' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 20:21:06,000 - DEBUG - censor_module - censor_message_handler: Сообщение 'Обнять' является известной не-слеш командой 'обнять'. Попытка прямого вызова обработчика.
2025-07-18 20:21:06,001 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: Received text message: 'Обнять' from user 5157172276.
2025-07-18 20:21:06,001 - INFO - core.group.RP.rmain - handle_rp_action_via_text: Processing RP action 'обнять' (via text) for user 5157172276.
2025-07-18 20:21:06,002 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773C4A0>
2025-07-18 20:21:06,004 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773C4A0> completed
2025-07-18 20:21:06,005 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD46D0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:21:06,007 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD46D0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:21:06,008 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD46D0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:21:06,009 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD46D0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:21:06,010 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277832340>)
2025-07-18 20:21:06,011 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277832340>) completed
2025-07-18 20:21:06,011 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277832340>)
2025-07-18 20:21:06,012 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277832340>) completed
2025-07-18 20:21:06,013 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD46D0>)
2025-07-18 20:21:06,014 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD46D0>) completed
2025-07-18 20:21:06,016 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773EA20>
2025-07-18 20:21:06,017 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773EA20> completed
2025-07-18 20:21:06,018 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD46D0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:21:06,018 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD46D0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:21:06,019 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD46D0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:21:06,020 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD46D0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:21:06,020 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277832A40>)
2025-07-18 20:21:06,021 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277832A40>) completed
2025-07-18 20:21:06,022 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277832A40>)
2025-07-18 20:21:06,022 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277832A40>) completed
2025-07-18 20:21:06,023 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD46D0>)
2025-07-18 20:21:06,023 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD46D0>) completed
2025-07-18 20:21:06,025 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773C4A0>
2025-07-18 20:21:06,026 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773C4A0> completed
2025-07-18 20:21:06,026 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD46D0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:21:06,028 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD46D0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:21:06,033 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD46D0>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (105, 5157172276))
2025-07-18 20:21:06,035 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD46D0>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (105, 5157172276)) completed
2025-07-18 20:21:06,036 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F275FD46D0>)
2025-07-18 20:21:06,097 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F275FD46D0>) completed
2025-07-18 20:21:06,098 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD46D0>)
2025-07-18 20:21:06,099 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD46D0>) completed
2025-07-18 20:21:06,371 - INFO - core.group.RP.rmain - RP Action 'обнять' performed by 5157172276. Sender HP: 105.
2025-07-18 20:21:06,553 - INFO - core.group.RP.rmain - Original message 2392 deleted after RP action.
2025-07-18 20:21:06,554 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'обнять' успешно выполнен. Завершение обработки сообщения.
2025-07-18 20:21:06,554 - INFO - aiogram.event - Update id=836455770 is handled. Duration 561 ms by bot id=6543660809
2025-07-18 20:21:15,940 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Обнять' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 20:21:15,941 - DEBUG - censor_module - censor_message_handler: Сообщение 'Обнять' является известной не-слеш командой 'обнять'. Попытка прямого вызова обработчика.
2025-07-18 20:21:15,942 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: Received text message: 'Обнять' from user 5157172276.
2025-07-18 20:21:15,942 - INFO - core.group.RP.rmain - handle_rp_action_via_text: Processing RP action 'обнять' (via text) for user 5157172276.
2025-07-18 20:21:15,943 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F277854CC0>
2025-07-18 20:21:15,946 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F277854CC0> completed
2025-07-18 20:21:15,947 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:21:15,948 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:21:15,950 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:21:15,951 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:21:15,952 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277831240>)
2025-07-18 20:21:15,953 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277831240>) completed
2025-07-18 20:21:15,953 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277831240>)
2025-07-18 20:21:15,954 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277831240>) completed
2025-07-18 20:21:15,954 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4040>)
2025-07-18 20:21:15,955 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4040>) completed
2025-07-18 20:21:15,956 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773F880>
2025-07-18 20:21:15,957 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773F880> completed
2025-07-18 20:21:15,957 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:21:15,958 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:21:15,960 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:21:15,964 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:21:15,967 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277831DC0>)
2025-07-18 20:21:15,968 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277831DC0>) completed
2025-07-18 20:21:15,969 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277831DC0>)
2025-07-18 20:21:15,970 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277831DC0>) completed
2025-07-18 20:21:15,970 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4040>)
2025-07-18 20:21:15,971 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4040>) completed
2025-07-18 20:21:15,972 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F277854CC0>
2025-07-18 20:21:15,973 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F277854CC0> completed
2025-07-18 20:21:15,974 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:21:15,975 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:21:15,975 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (110, 5157172276))
2025-07-18 20:21:15,978 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4040>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (110, 5157172276)) completed
2025-07-18 20:21:15,979 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F275FD4040>)
2025-07-18 20:21:16,054 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F275FD4040>) completed
2025-07-18 20:21:16,055 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4040>)
2025-07-18 20:21:16,056 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4040>) completed
2025-07-18 20:21:16,333 - INFO - core.group.RP.rmain - RP Action 'обнять' performed by 5157172276. Sender HP: 110.
2025-07-18 20:21:16,511 - INFO - core.group.RP.rmain - Original message 2394 deleted after RP action.
2025-07-18 20:21:16,512 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'обнять' успешно выполнен. Завершение обработки сообщения.
2025-07-18 20:21:16,512 - INFO - aiogram.event - Update id=836455771 is handled. Duration 578 ms by bot id=6543660809
2025-07-18 20:21:18,853 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Обнять' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 20:21:18,854 - DEBUG - censor_module - censor_message_handler: Сообщение 'Обнять' является известной не-слеш командой 'обнять'. Попытка прямого вызова обработчика.
2025-07-18 20:21:18,854 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: Received text message: 'Обнять' from user 5157172276.
2025-07-18 20:21:18,855 - INFO - core.group.RP.rmain - handle_rp_action_via_text: Processing RP action 'обнять' (via text) for user 5157172276.
2025-07-18 20:21:18,856 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F277854CC0>
2025-07-18 20:21:18,858 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F277854CC0> completed
2025-07-18 20:21:18,858 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4130>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:21:18,860 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4130>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:21:18,861 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4130>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:21:18,861 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4130>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:21:18,862 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277777B40>)
2025-07-18 20:21:18,863 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277777B40>) completed
2025-07-18 20:21:18,863 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277777B40>)
2025-07-18 20:21:18,864 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277777B40>) completed
2025-07-18 20:21:18,865 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4130>)
2025-07-18 20:21:18,866 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4130>) completed
2025-07-18 20:21:18,868 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F27773EF20>
2025-07-18 20:21:18,870 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F27773EF20> completed
2025-07-18 20:21:18,870 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4130>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:21:18,871 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4130>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:21:18,873 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4130>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:21:18,873 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4130>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:21:18,874 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277777DC0>)
2025-07-18 20:21:18,874 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277777DC0>) completed
2025-07-18 20:21:18,875 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277777DC0>)
2025-07-18 20:21:18,875 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277777DC0>) completed
2025-07-18 20:21:18,876 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4130>)
2025-07-18 20:21:18,877 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4130>) completed
2025-07-18 20:21:18,880 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F277854CC0>
2025-07-18 20:21:18,882 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F277854CC0> completed
2025-07-18 20:21:18,883 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4130>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:21:18,884 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4130>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:21:18,886 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4130>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (115, 5157172276))
2025-07-18 20:21:18,887 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD4130>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (115, 5157172276)) completed
2025-07-18 20:21:18,888 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F275FD4130>)
2025-07-18 20:21:19,127 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F275FD4130>) completed
2025-07-18 20:21:19,128 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4130>)
2025-07-18 20:21:19,129 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD4130>) completed
2025-07-18 20:21:19,363 - INFO - core.group.RP.rmain - RP Action 'обнять' performed by 5157172276. Sender HP: 115.
2025-07-18 20:21:19,551 - INFO - core.group.RP.rmain - Original message 2396 deleted after RP action.
2025-07-18 20:21:19,551 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'обнять' успешно выполнен. Завершение обработки сообщения.
2025-07-18 20:21:19,552 - INFO - aiogram.event - Update id=836455772 is handled. Duration 688 ms by bot id=6543660809
2025-07-18 20:21:24,537 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Окак' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 20:21:24,537 - DEBUG - censor_module - censor_message_handler: Вызов censor_text_func для текста: 'Окак'
2025-07-18 20:21:24,538 - DEBUG - censor_module - censor_module.censor_text_func: Начата обработка текста: 'Окак' с корнями: ['пизд', 'хуй', 'елда', 'член', 'хуе', 'долба', 'пен', 'еб', 'ёб', 'бл', 'сперм', 'шлю', 'соса', 'пизд', 'хуй', 'елда', 'член', 'овощ', 'окак', 'короче', 'пизда', 'уёбище', 'бдсм', 'фетиш', 'фашист', 'адольф', 'гитлер', 'стинтлер', 'шлюх', 'раф', 'кун', 'даня', 'челобрек', 'мама', 'мать', 'секс', 'папа', 'батя', 'отец', 'минет', 'бля', 'кунилингус', 'трах']
2025-07-18 20:21:24,539 - DEBUG - censor_module - censor_module.censor_text_func: Сформировано объединенное регулярное выражение: '\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*х+\W*у+\W*е+\w*)\b|\b(?:\w*д+\W*о+\W*л+\W*б+\W*а+\w*)\b|\b(?:\w*п+\W*е+\W*н+\w*)\b|\b(?:\w*е+\W*б+\w*)\b|\b(?:\w*ё+\W*б+\w*)\b|\b(?:\w*б+\W*л+\w*)\b|\b(?:\w*с+\W*п+\W*е+\W*р+\W*м+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\w*)\b|\b(?:\w*с+\W*о+\W*с+\W*а+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*о+\W*в+\W*о+\W*щ+\w*)\b|\b(?:\w*о+\W*к+\W*а+\W*к+\w*)\b|\b(?:\w*к+\W*о+\W*р+\W*о+\W*ч+\W*е+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\W*а+\w*)\b|\b(?:\w*у+\W*ё+\W*б+\W*и+\W*щ+\W*е+\w*)\b|\b(?:\w*б+\W*д+\W*с+\W*м+\w*)\b|\b(?:\w*ф+\W*е+\W*т+\W*и+\W*ш+\w*)\b|\b(?:\w*ф+\W*а+\W*ш+\W*и+\W*с+\W*т+\w*)\b|\b(?:\w*а+\W*д+\W*о+\W*л+\W*ь+\W*ф+\w*)\b|\b(?:\w*г+\W*и+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*с+\W*т+\W*и+\W*н+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\W*х+\w*)\b|\b(?:\w*р+\W*а+\W*ф+\w*)\b|\b(?:\w*к+\W*у+\W*н+\w*)\b|\b(?:\w*д+\W*а+\W*н+\W*я+\w*)\b|\b(?:\w*ч+\W*е+\W*л+\W*о+\W*б+\W*р+\W*е+\W*к+\w*)\b|\b(?:\w*м+\W*а+\W*м+\W*а+\w*)\b|\b(?:\w*м+\W*а+\W*т+\W*ь+\w*)\b|\b(?:\w*с+\W*е+\W*к+\W*с+\w*)\b|\b(?:\w*п+\W*а+\W*п+\W*а+\w*)\b|\b(?:\w*б+\W*а+\W*т+\W*я+\w*)\b|\b(?:\w*о+\W*т+\W*е+\W*ц+\w*)\b|\b(?:\w*м+\W*и+\W*н+\W*е+\W*т+\w*)\b|\b(?:\w*б+\W*л+\W*я+\w*)\b|\b(?:\w*к+\W*у+\W*н+\W*и+\W*л+\W*и+\W*н+\W*г+\W*у+\W*с+\w*)\b|\b(?:\w*т+\W*р+\W*а+\W*х+\w*)\b'
2025-07-18 20:21:24,547 - DEBUG - censor_module - censor_module.generate_random_symbols: Сгенерированы случайные символы длиной 4: '^%&#'
2025-07-18 20:21:24,548 - DEBUG - censor_module - censor_module.censor_text_func: Обнаружено совпадение 'Окак', заменено на '^%&#'
2025-07-18 20:21:24,549 - DEBUG - censor_module - censor_module.censor_text_func: Конечный цензурированный текст: '^%&#', Было ли цензурировано: True
2025-07-18 20:21:24,549 - DEBUG - censor_module - censor_message_handler: Результат censor_text_func: was_censored=True
2025-07-18 20:21:24,549 - INFO - censor_module - censor_message_handler: ЦЕНЗУРА ОБНАРУЖЕНА: Оригинал: 'Окак', Цензурировано: '^%&#'. Найденные слова: ['Окак']
2025-07-18 20:21:24,550 - DEBUG - censor_module - censor_message_handler: Попытка удалить сообщение 2398 от пользователя 5157172276.
2025-07-18 20:21:24,837 - INFO - censor_module - censor_message_handler: Сообщение 2398 от пользователя 5157172276 УСПЕШНО удалено.
2025-07-18 20:21:24,839 - DEBUG - censor_module - censor_message_handler: Попытка отправить цензурированное сообщение в чат -1002640920461: '<b>:]</b> имел в виду: "^%&#"'
2025-07-18 20:21:25,180 - INFO - censor_module - censor_message_handler: Цензурированное сообщение УСПЕШНО отправлено в чат -1002640920461.
2025-07-18 20:21:25,181 - INFO - aiogram.event - Update id=836455773 is handled. Duration 655 ms by bot id=6543660809
2025-07-18 20:21:33,476 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Капец' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 20:21:33,477 - DEBUG - censor_module - censor_message_handler: Вызов censor_text_func для текста: 'Капец'
2025-07-18 20:21:33,478 - DEBUG - censor_module - censor_module.censor_text_func: Начата обработка текста: 'Капец' с корнями: ['пизд', 'хуй', 'елда', 'член', 'хуе', 'долба', 'пен', 'еб', 'ёб', 'бл', 'сперм', 'шлю', 'соса', 'пизд', 'хуй', 'елда', 'член', 'овощ', 'окак', 'короче', 'пизда', 'уёбище', 'бдсм', 'фетиш', 'фашист', 'адольф', 'гитлер', 'стинтлер', 'шлюх', 'раф', 'кун', 'даня', 'челобрек', 'мама', 'мать', 'секс', 'папа', 'батя', 'отец', 'минет', 'бля', 'кунилингус', 'трах']
2025-07-18 20:21:33,479 - DEBUG - censor_module - censor_module.censor_text_func: Сформировано объединенное регулярное выражение: '\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*х+\W*у+\W*е+\w*)\b|\b(?:\w*д+\W*о+\W*л+\W*б+\W*а+\w*)\b|\b(?:\w*п+\W*е+\W*н+\w*)\b|\b(?:\w*е+\W*б+\w*)\b|\b(?:\w*ё+\W*б+\w*)\b|\b(?:\w*б+\W*л+\w*)\b|\b(?:\w*с+\W*п+\W*е+\W*р+\W*м+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\w*)\b|\b(?:\w*с+\W*о+\W*с+\W*а+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*о+\W*в+\W*о+\W*щ+\w*)\b|\b(?:\w*о+\W*к+\W*а+\W*к+\w*)\b|\b(?:\w*к+\W*о+\W*р+\W*о+\W*ч+\W*е+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\W*а+\w*)\b|\b(?:\w*у+\W*ё+\W*б+\W*и+\W*щ+\W*е+\w*)\b|\b(?:\w*б+\W*д+\W*с+\W*м+\w*)\b|\b(?:\w*ф+\W*е+\W*т+\W*и+\W*ш+\w*)\b|\b(?:\w*ф+\W*а+\W*ш+\W*и+\W*с+\W*т+\w*)\b|\b(?:\w*а+\W*д+\W*о+\W*л+\W*ь+\W*ф+\w*)\b|\b(?:\w*г+\W*и+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*с+\W*т+\W*и+\W*н+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\W*х+\w*)\b|\b(?:\w*р+\W*а+\W*ф+\w*)\b|\b(?:\w*к+\W*у+\W*н+\w*)\b|\b(?:\w*д+\W*а+\W*н+\W*я+\w*)\b|\b(?:\w*ч+\W*е+\W*л+\W*о+\W*б+\W*р+\W*е+\W*к+\w*)\b|\b(?:\w*м+\W*а+\W*м+\W*а+\w*)\b|\b(?:\w*м+\W*а+\W*т+\W*ь+\w*)\b|\b(?:\w*с+\W*е+\W*к+\W*с+\w*)\b|\b(?:\w*п+\W*а+\W*п+\W*а+\w*)\b|\b(?:\w*б+\W*а+\W*т+\W*я+\w*)\b|\b(?:\w*о+\W*т+\W*е+\W*ц+\w*)\b|\b(?:\w*м+\W*и+\W*н+\W*е+\W*т+\w*)\b|\b(?:\w*б+\W*л+\W*я+\w*)\b|\b(?:\w*к+\W*у+\W*н+\W*и+\W*л+\W*и+\W*н+\W*г+\W*у+\W*с+\w*)\b|\b(?:\w*т+\W*р+\W*а+\W*х+\w*)\b'
2025-07-18 20:21:33,480 - DEBUG - censor_module - censor_module.censor_text_func: Конечный цензурированный текст: 'Капец', Было ли цензурировано: False
2025-07-18 20:21:33,481 - DEBUG - censor_module - censor_message_handler: Результат censor_text_func: was_censored=False
2025-07-18 20:21:33,481 - DEBUG - censor_module - censor_message_handler: ЦЕНЗУРА НЕ ОБНАРУЖЕНА: Оригинал: 'Капец'
2025-07-18 20:21:33,482 - DEBUG - censor_module - censor_message_handler: Сообщение от пользователя 5157172276 не требует цензуры. Сообщение будет передано для дальнейшей обработки.
2025-07-18 20:21:33,482 - INFO - aiogram.event - Update id=836455774 is handled. Duration 0 ms by bot id=6543660809
2025-07-18 20:21:42,742 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'Обнять' от пользователя 5157172276 в чате -1002640920461.
2025-07-18 20:21:42,743 - DEBUG - censor_module - censor_message_handler: Сообщение 'Обнять' является известной не-слеш командой 'обнять'. Попытка прямого вызова обработчика.
2025-07-18 20:21:42,744 - DEBUG - core.group.RP.rmain - handle_rp_action_via_text: Received text message: 'Обнять' from user 5157172276.
2025-07-18 20:21:42,744 - INFO - core.group.RP.rmain - handle_rp_action_via_text: Processing RP action 'обнять' (via text) for user 5157172276.
2025-07-18 20:21:42,745 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F277854680>
2025-07-18 20:21:42,747 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F277854680> completed
2025-07-18 20:21:42,747 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD45E0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:21:42,748 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD45E0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:21:42,750 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD45E0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:21:42,750 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD45E0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:21:42,752 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277831D40>)
2025-07-18 20:21:42,752 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277831D40>) completed
2025-07-18 20:21:42,753 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277831D40>)
2025-07-18 20:21:42,753 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277831D40>) completed
2025-07-18 20:21:42,754 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD45E0>)
2025-07-18 20:21:42,756 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD45E0>) completed
2025-07-18 20:21:42,758 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F277854EA0>
2025-07-18 20:21:42,758 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F277854EA0> completed
2025-07-18 20:21:42,759 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD45E0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:21:42,761 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD45E0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:21:42,764 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD45E0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,))
2025-07-18 20:21:42,765 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD45E0>, 'SELECT hp, heal_cooldown_ts, recovery_end_ts FROM rp_user_stats WHERE user_id = ?', (5157172276,)) completed
2025-07-18 20:21:42,769 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277832DC0>)
2025-07-18 20:21:42,771 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001F277832DC0>) completed
2025-07-18 20:21:42,772 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277832DC0>)
2025-07-18 20:21:42,772 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F277832DC0>) completed
2025-07-18 20:21:42,773 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD45E0>)
2025-07-18 20:21:42,774 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD45E0>) completed
2025-07-18 20:21:42,775 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001F277854680>
2025-07-18 20:21:42,775 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001F277854680> completed
2025-07-18 20:21:42,776 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD45E0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,))
2025-07-18 20:21:42,778 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD45E0>, 'INSERT OR IGNORE INTO rp_user_stats (user_id) VALUES (?)', (5157172276,)) completed
2025-07-18 20:21:42,780 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD45E0>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (120, 5157172276))
2025-07-18 20:21:42,781 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001F275FD45E0>, 'UPDATE rp_user_stats SET hp = ? WHERE user_id = ?', (120, 5157172276)) completed
2025-07-18 20:21:42,782 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F275FD45E0>)
2025-07-18 20:21:42,847 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F275FD45E0>) completed
2025-07-18 20:21:42,847 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD45E0>)
2025-07-18 20:21:42,848 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F275FD45E0>) completed
2025-07-18 20:21:43,240 - INFO - core.group.RP.rmain - RP Action 'обнять' performed by 5157172276. Sender HP: 120.
2025-07-18 20:21:43,479 - INFO - core.group.RP.rmain - Original message 2401 deleted after RP action.
2025-07-18 20:21:43,480 - INFO - censor_module - censor_message_handler: Прямой вызов обработчика для 'обнять' успешно выполнен. Завершение обработки сообщения.
2025-07-18 20:21:43,482 - INFO - aiogram.event - Update id=836455775 is handled. Duration 733 ms by bot id=6543660809
2025-07-18 20:21:44,571 - INFO - aiogram.dispatcher - Polling stopped
2025-07-18 20:21:44,846 - INFO - core.main.ez_main - main: Остановка бота...
2025-07-18 20:21:44,849 - INFO - core.main.ez_main - main: Фоновые задачи успешно отменены.
2025-07-18 20:21:44,849 - DEBUG - core.group.stat.smain - Attempting to close profiles database connection.
2025-07-18 20:21:44,850 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F277669D50>)
2025-07-18 20:21:44,850 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F277669D50>) completed
2025-07-18 20:21:44,850 - INFO - core.group.stat.smain - Profiles database connection closed successfully.
2025-07-18 20:21:44,851 - INFO - core.main.ez_main - main: Соединение ProfileManager закрыто.
2025-07-18 20:21:44,851 - INFO - core.main.ez_main - main: Сессия бота закрыта. Выход.
2025-07-18 20:21:44,853 - INFO - aiogram.dispatcher - Polling stopped for bot @infernal_madam_bot id=6543660809 - 'Мэрри Шэдоу💔'
2025-07-18 20:21:44,855 - INFO - core.main.ez_main - main: Бот остановлен вручную (KeyboardInterrupt).
