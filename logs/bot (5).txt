2025-07-18 15:53:24,426 - WARNING - core.main.ez_main - CHANNEL_ID is not set or invalid. Jokes task will be disabled.
2025-07-18 15:53:24,623 - DEBUG - asyncio - Using proactor: IocpProactor
2025-07-18 15:53:24,624 - INFO - core.main.ez_main - main: Запуск основной функции бота.
2025-07-18 15:53:24,624 - INFO - core.group.stat.smain - ProfileManager instance initialized.
2025-07-18 15:53:24,624 - DEBUG - core.group.stat.smain - Attempting to connect to profiles database asynchronously.
2025-07-18 15:53:24,625 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001D206471440>
2025-07-18 15:53:24,625 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001D206471440> completed
2025-07-18 15:53:24,626 - INFO - core.group.stat.smain - Profiles database connected asynchronously.
2025-07-18 15:53:24,626 - DEBUG - core.group.stat.smain - Starting asynchronous profiles database schema initialization.
2025-07-18 15:53:24,626 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001D2064354E0>)
2025-07-18 15:53:24,627 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001D2064354E0>) completed
2025-07-18 15:53:24,627 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001D206475740>, '\n        CREATE TABLE IF NOT EXISTS users (\n            user_id INTEGER PRIMARY KEY,\n            username TEXT,\n            first_name TEXT,\n            last_name TEXT,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        )\n        ', [])
2025-07-18 15:53:24,627 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001D206475740>, '\n        CREATE TABLE IF NOT EXISTS users (\n            user_id INTEGER PRIMARY KEY,\n            username TEXT,\n            first_name TEXT,\n            last_name TEXT,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        )\n        ', []) completed
2025-07-18 15:53:24,627 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001D206475740>, '\n        CREATE TABLE IF NOT EXISTS user_profiles (\n            profile_id INTEGER PRIMARY KEY AUTOINCREMENT,\n            user_id INTEGER UNIQUE,\n            hp INTEGER DEFAULT 100 CHECK(hp >= 0 AND hp <= 150),\n            level INTEGER DEFAULT 1 CHECK(level >= 1 AND level <= 169),\n            exp INTEGER DEFAULT 0,\n            lumcoins INTEGER DEFAULT 0,\n            daily_messages INTEGER DEFAULT 0,\n            total_messages INTEGER DEFAULT 0,\n            flames INTEGER DEFAULT 0,\n            last_work_time REAL DEFAULT 0,\n            FOREIGN KEY (user_id) REFERENCES users (user_id)\n        )\n        ', [])
2025-07-18 15:53:24,628 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001D206475740>, '\n        CREATE TABLE IF NOT EXISTS user_profiles (\n            profile_id INTEGER PRIMARY KEY AUTOINCREMENT,\n            user_id INTEGER UNIQUE,\n            hp INTEGER DEFAULT 100 CHECK(hp >= 0 AND hp <= 150),\n            level INTEGER DEFAULT 1 CHECK(level >= 1 AND level <= 169),\n            exp INTEGER DEFAULT 0,\n            lumcoins INTEGER DEFAULT 0,\n            daily_messages INTEGER DEFAULT 0,\n            total_messages INTEGER DEFAULT 0,\n            flames INTEGER DEFAULT 0,\n            last_work_time REAL DEFAULT 0,\n            FOREIGN KEY (user_id) REFERENCES users (user_id)\n        )\n        ', []) completed
2025-07-18 15:53:24,628 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001D206475740>, 'CREATE INDEX IF NOT EXISTS idx_user_profiles_user_id ON user_profiles(user_id)', [])
2025-07-18 15:53:24,628 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001D206475740>, 'CREATE INDEX IF NOT EXISTS idx_user_profiles_user_id ON user_profiles(user_id)', []) completed
2025-07-18 15:53:24,629 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001D2064354E0>)
2025-07-18 15:53:24,629 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001D2064354E0>) completed
2025-07-18 15:53:24,629 - INFO - core.group.stat.smain - Asynchronous profiles database tables checked/created.
2025-07-18 15:53:24,629 - INFO - core.group.stat.smain - Asynchronous profiles database schema check/initialization completed.
2025-07-18 15:53:24,629 - INFO - core.main.ez_main - main: ProfileManager подключен.
2025-07-18 15:53:24,629 - INFO - core.main.ez_main - main: Инициализация основной базы данных.
2025-07-18 15:53:24,630 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001D206471760>
2025-07-18 15:53:24,630 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001D206471760> completed
2025-07-18 15:53:24,630 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064357B0>, '\n            CREATE TABLE IF NOT EXISTS users (\n                user_id INTEGER PRIMARY KEY,\n                username TEXT,\n                first_name TEXT NOT NULL,\n                last_active_ts REAL DEFAULT 0\n            )\n        ', [])
2025-07-18 15:53:24,630 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064357B0>, '\n            CREATE TABLE IF NOT EXISTS users (\n                user_id INTEGER PRIMARY KEY,\n                username TEXT,\n                first_name TEXT NOT NULL,\n                last_active_ts REAL DEFAULT 0\n            )\n        ', []) completed
2025-07-18 15:53:24,631 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064357B0>, '\n            CREATE TABLE IF NOT EXISTS value_subscriptions (\n                user_id INTEGER PRIMARY KEY,\n                subscribed_ts REAL NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', [])
2025-07-18 15:53:24,631 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064357B0>, '\n            CREATE TABLE IF NOT EXISTS value_subscriptions (\n                user_id INTEGER PRIMARY KEY,\n                subscribed_ts REAL NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', []) completed
2025-07-18 15:53:24,631 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064357B0>, "\n            CREATE TABLE IF NOT EXISTS dialog_history (\n                history_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                role TEXT NOT NULL CHECK(role IN ('user', 'assistant')),\n                content TEXT NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", [])
2025-07-18 15:53:24,631 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064357B0>, "\n            CREATE TABLE IF NOT EXISTS dialog_history (\n                history_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                role TEXT NOT NULL CHECK(role IN ('user', 'assistant')),\n                content TEXT NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", []) completed
2025-07-18 15:53:24,632 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064357B0>, '\n            CREATE INDEX IF NOT EXISTS idx_dialog_history_user_ts ON dialog_history (user_id, timestamp DESC)\n        ', [])
2025-07-18 15:53:24,632 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064357B0>, '\n            CREATE INDEX IF NOT EXISTS idx_dialog_history_user_ts ON dialog_history (user_id, timestamp DESC)\n        ', []) completed
2025-07-18 15:53:24,632 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064357B0>, "\n            CREATE TABLE IF NOT EXISTS user_modes (\n                user_id INTEGER PRIMARY KEY,\n                mode TEXT NOT NULL DEFAULT 'saharoza',\n                rating_opportunities_count INTEGER DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", [])
2025-07-18 15:53:24,632 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064357B0>, "\n            CREATE TABLE IF NOT EXISTS user_modes (\n                user_id INTEGER PRIMARY KEY,\n                mode TEXT NOT NULL DEFAULT 'saharoza',\n                rating_opportunities_count INTEGER DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", []) completed
2025-07-18 15:53:24,633 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064357B0>, "\n            CREATE TABLE IF NOT EXISTS analytics_interactions (\n                interaction_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                action_type TEXT NOT NULL DEFAULT 'message',\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", [])
2025-07-18 15:53:24,633 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064357B0>, "\n            CREATE TABLE IF NOT EXISTS analytics_interactions (\n                interaction_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                action_type TEXT NOT NULL DEFAULT 'message',\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", []) completed
2025-07-18 15:53:24,633 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064357B0>, '\n            CREATE INDEX IF NOT EXISTS idx_interactions_user_ts_mode ON analytics_interactions (user_id, timestamp DESC, mode)\n        ', [])
2025-07-18 15:53:24,633 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064357B0>, '\n            CREATE INDEX IF NOT EXISTS idx_interactions_user_ts_mode ON analytics_interactions (user_id, timestamp DESC, mode)\n        ', []) completed
2025-07-18 15:53:24,633 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064357B0>, '\n            CREATE TABLE IF NOT EXISTS analytics_ratings (\n                rating_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                rated_message_id INTEGER,\n                dialog_history_id INTEGER,\n                timestamp REAL NOT NULL,\n                rating INTEGER NOT NULL CHECK(rating IN (0, 1)),\n                message_preview TEXT,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE,\n                FOREIGN KEY(dialog_history_id) REFERENCES dialog_history(history_id) ON DELETE SET NULL\n            )\n        ', [])
2025-07-18 15:53:24,634 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064357B0>, '\n            CREATE TABLE IF NOT EXISTS analytics_ratings (\n                rating_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                rated_message_id INTEGER,\n                dialog_history_id INTEGER,\n                timestamp REAL NOT NULL,\n                rating INTEGER NOT NULL CHECK(rating IN (0, 1)),\n                message_preview TEXT,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE,\n                FOREIGN KEY(dialog_history_id) REFERENCES dialog_history(history_id) ON DELETE SET NULL\n            )\n        ', []) completed
2025-07-18 15:53:24,634 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064357B0>, '\n            CREATE TABLE IF NOT EXISTS rp_user_stats (\n                user_id INTEGER PRIMARY KEY,\n                hp INTEGER NOT NULL DEFAULT 100,\n                heal_cooldown_ts REAL NOT NULL DEFAULT 0,\n                recovery_end_ts REAL NOT NULL DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', [])
2025-07-18 15:53:24,634 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064357B0>, '\n            CREATE TABLE IF NOT EXISTS rp_user_stats (\n                user_id INTEGER PRIMARY KEY,\n                hp INTEGER NOT NULL DEFAULT 100,\n                heal_cooldown_ts REAL NOT NULL DEFAULT 0,\n                recovery_end_ts REAL NOT NULL DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', []) completed
2025-07-18 15:53:24,635 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001D2064357B0>)
2025-07-18 15:53:24,635 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001D2064357B0>) completed
2025-07-18 15:53:24,635 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D2064357B0>)
2025-07-18 15:53:24,635 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D2064357B0>) completed
2025-07-18 15:53:24,635 - INFO - database - Database initialized successfully.
2025-07-18 15:53:24,636 - INFO - core.main.ez_main - main: Инициализация StickerManager и загрузка стикеров.
2025-07-18 15:53:24,637 - INFO - core.main.ez_main - Stickers loaded from cache.
2025-07-18 15:53:24,637 - INFO - core.main.ez_main - Fetching stickers from Telegram...
2025-07-18 15:53:24,637 - INFO - core.main.ez_main - Stickers for mode 'saharoza' already loaded (possibly from cache). Skipping fetch.
2025-07-18 15:53:24,637 - INFO - core.main.ez_main - Stickers for mode 'dedinside' already loaded (possibly from cache). Skipping fetch.
2025-07-18 15:53:24,637 - INFO - core.main.ez_main - Stickers for mode 'genius' already loaded (possibly from cache). Skipping fetch.
2025-07-18 15:53:24,637 - INFO - core.main.ez_main - Stickers saved to cache.
2025-07-18 15:53:24,637 - DEBUG - core.main.ez_main - main: Передача зависимостей в диспетчер.
2025-07-18 15:53:24,637 - INFO - core.main.ez_main - main: Настройка и включение модуля цензуры (первый приоритет для групп).
2025-07-18 15:53:24,637 - DEBUG - censor_module - setup_censor_handlers: Начата настройка модуля цензуры.
2025-07-18 15:53:24,638 - DEBUG - censor_module - censor_module.load_bad_words: Попытка загрузить слова из файла: C:\4chan\.GITHUB\MRS_bot\data\bad_words.txt
2025-07-18 15:53:24,638 - INFO - censor_module - censor_module.load_bad_words: Успешно загружено 43 корней 'злых' слов из C:\4chan\.GITHUB\MRS_bot\data\bad_words.txt.
2025-07-18 15:53:24,638 - DEBUG - censor_module - setup_censor_handlers: Включение censor_router в главный диспетчер.
2025-07-18 15:53:24,638 - INFO - censor_module - setup_censor_handlers: Обработчики модуля цензуры успешно настроены и включены в главный диспетчер.
2025-07-18 15:53:24,638 - INFO - core.main.ez_main - main: Модуль цензуры успешно интегрирован.
2025-07-18 15:53:24,639 - INFO - core.main.ez_main - main: Создан роутер для групповых текстовых сообщений.
2025-07-18 15:53:24,639 - INFO - core.main.ez_main - main: Включение stat_router в group_text_router.
2025-07-18 15:53:24,639 - INFO - core.group.stat.smain - Registering stat router handlers.
2025-07-18 15:53:24,639 - INFO - core.group.stat.smain - Stat router included in Dispatcher.
2025-07-18 15:53:24,640 - INFO - core.main.ez_main - main: Включение rp_router в group_text_router.
2025-07-18 15:53:24,640 - INFO - core.group.RP.rmain - RP router included and configured.
2025-07-18 15:53:24,641 - INFO - core.main.ez_main - main: group_text_router успешно интегрирован в главный диспетчер.
2025-07-18 15:53:24,642 - INFO - core.main.ez_main - main: Создан роутер для приватных чатов.
2025-07-18 15:53:24,642 - INFO - core.main.ez_main - main: Регистрация основных обработчиков команд ТОЛЬКО для приватных чатов.
2025-07-18 15:53:24,643 - INFO - core.main.ez_main - main: Основной обработчик текстовых сообщений для ЛС зарегистрирован в private_router.
2025-07-18 15:53:24,643 - INFO - core.main.ez_main - main: private_router успешно интегрирован в главный диспетчер.
2025-07-18 15:53:24,643 - INFO - core.main.ez_main - main: Запуск фоновых задач.
2025-07-18 15:53:24,643 - INFO - core.main.ez_main - main: Запуск поллинга бота...
2025-07-18 15:53:24,643 - INFO - aiogram.dispatcher - Start polling
2025-07-18 15:53:24,643 - INFO - core.main.ez_main - Jokes task started.
2025-07-18 15:53:24,643 - WARNING - core.main.ez_main - Jokes task disabled: CHANNEL_ID is not set or invalid.
2025-07-18 15:53:24,643 - INFO - core.group.RP.rmain - Periodic HP recovery task started.
2025-07-18 15:53:26,424 - INFO - aiogram.dispatcher - Run polling for bot @infernal_madam_bot id=6543660809 - 'Мэрри Шэдоу💔'
2025-07-18 15:53:26,821 - DEBUG - censor_module - censor_message_handler: Получено сообщение: '😊' от пользователя 5210568951 в чате -1002640920461.
2025-07-18 15:53:26,821 - DEBUG - censor_module - censor_message_handler: Вызов censor_text_func для текста: '😊'
2025-07-18 15:53:26,821 - DEBUG - censor_module - censor_module.censor_text_func: Начата обработка текста: '😊' с корнями: ['пизд', 'хуй', 'елда', 'член', 'хуе', 'долба', 'пен', 'еб', 'ёб', 'бл', 'сперм', 'шлю', 'соса', 'пизд', 'хуй', 'елда', 'член', 'овощ', 'окак', 'короче', 'пизда', 'уёбище', 'бдсм', 'фетиш', 'фашист', 'адольф', 'гитлер', 'стинтлер', 'шлюх', 'раф', 'кун', 'даня', 'челобрек', 'мама', 'мать', 'секс', 'папа', 'батя', 'отец', 'минет', 'бля', 'кунилингус', 'трах']
2025-07-18 15:53:26,821 - DEBUG - censor_module - censor_module.censor_text_func: Сформировано объединенное регулярное выражение: '\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*х+\W*у+\W*е+\w*)\b|\b(?:\w*д+\W*о+\W*л+\W*б+\W*а+\w*)\b|\b(?:\w*п+\W*е+\W*н+\w*)\b|\b(?:\w*е+\W*б+\w*)\b|\b(?:\w*ё+\W*б+\w*)\b|\b(?:\w*б+\W*л+\w*)\b|\b(?:\w*с+\W*п+\W*е+\W*р+\W*м+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\w*)\b|\b(?:\w*с+\W*о+\W*с+\W*а+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\w*)\b|\b(?:\w*х+\W*у+\W*й+\w*)\b|\b(?:\w*е+\W*л+\W*д+\W*а+\w*)\b|\b(?:\w*ч+\W*л+\W*е+\W*н+\w*)\b|\b(?:\w*о+\W*в+\W*о+\W*щ+\w*)\b|\b(?:\w*о+\W*к+\W*а+\W*к+\w*)\b|\b(?:\w*к+\W*о+\W*р+\W*о+\W*ч+\W*е+\w*)\b|\b(?:\w*п+\W*и+\W*з+\W*д+\W*а+\w*)\b|\b(?:\w*у+\W*ё+\W*б+\W*и+\W*щ+\W*е+\w*)\b|\b(?:\w*б+\W*д+\W*с+\W*м+\w*)\b|\b(?:\w*ф+\W*е+\W*т+\W*и+\W*ш+\w*)\b|\b(?:\w*ф+\W*а+\W*ш+\W*и+\W*с+\W*т+\w*)\b|\b(?:\w*а+\W*д+\W*о+\W*л+\W*ь+\W*ф+\w*)\b|\b(?:\w*г+\W*и+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*с+\W*т+\W*и+\W*н+\W*т+\W*л+\W*е+\W*р+\w*)\b|\b(?:\w*ш+\W*л+\W*ю+\W*х+\w*)\b|\b(?:\w*р+\W*а+\W*ф+\w*)\b|\b(?:\w*к+\W*у+\W*н+\w*)\b|\b(?:\w*д+\W*а+\W*н+\W*я+\w*)\b|\b(?:\w*ч+\W*е+\W*л+\W*о+\W*б+\W*р+\W*е+\W*к+\w*)\b|\b(?:\w*м+\W*а+\W*м+\W*а+\w*)\b|\b(?:\w*м+\W*а+\W*т+\W*ь+\w*)\b|\b(?:\w*с+\W*е+\W*к+\W*с+\w*)\b|\b(?:\w*п+\W*а+\W*п+\W*а+\w*)\b|\b(?:\w*б+\W*а+\W*т+\W*я+\w*)\b|\b(?:\w*о+\W*т+\W*е+\W*ц+\w*)\b|\b(?:\w*м+\W*и+\W*н+\W*е+\W*т+\w*)\b|\b(?:\w*б+\W*л+\W*я+\w*)\b|\b(?:\w*к+\W*у+\W*н+\W*и+\W*л+\W*и+\W*н+\W*г+\W*у+\W*с+\w*)\b|\b(?:\w*т+\W*р+\W*а+\W*х+\w*)\b'
2025-07-18 15:53:26,869 - DEBUG - censor_module - censor_module.censor_text_func: Конечный цензурированный текст: '😊', Было ли цензурировано: False
2025-07-18 15:53:26,869 - DEBUG - censor_module - censor_message_handler: Результат censor_text_func: was_censored=False
2025-07-18 15:53:26,869 - DEBUG - censor_module - censor_message_handler: ЦЕНЗУРА НЕ ОБНАРУЖЕНА: Оригинал: '😊'
2025-07-18 15:53:26,870 - DEBUG - censor_module - censor_message_handler: Сообщение от пользователя 5210568951 не требует цензуры. Сообщение будет передано для дальнейшей обработки.
2025-07-18 15:53:26,870 - INFO - aiogram.event - Update id=836455721 is handled. Duration 61 ms by bot id=6543660809
2025-07-18 15:53:26,870 - DEBUG - censor_module - censor_message_handler: Получено сообщение: '/профиль' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 15:53:26,871 - DEBUG - censor_module - censor_message_handler: Сообщение '/профиль' является командой. Пропускаем цензуру.
2025-07-18 15:53:26,871 - INFO - aiogram.event - Update id=836455722 is handled. Duration 61 ms by bot id=6543660809
2025-07-18 15:54:24,649 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001D206473B00>
2025-07-18 15:54:24,650 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001D206473B00> completed
2025-07-18 15:54:24,650 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064371F0>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843264.6490264))
2025-07-18 15:54:24,651 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064371F0>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843264.6490264)) completed
2025-07-18 15:54:24,651 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D27F79CF40>)
2025-07-18 15:54:24,651 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D27F79CF40>) completed
2025-07-18 15:54:24,651 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D27F79CF40>)
2025-07-18 15:54:24,652 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D27F79CF40>) completed
2025-07-18 15:54:24,652 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D2064371F0>)
2025-07-18 15:54:24,652 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D2064371F0>) completed
2025-07-18 15:55:24,679 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001D2064AE840>
2025-07-18 15:55:24,680 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001D2064AE840> completed
2025-07-18 15:55:24,680 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D206437100>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843324.6794796))
2025-07-18 15:55:24,681 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D206437100>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843324.6794796)) completed
2025-07-18 15:55:24,681 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D27F79CF40>)
2025-07-18 15:55:24,681 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D27F79CF40>) completed
2025-07-18 15:55:24,681 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D27F79CF40>)
2025-07-18 15:55:24,682 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D27F79CF40>) completed
2025-07-18 15:55:24,682 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D206437100>)
2025-07-18 15:55:24,682 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D206437100>) completed
2025-07-18 15:56:24,693 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001D27F6084A0>
2025-07-18 15:56:24,694 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001D27F6084A0> completed
2025-07-18 15:56:24,694 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D206436980>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843384.693331))
2025-07-18 15:56:24,695 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D206436980>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843384.693331)) completed
2025-07-18 15:56:24,695 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D27F79CF40>)
2025-07-18 15:56:24,695 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D27F79CF40>) completed
2025-07-18 15:56:24,695 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D27F79CF40>)
2025-07-18 15:56:24,696 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D27F79CF40>) completed
2025-07-18 15:56:24,696 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D206436980>)
2025-07-18 15:56:24,696 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D206436980>) completed
2025-07-18 15:57:24,684 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001D27F431620>
2025-07-18 15:57:24,685 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001D27F431620> completed
2025-07-18 15:57:24,685 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D206436980>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843444.6840305))
2025-07-18 15:57:24,686 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D206436980>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843444.6840305)) completed
2025-07-18 15:57:24,686 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D27F79CF40>)
2025-07-18 15:57:24,686 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D27F79CF40>) completed
2025-07-18 15:57:24,686 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D27F79CF40>)
2025-07-18 15:57:24,686 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D27F79CF40>) completed
2025-07-18 15:57:24,687 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D206436980>)
2025-07-18 15:57:24,687 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D206436980>) completed
2025-07-18 15:58:24,689 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001D27F431620>
2025-07-18 15:58:24,690 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001D27F431620> completed
2025-07-18 15:58:24,690 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064371F0>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843504.6891844))
2025-07-18 15:58:24,691 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064371F0>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843504.6891844)) completed
2025-07-18 15:58:24,691 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D27F79CF40>)
2025-07-18 15:58:24,691 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D27F79CF40>) completed
2025-07-18 15:58:24,692 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D27F79CF40>)
2025-07-18 15:58:24,692 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D27F79CF40>) completed
2025-07-18 15:58:24,692 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D2064371F0>)
2025-07-18 15:58:24,692 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D2064371F0>) completed
2025-07-18 15:59:24,692 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001D2064714E0>
2025-07-18 15:59:24,692 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001D2064714E0> completed
2025-07-18 15:59:24,693 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D206436980>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843564.6918328))
2025-07-18 15:59:24,693 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D206436980>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843564.6918328)) completed
2025-07-18 15:59:24,694 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D27F79D040>)
2025-07-18 15:59:24,694 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D27F79D040>) completed
2025-07-18 15:59:24,694 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D27F79D040>)
2025-07-18 15:59:24,694 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D27F79D040>) completed
2025-07-18 15:59:24,694 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D206436980>)
2025-07-18 15:59:24,694 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D206436980>) completed
2025-07-18 16:00:24,707 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001D206471620>
2025-07-18 16:00:24,708 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001D206471620> completed
2025-07-18 16:00:24,708 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064371F0>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843624.7076647))
2025-07-18 16:00:24,708 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064371F0>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843624.7076647)) completed
2025-07-18 16:00:24,709 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D27F79D040>)
2025-07-18 16:00:24,709 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D27F79D040>) completed
2025-07-18 16:00:24,709 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D27F79D040>)
2025-07-18 16:00:24,709 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D27F79D040>) completed
2025-07-18 16:00:24,709 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D2064371F0>)
2025-07-18 16:00:24,709 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D2064371F0>) completed
2025-07-18 16:01:24,721 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001D206471620>
2025-07-18 16:01:24,721 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001D206471620> completed
2025-07-18 16:01:24,722 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D206436980>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843684.7213726))
2025-07-18 16:01:24,722 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D206436980>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843684.7213726)) completed
2025-07-18 16:01:24,723 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D27F79CF40>)
2025-07-18 16:01:24,723 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D27F79CF40>) completed
2025-07-18 16:01:24,723 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D27F79CF40>)
2025-07-18 16:01:24,723 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D27F79CF40>) completed
2025-07-18 16:01:24,724 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D206436980>)
2025-07-18 16:01:24,724 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D206436980>) completed
2025-07-18 16:02:24,729 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001D27F431620>
2025-07-18 16:02:24,730 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001D27F431620> completed
2025-07-18 16:02:24,730 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064371F0>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843744.7290049))
2025-07-18 16:02:24,731 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064371F0>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843744.7290049)) completed
2025-07-18 16:02:24,732 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D2064777C0>)
2025-07-18 16:02:24,732 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D2064777C0>) completed
2025-07-18 16:02:24,732 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D2064777C0>)
2025-07-18 16:02:24,732 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D2064777C0>) completed
2025-07-18 16:02:24,733 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D2064371F0>)
2025-07-18 16:02:24,733 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D2064371F0>) completed
2025-07-18 16:03:24,747 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001D206473B00>
2025-07-18 16:03:24,748 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001D206473B00> completed
2025-07-18 16:03:24,748 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D206436980>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843804.7476351))
2025-07-18 16:03:24,748 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D206436980>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843804.7476351)) completed
2025-07-18 16:03:24,749 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D2064776C0>)
2025-07-18 16:03:24,749 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D2064776C0>) completed
2025-07-18 16:03:24,749 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D2064776C0>)
2025-07-18 16:03:24,749 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D2064776C0>) completed
2025-07-18 16:03:24,749 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D206436980>)
2025-07-18 16:03:24,750 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D206436980>) completed
2025-07-18 16:04:24,757 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001D27F431620>
2025-07-18 16:04:24,758 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001D27F431620> completed
2025-07-18 16:04:24,758 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064371F0>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843864.7577925))
2025-07-18 16:04:24,758 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064371F0>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843864.7577925)) completed
2025-07-18 16:04:24,759 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D206476640>)
2025-07-18 16:04:24,759 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D206476640>) completed
2025-07-18 16:04:24,759 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D206476640>)
2025-07-18 16:04:24,759 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D206476640>) completed
2025-07-18 16:04:24,759 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D2064371F0>)
2025-07-18 16:04:24,760 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D2064371F0>) completed
2025-07-18 16:05:24,784 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001D206471620>
2025-07-18 16:05:24,785 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001D206471620> completed
2025-07-18 16:05:24,785 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D206436980>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843924.7849338))
2025-07-18 16:05:24,785 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D206436980>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843924.7849338)) completed
2025-07-18 16:05:24,786 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D206476640>)
2025-07-18 16:05:24,786 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D206476640>) completed
2025-07-18 16:05:24,786 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D206476640>)
2025-07-18 16:05:24,786 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D206476640>) completed
2025-07-18 16:05:24,787 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D206436980>)
2025-07-18 16:05:24,787 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D206436980>) completed
2025-07-18 16:06:24,797 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x000001D2064714E0>
2025-07-18 16:06:24,798 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x000001D2064714E0> completed
2025-07-18 16:06:24,798 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064371F0>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843984.7977226))
2025-07-18 16:06:24,798 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001D2064371F0>, '\n        SELECT user_id, hp\n        FROM rp_user_stats\n        WHERE hp <= ? AND recovery_end_ts > 0 AND recovery_end_ts <= ?\n    ', (0, 1752843984.7977226)) completed
2025-07-18 16:06:24,799 - DEBUG - aiosqlite - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D206476640>)
2025-07-18 16:06:24,799 - DEBUG - aiosqlite - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001D206476640>) completed
2025-07-18 16:06:24,799 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D206476640>)
2025-07-18 16:06:24,799 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001D206476640>) completed
2025-07-18 16:06:24,799 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D2064371F0>)
2025-07-18 16:06:24,799 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D2064371F0>) completed
2025-07-18 16:06:46,847 - INFO - aiogram.dispatcher - Polling stopped
2025-07-18 16:06:47,103 - INFO - core.main.ez_main - main: Остановка бота...
2025-07-18 16:06:47,103 - INFO - core.main.ez_main - main: Фоновые задачи успешно отменены.
2025-07-18 16:06:47,104 - DEBUG - core.group.stat.smain - Attempting to close profiles database connection.
2025-07-18 16:06:47,104 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D2064354E0>)
2025-07-18 16:06:47,104 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001D2064354E0>) completed
2025-07-18 16:06:47,104 - INFO - core.group.stat.smain - Profiles database connection closed successfully.
2025-07-18 16:06:47,105 - INFO - core.main.ez_main - main: Соединение ProfileManager закрыто.
2025-07-18 16:06:47,105 - INFO - core.main.ez_main - main: Сессия бота закрыта. Выход.
2025-07-18 16:06:47,105 - INFO - aiogram.dispatcher - Polling stopped for bot @infernal_madam_bot id=6543660809 - 'Мэрри Шэдоу💔'
2025-07-18 16:06:47,106 - INFO - core.main.ez_main - main: Бот остановлен вручную (KeyboardInterrupt).
2025-07-18 16:06:49,706 - WARNING - core.main.ez_main - CHANNEL_ID is not set or invalid. Jokes task will be disabled.
2025-07-18 16:06:49,878 - DEBUG - asyncio - Using proactor: IocpProactor
2025-07-18 16:06:49,878 - INFO - core.main.ez_main - main: Запуск основной функции бота.
2025-07-18 16:06:49,878 - INFO - core.group.stat.smain - ProfileManager instance initialized.
2025-07-18 16:06:49,879 - DEBUG - core.group.stat.smain - Attempting to connect to profiles database asynchronously.
2025-07-18 16:06:49,879 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x00000259A97E1760>
2025-07-18 16:06:49,880 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x00000259A97E1760> completed
2025-07-18 16:06:49,880 - INFO - core.group.stat.smain - Profiles database connected asynchronously.
2025-07-18 16:06:49,880 - DEBUG - core.group.stat.smain - Starting asynchronous profiles database schema initialization.
2025-07-18 16:06:49,880 - DEBUG - aiosqlite - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259A97994E0>)
2025-07-18 16:06:49,880 - DEBUG - aiosqlite - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259A97994E0>) completed
2025-07-18 16:06:49,881 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000259A97D5B40>, '\n        CREATE TABLE IF NOT EXISTS users (\n            user_id INTEGER PRIMARY KEY,\n            username TEXT,\n            first_name TEXT,\n            last_name TEXT,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        )\n        ', [])
2025-07-18 16:06:49,881 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000259A97D5B40>, '\n        CREATE TABLE IF NOT EXISTS users (\n            user_id INTEGER PRIMARY KEY,\n            username TEXT,\n            first_name TEXT,\n            last_name TEXT,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        )\n        ', []) completed
2025-07-18 16:06:49,882 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000259A97D5B40>, '\n        CREATE TABLE IF NOT EXISTS user_profiles (\n            profile_id INTEGER PRIMARY KEY AUTOINCREMENT,\n            user_id INTEGER UNIQUE,\n            hp INTEGER DEFAULT 100 CHECK(hp >= 0 AND hp <= 150),\n            level INTEGER DEFAULT 1 CHECK(level >= 1 AND level <= 169),\n            exp INTEGER DEFAULT 0,\n            lumcoins INTEGER DEFAULT 0,\n            daily_messages INTEGER DEFAULT 0,\n            total_messages INTEGER DEFAULT 0,\n            flames INTEGER DEFAULT 0,\n            last_work_time REAL DEFAULT 0,\n            FOREIGN KEY (user_id) REFERENCES users (user_id)\n        )\n        ', [])
2025-07-18 16:06:49,882 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000259A97D5B40>, '\n        CREATE TABLE IF NOT EXISTS user_profiles (\n            profile_id INTEGER PRIMARY KEY AUTOINCREMENT,\n            user_id INTEGER UNIQUE,\n            hp INTEGER DEFAULT 100 CHECK(hp >= 0 AND hp <= 150),\n            level INTEGER DEFAULT 1 CHECK(level >= 1 AND level <= 169),\n            exp INTEGER DEFAULT 0,\n            lumcoins INTEGER DEFAULT 0,\n            daily_messages INTEGER DEFAULT 0,\n            total_messages INTEGER DEFAULT 0,\n            flames INTEGER DEFAULT 0,\n            last_work_time REAL DEFAULT 0,\n            FOREIGN KEY (user_id) REFERENCES users (user_id)\n        )\n        ', []) completed
2025-07-18 16:06:49,882 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000259A97D5B40>, 'CREATE INDEX IF NOT EXISTS idx_user_profiles_user_id ON user_profiles(user_id)', [])
2025-07-18 16:06:49,882 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000259A97D5B40>, 'CREATE INDEX IF NOT EXISTS idx_user_profiles_user_id ON user_profiles(user_id)', []) completed
2025-07-18 16:06:49,883 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000259A97994E0>)
2025-07-18 16:06:49,883 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000259A97994E0>) completed
2025-07-18 16:06:49,883 - INFO - core.group.stat.smain - Asynchronous profiles database tables checked/created.
2025-07-18 16:06:49,883 - INFO - core.group.stat.smain - Asynchronous profiles database schema check/initialization completed.
2025-07-18 16:06:49,883 - INFO - core.main.ez_main - main: ProfileManager подключен.
2025-07-18 16:06:49,883 - INFO - core.main.ez_main - main: Инициализация основной базы данных.
2025-07-18 16:06:49,883 - DEBUG - aiosqlite - executing <function connect.<locals>.connector at 0x00000259A97E1A80>
2025-07-18 16:06:49,884 - DEBUG - aiosqlite - operation <function connect.<locals>.connector at 0x00000259A97E1A80> completed
2025-07-18 16:06:49,884 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000259A97997B0>, '\n            CREATE TABLE IF NOT EXISTS users (\n                user_id INTEGER PRIMARY KEY,\n                username TEXT,\n                first_name TEXT NOT NULL,\n                last_active_ts REAL DEFAULT 0\n            )\n        ', [])
2025-07-18 16:06:49,885 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000259A97997B0>, '\n            CREATE TABLE IF NOT EXISTS users (\n                user_id INTEGER PRIMARY KEY,\n                username TEXT,\n                first_name TEXT NOT NULL,\n                last_active_ts REAL DEFAULT 0\n            )\n        ', []) completed
2025-07-18 16:06:49,885 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000259A97997B0>, '\n            CREATE TABLE IF NOT EXISTS value_subscriptions (\n                user_id INTEGER PRIMARY KEY,\n                subscribed_ts REAL NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', [])
2025-07-18 16:06:49,886 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000259A97997B0>, '\n            CREATE TABLE IF NOT EXISTS value_subscriptions (\n                user_id INTEGER PRIMARY KEY,\n                subscribed_ts REAL NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', []) completed
2025-07-18 16:06:49,886 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000259A97997B0>, "\n            CREATE TABLE IF NOT EXISTS dialog_history (\n                history_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                role TEXT NOT NULL CHECK(role IN ('user', 'assistant')),\n                content TEXT NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", [])
2025-07-18 16:06:49,886 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000259A97997B0>, "\n            CREATE TABLE IF NOT EXISTS dialog_history (\n                history_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                role TEXT NOT NULL CHECK(role IN ('user', 'assistant')),\n                content TEXT NOT NULL,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", []) completed
2025-07-18 16:06:49,886 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000259A97997B0>, '\n            CREATE INDEX IF NOT EXISTS idx_dialog_history_user_ts ON dialog_history (user_id, timestamp DESC)\n        ', [])
2025-07-18 16:06:49,887 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000259A97997B0>, '\n            CREATE INDEX IF NOT EXISTS idx_dialog_history_user_ts ON dialog_history (user_id, timestamp DESC)\n        ', []) completed
2025-07-18 16:06:49,887 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000259A97997B0>, "\n            CREATE TABLE IF NOT EXISTS user_modes (\n                user_id INTEGER PRIMARY KEY,\n                mode TEXT NOT NULL DEFAULT 'saharoza',\n                rating_opportunities_count INTEGER DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", [])
2025-07-18 16:06:49,887 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000259A97997B0>, "\n            CREATE TABLE IF NOT EXISTS user_modes (\n                user_id INTEGER PRIMARY KEY,\n                mode TEXT NOT NULL DEFAULT 'saharoza',\n                rating_opportunities_count INTEGER DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", []) completed
2025-07-18 16:06:49,888 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000259A97997B0>, "\n            CREATE TABLE IF NOT EXISTS analytics_interactions (\n                interaction_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                action_type TEXT NOT NULL DEFAULT 'message',\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", [])
2025-07-18 16:06:49,888 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000259A97997B0>, "\n            CREATE TABLE IF NOT EXISTS analytics_interactions (\n                interaction_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                timestamp REAL NOT NULL,\n                mode TEXT NOT NULL,\n                action_type TEXT NOT NULL DEFAULT 'message',\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ", []) completed
2025-07-18 16:06:49,888 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000259A97997B0>, '\n            CREATE INDEX IF NOT EXISTS idx_interactions_user_ts_mode ON analytics_interactions (user_id, timestamp DESC, mode)\n        ', [])
2025-07-18 16:06:49,889 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000259A97997B0>, '\n            CREATE INDEX IF NOT EXISTS idx_interactions_user_ts_mode ON analytics_interactions (user_id, timestamp DESC, mode)\n        ', []) completed
2025-07-18 16:06:49,889 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000259A97997B0>, '\n            CREATE TABLE IF NOT EXISTS analytics_ratings (\n                rating_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                rated_message_id INTEGER,\n                dialog_history_id INTEGER,\n                timestamp REAL NOT NULL,\n                rating INTEGER NOT NULL CHECK(rating IN (0, 1)),\n                message_preview TEXT,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE,\n                FOREIGN KEY(dialog_history_id) REFERENCES dialog_history(history_id) ON DELETE SET NULL\n            )\n        ', [])
2025-07-18 16:06:49,889 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000259A97997B0>, '\n            CREATE TABLE IF NOT EXISTS analytics_ratings (\n                rating_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER NOT NULL,\n                rated_message_id INTEGER,\n                dialog_history_id INTEGER,\n                timestamp REAL NOT NULL,\n                rating INTEGER NOT NULL CHECK(rating IN (0, 1)),\n                message_preview TEXT,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE,\n                FOREIGN KEY(dialog_history_id) REFERENCES dialog_history(history_id) ON DELETE SET NULL\n            )\n        ', []) completed
2025-07-18 16:06:49,889 - DEBUG - aiosqlite - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000259A97997B0>, '\n            CREATE TABLE IF NOT EXISTS rp_user_stats (\n                user_id INTEGER PRIMARY KEY,\n                hp INTEGER NOT NULL DEFAULT 100,\n                heal_cooldown_ts REAL NOT NULL DEFAULT 0,\n                recovery_end_ts REAL NOT NULL DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', [])
2025-07-18 16:06:49,890 - DEBUG - aiosqlite - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000259A97997B0>, '\n            CREATE TABLE IF NOT EXISTS rp_user_stats (\n                user_id INTEGER PRIMARY KEY,\n                hp INTEGER NOT NULL DEFAULT 100,\n                heal_cooldown_ts REAL NOT NULL DEFAULT 0,\n                recovery_end_ts REAL NOT NULL DEFAULT 0,\n                FOREIGN KEY(user_id) REFERENCES users(user_id) ON DELETE CASCADE\n            )\n        ', []) completed
2025-07-18 16:06:49,890 - DEBUG - aiosqlite - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000259A97997B0>)
2025-07-18 16:06:49,890 - DEBUG - aiosqlite - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000259A97997B0>) completed
2025-07-18 16:06:49,891 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000259A97997B0>)
2025-07-18 16:06:49,891 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000259A97997B0>) completed
2025-07-18 16:06:49,891 - INFO - database - Database initialized successfully.
2025-07-18 16:06:49,891 - INFO - core.main.ez_main - main: Инициализация StickerManager и загрузка стикеров.
2025-07-18 16:06:49,892 - INFO - core.main.ez_main - Stickers loaded from cache.
2025-07-18 16:06:49,892 - INFO - core.main.ez_main - Fetching stickers from Telegram...
2025-07-18 16:06:49,892 - INFO - core.main.ez_main - Stickers for mode 'saharoza' already loaded (possibly from cache). Skipping fetch.
2025-07-18 16:06:49,892 - INFO - core.main.ez_main - Stickers for mode 'dedinside' already loaded (possibly from cache). Skipping fetch.
2025-07-18 16:06:49,892 - INFO - core.main.ez_main - Stickers for mode 'genius' already loaded (possibly from cache). Skipping fetch.
2025-07-18 16:06:49,893 - INFO - core.main.ez_main - Stickers saved to cache.
2025-07-18 16:06:49,893 - DEBUG - core.main.ez_main - main: Передача зависимостей в диспетчер.
2025-07-18 16:06:49,893 - INFO - core.main.ez_main - main: Настройка и включение модуля цензуры (первый приоритет для групп).
2025-07-18 16:06:49,893 - DEBUG - censor_module - setup_censor_handlers: Начата настройка модуля цензуры.
2025-07-18 16:06:49,893 - DEBUG - censor_module - censor_module.load_bad_words: Попытка загрузить слова из файла: C:\4chan\.GITHUB\MRS_bot\data\bad_words.txt
2025-07-18 16:06:49,893 - INFO - censor_module - censor_module.load_bad_words: Успешно загружено 43 корней 'злых' слов из C:\4chan\.GITHUB\MRS_bot\data\bad_words.txt.
2025-07-18 16:06:49,894 - DEBUG - censor_module - setup_censor_handlers: Загружены не-слеш команды для игнорирования цензором: ['романтический поцелуй', 'поцеловать в щёчку', 'толкнуть сильно', 'список действий', 'почесать спинку', 'схватить за шею', 'сделать массаж', 'подарить цветы', 'прижать к себе', 'мое здоровье', 'моё здоровье', 'разозлиться', 'рп действия', 'спеть песню', 'попрощаться', 'подмигнуть', 'поцеловать', 'испугаться', 'превратить', 'команды рп', 'издеваться', 'засмеяться', 'заплакать', 'удивиться', 'список рп', 'постучать', 'покормить', 'подрочить', 'успокоить', 'похлопать', 'погладить', 'помахать', 'пощечина', 'толкнуть', 'схватить', 'шлепнуть', 'трахнуть', 'обозвать', 'полечить', 'работать', 'здоровье', 'ущипнуть', 'плюнуть', 'профиль', 'укусить', 'напоить', 'обидеть', 'магазин', 'кивнуть', 'шепнуть', 'ударить', 'мое хп', 'моё хп', 'обнять', 'уебать', 'пнуть', 'топ', 'хп']
2025-07-18 16:06:49,894 - DEBUG - censor_module - setup_censor_handlers: Включение censor_router в главный диспетчер.
2025-07-18 16:06:49,894 - INFO - censor_module - setup_censor_handlers: Обработчики модуля цензуры успешно настроены и включены в главный диспетчер.
2025-07-18 16:06:49,894 - INFO - core.main.ez_main - main: Модуль цензуры успешно интегрирован.
2025-07-18 16:06:49,894 - INFO - core.main.ez_main - main: Создан роутер для групповых текстовых сообщений.
2025-07-18 16:06:49,894 - INFO - core.main.ez_main - main: Включение stat_router в group_text_router.
2025-07-18 16:06:49,894 - INFO - core.group.stat.smain - Registering stat router handlers.
2025-07-18 16:06:49,894 - INFO - core.group.stat.smain - Stat router included in Dispatcher.
2025-07-18 16:06:49,895 - INFO - core.main.ez_main - main: Включение rp_router в group_text_router.
2025-07-18 16:06:49,895 - INFO - core.group.RP.rmain - RP router included and configured.
2025-07-18 16:06:49,895 - INFO - core.main.ez_main - main: group_text_router успешно интегрирован в главный диспетчер.
2025-07-18 16:06:49,896 - INFO - core.main.ez_main - main: Создан роутер для приватных чатов.
2025-07-18 16:06:49,896 - INFO - core.main.ez_main - main: Регистрация основных обработчиков команд ТОЛЬКО для приватных чатов.
2025-07-18 16:06:49,896 - INFO - core.main.ez_main - main: Основной обработчик текстовых сообщений для ЛС зарегистрирован в private_router.
2025-07-18 16:06:49,897 - INFO - core.main.ez_main - main: private_router успешно интегрирован в главный диспетчер.
2025-07-18 16:06:49,897 - INFO - core.main.ez_main - main: Запуск фоновых задач.
2025-07-18 16:06:49,897 - INFO - core.main.ez_main - main: Запуск поллинга бота...
2025-07-18 16:06:49,897 - INFO - aiogram.dispatcher - Start polling
2025-07-18 16:06:49,897 - INFO - core.main.ez_main - Jokes task started.
2025-07-18 16:06:49,897 - WARNING - core.main.ez_main - Jokes task disabled: CHANNEL_ID is not set or invalid.
2025-07-18 16:06:49,897 - INFO - core.group.RP.rmain - Periodic HP recovery task started.
2025-07-18 16:06:51,357 - INFO - aiogram.dispatcher - Run polling for bot @infernal_madam_bot id=6543660809 - 'Мэрри Шэдоу💔'
2025-07-18 16:06:53,861 - DEBUG - censor_module - censor_message_handler: Получено сообщение: 'профиль' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 16:06:53,862 - DEBUG - censor_module - censor_message_handler: Сообщение 'профиль' является известной не-слеш командой 'профиль'. Пропускаем цензуру.
2025-07-18 16:06:53,862 - INFO - aiogram.event - Update id=836455723 is handled. Duration 0 ms by bot id=6543660809
2025-07-18 16:07:09,244 - DEBUG - censor_module - censor_message_handler: Получено сообщение: '/профиль' от пользователя 5315054003 в чате -1002640920461.
2025-07-18 16:07:09,244 - DEBUG - censor_module - censor_message_handler: Сообщение '/профиль' является командой со слешем. Пропускаем цензуру.
2025-07-18 16:07:09,244 - INFO - aiogram.event - Update id=836455724 is handled. Duration 14 ms by bot id=6543660809
2025-07-18 16:07:38,210 - INFO - aiogram.dispatcher - Polling stopped
2025-07-18 16:07:38,464 - INFO - core.main.ez_main - main: Остановка бота...
2025-07-18 16:07:38,464 - INFO - core.main.ez_main - main: Фоновые задачи успешно отменены.
2025-07-18 16:07:38,464 - DEBUG - core.group.stat.smain - Attempting to close profiles database connection.
2025-07-18 16:07:38,465 - DEBUG - aiosqlite - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000259A97994E0>)
2025-07-18 16:07:38,465 - DEBUG - aiosqlite - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000259A97994E0>) completed
2025-07-18 16:07:38,465 - INFO - core.group.stat.smain - Profiles database connection closed successfully.
2025-07-18 16:07:38,465 - INFO - core.main.ez_main - main: Соединение ProfileManager закрыто.
2025-07-18 16:07:38,465 - INFO - core.main.ez_main - main: Сессия бота закрыта. Выход.
2025-07-18 16:07:38,466 - INFO - aiogram.dispatcher - Polling stopped for bot @infernal_madam_bot id=6543660809 - 'Мэрри Шэдоу💔'
2025-07-18 16:07:38,467 - INFO - core.main.ez_main - main: Бот остановлен вручную (KeyboardInterrupt).
